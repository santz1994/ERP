# ğŸ­ PRESENTASI ERP QUTY KARUNIA
## Sistem Manufaktur Soft Toys yang Cerdas & Terintegrasi

**Untuk**: Management PT Quty Karunia  
**Tanggal**: 30 Januari 2026  
**Status**: âœ… PRODUCTION READY (95/100) - **Updated with New Production Flow**  
**Disusun oleh**: Daniel Rizaldy

> ğŸ†• **UPDATE MAJOR**: Dokumen ini telah diperbarui dengan **Dual Trigger Production System** - **PO Kain** (early start) dan **PO Label** (full release), menambahkan **Warehouse Finishing** dengan internal conversion 2-stage, dan implementasi **UOM Conversion** kritis.

---

## ğŸ“– DAFTAR ISI

1. [Apa itu ERP Quty Karunia?](#apa-itu-erp)
2. [Masalah yang Diselesaikan](#masalah)
3. [Fitur Utama Sistem](#fitur-utama)
4. [ğŸ†• Alur Kerja Produksi Baru (Dual Trigger: PO Kain + PO Label)](#alur-produksi)
5. [Modul-Modul Sistem](#modul-sistem)
6. [Teknologi yang Digunakan](#teknologi)
7. [Keamanan & Hak Akses](#keamanan)
8. [Aplikasi Android Mobile](#android-app)
9. [Ide Pengembangan Mendatang](#new-ideas)
10. [Perbandingan dengan Odoo](#comparison-odoo)
11. [Manfaat untuk Quty](#manfaat)
12. [Timeline & Roadmap](#timeline)

---

## ğŸ¯ 1. APA ITU ERP QUTY KARUNIA?

### Definisi Sederhana
**ERP (Enterprise Resource Planning)** adalah sistem komputer yang menghubungkan semua departemen di pabrik:

- **Purchasing Department** (3 Staff Specialist):
  - **Purchasing A (Fabric Specialist)**: Membeli kain dan menciptakan **PO Kain** (ğŸ”‘ TRIGGER 1: Early Start Production)
  - **Purchasing B (Label Specialist)**: Membeli label dan menciptakan **PO Label** (ğŸ”‘ TRIGGER 2: Full Release Production)  
  - **Purchasing C (Accessories Specialist)**: Membeli benang, box, filling, dan aksesoris lainnya (benang, kapas, carton, pallet, dll)
  
- **PPIC** membuat MO Manufacturing dengan 2 mode: **PARTIAL** (PO Kain only) atau **RELEASED** (PO Label ready)
- **Warehouse** menyediakan material untuk setiap departemen
- **Produksi** menjalankan 5 departemen: **Cutting â†’ Embroidery (optional) â†’ Sewing â†’ Finishing (2-stage) â†’ Packing**
- **Warehouse Finishing** (Gudang Bayangan) mengelola internal conversion: Skin â†’ Stuffed Body â†’ Finished Doll
- **Quality Control** memeriksa kualitas di setiap checkpoint
- **Manager & Director** memantau seluruh operasi real-time

### ğŸ†• Konsep Kunci Baru:
1. **Flexible Production Start**: Cutting dapat dimulai dengan PO Kain only (MODE PARTIAL), full production setelah PO Label (MODE RELEASED)
2. **Week & Destination Otomatis**: Diwariskan dari PO Label saat MO upgrade ke RELEASED, tidak bisa diedit manual
3. **Warehouse Finishing Unik**: Internal conversion tanpa surat jalan, 2 jenis stok (Skin & Stuffed Body)
4. **UOM Conversion Kritis**: Cutting (Yardâ†’Pcs) dan FG Receiving (Boxâ†’Pcs) adalah titik rawan error

### Analogi Mudah
Bayangkan sistem ERP seperti **"otak pabrik"** yang mengingat semua hal:
- Berapa banyak material tersedia?
- SPK mana yang sedang dikerjakan?
- Apakah produksi tepat waktu?
- Berapa banyak barang jadi yang siap dikirim?

**Tanpa ERP**: Setiap departemen punya catatan sendiri (Excel, kertas) â†’ banyak duplikasi dan kesalahan  
**Dengan ERP**: Satu sistem untuk semua â†’ data akurat, real-time, terintegrasi

---

## âŒ 2. MASALAH YANG DISELESAIKAN

### Masalah Lama di Quty (Sebelum ERP):

| **No** | **Masalah** | **Dampak** |
|--------|-------------|------------|
| 1 | **Data Produksi Manual** (Excel/Kertas) | - Laporan lambat<br>- Sering salah hitung<br>- Sulit lacak progres |
| 2 | **Material Tidak Terdata** | - Tiba-tiba material habis<br>- Produksi terhambat<br>- Pembelian mendadak (mahal) |
| 3 | **SPK Tidak Terpantau** | - Tidak tahu SPK mana yang terlambat<br>- PPIC kesulitan koordinasi |
| 4 | **FinishGood Sulit Verifikasi** | - Hitung manual (lama)<br>- Salah hitung jumlah box<br>- Customer komplain |
| 5 | **Approval Tidak Jelas** | - Siapa yang sudah approve?<br>- Perubahan SPK tanpa kontrol |
| 6 | **Laporan Bulanan Lambat** | - Butuh 3-5 hari untuk buat laporan<br>- Data sudah telat ketika selesai |
| 7 | **ğŸ†• Finishing Process Tidak Terstruktur** | - Stuffing & Closing campur aduk<br>- Sulit lacak konsumsi kapas<br>- Stok Skin vs Stuffed Body tidak jelas |
| 8 | **ğŸ†• UOM Conversion Manual Rawan Error** | - Cutting: Yard â†’ Pcs salah hitung<br>- FG Receiving: Box â†’ Pcs tidak konsisten<br>- Inventory kacau karena konversi salah |

### Solusi dengan ERP:

| **Fitur ERP** | **Solusi** |
|---------------|------------|
| âœ… **Input Produksi Digital** | Setiap Admin input langsung di tablet/HP â†’ data tersedia seketika |
| âœ… **Sistem Inventaris Otomatis** | Material keluar tercatat otomatis â†’ selalu tahu stock terkini |
| âœ… **Dashboard PPIC** | Lihat semua SPK dalam 1 layar â†’ tahu mana yang terlambat |
| âœ… **Barcode Scanner Android** | Scan barcode FinishGood â†’ otomatis hitung jumlah box |
| âœ… **Approval Workflow Digital** | SPV â†’ Manager â†’ Director (semua tercatat siapa & kapan approve) |
| âœ… **Laporan Otomatis** | Klik 1 tombol â†’ laporan muncul dalam 5 detik |
| âœ… **ğŸ†• Warehouse Finishing Internal Conversion** | 2-stage terpisah (Stuffing & Closing) dengan validasi stok langsung |
| âœ… **ğŸ†• UOM Conversion Otomatis** | Kalkulasi otomatis dengan rumus marker (Cutting) dan conversion factor (FG) |
| âœ… **ğŸ†• Flexible Production Trigger** | Produksi dapat dimulai dengan PO Kain untuk Cutting, upgrade ke full production saat PO Label ready â†’ cegah delay & chaos |

---

## ğŸŒŸ 3. FITUR UTAMA SISTEM

### A. **Dashboard Real-Time**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DASHBOARD PPIC - PT QUTY KARUNIA       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  ğŸ“Š Total SPK Hari Ini: 15              â”‚
â”‚      âœ… Selesai: 8                      â”‚
â”‚      ğŸ”„ Proses: 5                       â”‚
â”‚      âš ï¸  Terlambat: 2                   â”‚
â”‚                                         â”‚
â”‚  ğŸ“¦ Material Stock (Critical Items):    â”‚
â”‚      [IKHR504] KOHAIR D.BROWN:          â”‚
â”‚         125 YD (âš ï¸ Low: 15%, Min: 200)  â”‚
â”‚      [IKP20157] Filling Dacron:         â”‚
â”‚         45 KG (âœ… OK: 60%, Min: 20)     â”‚
â”‚      [ACB30104] Carton 570x375:         â”‚
â”‚         18 PCE (ğŸ”´ Critical!, Min: 50)  â”‚
â”‚                                         â”‚
â”‚  ğŸ­ Produksi Hari Ini (AFTONSPARV):     â”‚
â”‚      Target: 480 units (8 CTN)          â”‚
â”‚      Actual: 465 units (96.9%)          â”‚
â”‚      - Boneka Complete: 465 pcs âœ…      â”‚
â”‚      - Baju Ready: 470 pcs âœ…           â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Manfaat**: 
- Manager bisa lihat situasi pabrik dalam 5 detik
- Langsung tahu masalah apa yang butuh perhatian
- **Dual tracking**: Boneka & Baju dimonitor terpisah

---

### B. **Input Produksi Harian dengan Kalender**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  JANUARI 2026 - SPK-2026-00123                        â”‚
â”‚  Artikel: [40551542] AFTONSPARV | Target: 480 units  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Senin  Selasa  Rabu   Kamis  Jumat   Sabtu           â”‚
â”‚    1      2      3      4      5       6               â”‚
â”‚   ---    ---   [48]   [96]  [144]   [96]              â”‚
â”‚                                                        â”‚
â”‚    8      9     10     11     12      13               â”‚
â”‚  [96]   [48]   [--]   [--]   [--]   [--]              â”‚
â”‚                                                        â”‚
â”‚  Total Progres: 480/480 (100%) âœ…                     â”‚
â”‚  Actual Output: 465 pcs (Yield: 96.9%)                â”‚
â”‚                                                        â”‚
â”‚  ğŸ“Š Performance Detail:                                â”‚
â”‚  â”œâ”€ Daily Average: 96 pcs/day                         â”‚
â”‚  â”œâ”€ Peak Day: 144 pcs (Day 5)                         â”‚
â”‚  â”œâ”€ Reject Total: 15 pcs (3.1%)                       â”‚
â”‚  â””â”€ Efficiency: 97.4% (vs target 95%)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Cara Kerja**:
1. Admin produksi tap tanggal (contoh: 3 Januari)
2. Input jumlah produksi hari itu (48 units = 10% dari target 480)
3. Kalkulasi kumulatif otomatis dan yield
4. Kalau sudah 480/480 â†’ SPK auto-trigger final QC

**Manfaat**:
- Gampang track progres harian
- Tahu kapan SPK akan selesai
- Bisa prediksi keterlambatan
- **Pelacakan yield langsung**: Sistem monitor reject rate per hari

---

### C. **Sistem BOM (Bill of Materials) - Daftar Material**

#### Apa itu BOM?
BOM adalah **"resep masakan"** untuk membuat 1 produk.  
Contoh: Untuk membuat 1 unit **[40551542] AFTONSPARV soft toy w astronaut suit 28 bear**:

**Material Fabric (Kain)**:
- [IKHR504] KOHAIR 7MM RECYCLE 60" 390 GR/YD D.BROWN: 0.1466 YARD
- [IJBR105] JS BOA RECYCLE 60" 270 GR/YD BROWN: 0.0094 YARD
- [INYR002] NYLEX RECYCLE 60" 200 GR/YD BLACK: 0.0010 YARD
- [INYNR701] NYLEX NON BRUSH RECYCLE 60" 140 GR/YD WHITE: 0.0044 YARD
- [IPPR351-1] POLYESTER PRINT RECYCLE 58" 100 GSM WHITE/COLOR: 0.0699 YARD
- [IPPR352] POLYESTER PRINT RECYCLE 58" 100 GSM BLUE/COLOR: 0.0142 YARD
- [IPPR353] POLYESTER PRINT RECYCLE 58" 100 GSM WHITE/COLOR: 0.0391 YARD
- [IPR301] POLYESTER RECYCLE 58" 100 GSM WHITE: 0.1249 YARD
- [IPR302] POLYESTER RECYCLE 58" 100 GSM BLUE: 0.0259 YARD

**Material Thread (Benang)**:
- [ATR10500] EV62030-Y1554 ASTRA (20/3) RECYCLE: 2496 CM
- [ATR10701] EV65075-UB103 (40/3) RECYCLE: 160 CM
- [ATR10906] EV65080-04NNK (30/2) RECYCLE: 80 CM
- [ATR10702] EV65075-C7327 (40/3) RECYCLE: 80 CM
- [ATR10907] EV65080-C7327 (30/2) RECYCLE: 420 CM
- [ATR10908] EV65080/UB103 (30/2) RECYCLE: 1700 CM
- [ATR10900] EV65180-UA100 (60/2) RECYCLE: 4250 CM
- [ATR20302] White 1050-UB103: 60 CM
- [AWT20158] WEBBING TAPE 6MM-COL WHITE (RECYCLE): 202 CM

**Material Filling & Accessories**:
- [IKP20157] RECYCLE HCS 7DX32 CM5N (Isian/Filling): 54 GRAM
- [ALB40011] HANG TAG GUNTING: 1 PCE
- [ALL40030] LABEL EU: 1 PCE
- [AUL20220] STICKER ULL: 2 PCE
- [ALS40012] STICKER MIA: 1 PCE

**Material Packing**:
- [ACB30104] CARTON 570X375X450: 1 PCE (untuk 60 units)
- [ACB30121] PALLET 1140X750X50: 0.125 PCE
- [ACB30132] PAD 1140X750: 0.125 PCE

#### 2 Jenis BOM di Quty:

**BOM Manufacturing** (Untuk Produksi):
- Dibuat oleh PPIC
- Dipakai untuk alokasi material saat membuat MO (Manufacturing Order)
- Contoh: "Untuk 480 units AFTONSPARV, butuh 70.4 YARD fabric KOHAIR, 25.9 KG filling"

**BOM Purchasing** (Untuk Pembelian):
- Dibuat oleh Purchasing
- Bisa berbeda dengan BOM Manufacturing (karena vendor punya minimum order)
- Contoh: "Beli 80 YARD fabric KOHAIR (karena vendor minimum 1 roll = 80 YARD)"

#### ğŸ†• BOM Manufacturing untuk Warehouse Finishing 2-Stage

**Konsep Unik**: Warehouse Finishing memiliki **2 BOM terpisah** untuk 2-stage process.

##### **BOM Stage 1 - Stuffing (Isi Kapas)**

Untuk membuat **1 pcs Stuffed Body** dari Skin:

| Material Input | Qty | UOM | Source | Material Code |
|----------------|-----|-----|--------|---------------|
| **Skin** (WIP dari Sewing) | 1 | pcs | Warehouse Finishing Stok | AFTONSPARV_WIP_SKIN |
| Filling (Dacron Recycle) | 54 | gram | Warehouse Main | [IKP20157] RECYCLE HCS 7DX32 CM5N |
| Thread Closing (White) | 60 | cm | Warehouse Main | [ATR20302] White 1050-UB103 |

**Output**: 1 pcs **Stuffed Body** (AFTONSPARV_WIP_BONEKA)  
**Process Time**: ~3 menit per pcs  
**Yield Target**: 98% (reject rate <2%)

**System Calculation untuk MO 480 pcs** (8 CTN Ã— 60 pcs/CTN):
```
Target Output Stuffed Body: 480 pcs
Material Requirement:
â”œâ”€ Skin: 490 pcs (480 + 2% buffer reject)
â”œâ”€ Filling: 26.46 kg (490 Ã— 54 gram)
â”œâ”€ Thread Closing: 294 meter (490 Ã— 60 cm)
```

##### **BOM Stage 2 - Closing (Jahit Tutup)**

Untuk membuat **1 pcs Finished Doll** dari Stuffed Body:

| Material Input | Qty | UOM | Source | Material Code |
|----------------|-----|-----|--------|---------------|
| **Stuffed Body** (dari Stage 1) | 1 | pcs | Warehouse Finishing Stok | AFTONSPARV_WIP_BONEKA |
| Hang Tag | 1 | pcs | Warehouse Main | [ALB40011] HANG TAG GUNTING |

**Output**: 1 pcs **Finished Doll** (AFTONSPARV_WIP_BONEKA_COMPLETE)  
**Process Time**: ~2 menit per pcs (hanya pasang hangtag, karena closing sudah di Stuffing)  
**Yield Target**: 99% (reject rate <1%)

**System Calculation untuk MO 480 pcs**:
```
Target Output Finished Doll: 480 pcs
Material Requirement:
â”œâ”€ Stuffed Body: 485 pcs (480 + 1% buffer)
â”œâ”€ Hang Tag: 485 pcs
```

**Note Penting**: Pada AFTONSPARV, proses "Closing" (jahit tutup) sudah dilakukan bersamaan dengan Stuffing menggunakan thread [ATR20302]. Stage "Closing" di sini lebih ke final touch (pasang hangtag, final QC).

##### **Cascade BOM - Full Calculation End-to-End**

Untuk **480 pcs Finished Product** (8 CTN Ã— 60 pcs/CTN):

```
CUTTING - 2 PARALLEL STREAMS:

A. CUTTING BODY (untuk Boneka):
INPUT (Fabric):
â”œâ”€ [IKHR504] KOHAIR 7MM RECYCLE: 48.25 YARD (480 Ã— 0.1005 YD)
â”œâ”€ [IJBR105] JS BOA RECYCLE: 0.72 YARD (480 Ã— 0.0015 YD)
â”œâ”€ [INYR002] NYLEX RECYCLE BLACK: 0.48 YARD (480 Ã— 0.0010 YD)
â”œâ”€ [INYNR701] NYLEX NON BRUSH WHITE: 2.11 YARD (480 Ã— 0.0044 YD)
OUTPUT:
â””â”€ AFTONSPARV_WIP_CUTTING_BODY: 480 pcs â†’ Ke Embroidery

B. CUTTING BAJU (untuk Pakaian Astronaut):
INPUT (Fabric):
â”œâ”€ [IPPR351-1] POLYESTER PRINT WHITE/COLOR: 33.55 YARD (480 Ã— 0.0699 YD)
â”œâ”€ [IPPR352] POLYESTER PRINT BLUE/COLOR: 6.82 YARD (480 Ã— 0.0142 YD)
â”œâ”€ [IPPR353] POLYESTER PRINT WHITE/COLOR: 18.77 YARD (480 Ã— 0.0391 YD)
â”œâ”€ [IPR301] POLYESTER RECYCLE WHITE: 59.95 YARD (480 Ã— 0.1249 YD)
â”œâ”€ [IPR302] POLYESTER RECYCLE BLUE: 12.43 YARD (480 Ã— 0.0259 YD)
OUTPUT:
â””â”€ AFTONSPARV_WIP_CUTTING_BAJU: 480 pcs â†’ Langsung ke Sewing Baju

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

EMBROIDERY (Optional - hanya untuk BODY):
INPUT:
â”œâ”€ AFTONSPARV_WIP_CUTTING_BODY: 480 pcs
â”œâ”€ [IKHR504] KOHAIR 7MM RECYCLE: 22.13 YARD (480 Ã— 0.0461 YD)
â”œâ”€ [IJBR105] JS BOA RECYCLE: 3.79 YARD (480 Ã— 0.0079 YD)
OUTPUT:
â””â”€ AFTONSPARV_WIP_EMBO: 480 pcs â†’ Ke Sewing Body

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

SEWING - 2 PARALLEL STREAMS:

A. SEWING BODY (Boneka):
INPUT:
â”œâ”€ AFTONSPARV_WIP_CUTTING_BODY: 480 pcs
â”œâ”€ AFTONSPARV_WIP_EMBO: 480 pcs
â”œâ”€ [ALL40030] LABEL EU: 480 pcs
â”œâ”€ Threads (various colors): Total ~416,000 CM
  â”œâ”€ [ATR10500] EV62030 RECYCLE: 119,808 CM (480 Ã— 2496 CM)
  â”œâ”€ [ATR10701] EV65075-UB103: 7,680 CM (480 Ã— 160 CM)
  â”œâ”€ [ATR10906] EV65080-04NNK: 3,840 CM (480 Ã— 80 CM)
  â”œâ”€ [ATR10702] EV65075-C7327: 3,840 CM (480 Ã— 80 CM)
  â”œâ”€ [ATR10907] EV65080-C7327: 20,160 CM (480 Ã— 420 CM)
  â”œâ”€ [ATR10908] EV65080/UB103: 81,600 CM (480 Ã— 1700 CM)
  â”œâ”€ [ATR10900] EV65180-UA100: 204,000 CM (480 Ã— 4250 CM)
  â””â”€ [AWT20158] WEBBING TAPE 6MM WHITE: 9,696 CM (480 Ã— 202 CM)
OUTPUT:
â””â”€ AFTONSPARV_WIP_SKIN: 480 pcs â†’ Transfer ke Warehouse Finishing

B. SEWING BAJU (Pakaian Astronaut):
INPUT:
â”œâ”€ AFTONSPARV_WIP_CUTTING_BAJU: 480 pcs
â”œâ”€ Threads & accessories
OUTPUT:
â””â”€ AFTONSPARV_WIP_BAJU: 480 pcs â†’ Langsung ke Packing

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

WAREHOUSE FINISHING - STAGE 1 (STUFFING):
INPUT:
â”œâ”€ AFTONSPARV_WIP_SKIN: 480 pcs (dari Sewing Body)
â”œâ”€ [IKP20157] RECYCLE HCS (Filling): 25.92 kg (480 Ã— 54 gram)
â”œâ”€ [ATR20302] Thread Closing: 288 meter (480 Ã— 60 cm)
OUTPUT:
â””â”€ AFTONSPARV_WIP_BONEKA (Stuffed Body): 470 pcs (2% reject)
   â†’ Simpan di Warehouse Finishing Stok

WAREHOUSE FINISHING - STAGE 2 (CLOSING/FINISHING):
INPUT:
â”œâ”€ AFTONSPARV_WIP_BONEKA (Stuffed Body): 470 pcs (ambil dari stok internal)
â”œâ”€ [ALB40011] HANG TAG GUNTING: 470 pcs
OUTPUT:
â””â”€ AFTONSPARV_WIP_BONEKA_COMPLETE (Finished Doll): 465 pcs (1% reject)
   â†’ Transfer ke Packing (dengan surat jalan)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PACKING:
INPUT:
â”œâ”€ AFTONSPARV_WIP_BONEKA_COMPLETE: 465 pcs (dari Warehouse Finishing)
â”œâ”€ AFTONSPARV_WIP_BAJU: 465 pcs (dari Sewing Baju) - disesuaikan dengan boneka
â”œâ”€ [ACB30104] CARTON 570X375X450: 8 pcs (untuk 8 CTN @ 60 pcs)
â”œâ”€ [ACB30121] PALLET 1140X750X50: 1 pcs (8 CTN Ã— 0.125)
â”œâ”€ [ACB30132] PAD 1140X750: 1 pcs (8 CTN Ã— 0.125)
â”œâ”€ [ALS40012] STICKER MIA: 8 pcs (1 per carton)
OUTPUT:
â””â”€ AFTONSPARV_WIP_PACKING: 8 CTN (465 units total, 58 pcs/CTN avg)
   â†’ Transfer ke FG Warehouse

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FINISH GOOD:
INPUT:
â”œâ”€ AFTONSPARV_WIP_PACKING: 8 CTN (465 pcs)
â”œâ”€ [AUL20220] STICKER ULL: 16 pcs (2 per FG label)
OUTPUT:
â””â”€ [40551542] AFTONSPARV soft toy complete: 465 pcs ready to ship

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

TOTAL MATERIAL untuk 480 pcs Target (465 pcs Actual = 96.9% Yield):

FABRIC (Total):
â”œâ”€ KOHAIR: 70.38 YARD
â”œâ”€ JS BOA: 4.51 YARD
â”œâ”€ NYLEX BLACK: 0.48 YARD
â”œâ”€ NYLEX WHITE: 2.11 YARD
â”œâ”€ POLYESTER PRINT WHITE: 33.55 YARD
â”œâ”€ POLYESTER PRINT BLUE: 6.82 YARD
â”œâ”€ POLYESTER PRINT COLOR: 18.77 YARD
â”œâ”€ POLYESTER WHITE: 59.95 YARD
â””â”€ POLYESTER BLUE: 12.43 YARD

FILLING & THREAD:
â”œâ”€ Filling (Dacron): 25.92 kg
â”œâ”€ Sewing Threads: ~4,160 meter (various colors)
â”œâ”€ Closing Thread: 288 meter

ACCESSORIES:
â”œâ”€ EU Label: 480 pcs
â”œâ”€ Hang Tag: 470 pcs
â”œâ”€ Webbing Tape: 96.96 meter

PACKING MATERIALS:
â”œâ”€ Carton: 8 pcs
â”œâ”€ Pallet: 1 pcs
â”œâ”€ Pad: 1 pcs
â”œâ”€ Sticker MIA: 8 pcs
â””â”€ Sticker ULL: 16 pcs
```

**Insight Penting**:
1. **Split Production**: Boneka & Baju dijahit TERPISAH, baru digabung di Packing
2. **Embroidery Only for Body**: Baju tidak perlu bordir
3. **Warehouse Finishing**: Hanya untuk Boneka, Baju langsung ke Packing
4. **Overall Yield**: 96.9% (dari 480 target â†’ 465 actual)
   - Stuffing reject: 2% (480 â†’ 470)
   - Closing reject: 1% (470 â†’ 465)
5. **Material Complexity**: 30+ unique SKU material untuk 1 artikel!

**Keunggulan Cascade BOM**:
1. Perhitungan otomatis kebutuhan material end-to-end (30+ SKU material)
2. Monitor konsumsi material per stage (bisa tahu mana stage yang boros)
3. **Split tracking**: Boneka & Baju ditrack terpisah sampai Packing
4. Variance tracking: jika Stuffing butuh lebih banyak filling dari BOM, system alert
5. Update inventori langsung untuk Warehouse Finishing (Skin & Stuffed Body stock)
6. **Parallel production monitoring**: Dashboard bisa show Boneka progress vs Baju progress

#### Perbandingan Akhir:
Di akhir produksi, sistem akan bandingkan:
- **MO Target**: 480 units AFTONSPARV (8 CTN Ã— 60 pcs/CTN)
- **SPK Actual**: 465 units (reject 15 pcs total = 3.1%)
- **BOM Manufacturing (End-to-End)**: 
  - Fabric KOHAIR: 70.38 YARD
  - Filling: 25.92 kg
  - Thread (various): 4,448 meter total
  - Carton: 8 pcs
- **Actual Consumption**:
  - Fabric KOHAIR: 70.12 YARD (efisiensi 99.6%)
  - Filling: 26.45 kg (variance +2.0%, investigate)
  - Thread: 4,380 meter (efisiensi 98.5%)
  - Carton: 8 pcs (100% match)

**Manfaat**: 
- Tahu berapa banyak material yang dibuang/waste per stage
- Bisa evaluasi efisiensi produksi per departemen
- ğŸ†• **Pelacakan akurasi konversi internal** (Skin â†’ Stuffed â†’ Finished)
- ğŸ†• **Split production visibility**: Boneka vs Baju dapat dimonitor terpisah
- ğŸ†• **Complex BOM handling**: 30+ SKU material dengan UOM berbeda (YARD, GRAM, CM, PCE)

---

### D. **Sistem Inventaris Negatif (Material Debt)**

#### Masalah Real:
Kadang produksi harus jalan meskipun material belum datang.

**Contoh Kasus Real - AFTONSPARV Production**:
1. SPK Finishing butuh [IKP20157] Filling Dacron: 25.92 kg (untuk 480 pcs)
2. Stock di warehouse: 20.5 kg (kurang 5.42 kg)
3. Material PO-2026-0456 sedang di jalan dari supplier (datang besok sore)
4. Sewing sudah kirim 480 pcs Skin ke Warehouse Finishing (ready untuk Stuffing)

**Tanpa Sistem Negatif**: 
- Stuffing harus nunggu â†’ 480 pcs Skin menumpuk di warehouse
- Delay 1 hari â†’ impact ke Packing & FG target
- Sewing tidak bisa kirim batch berikutnya (gudang Finishing penuh)

**Dengan Sistem Negatif**: 
- Stuffing jalan dulu dengan 20.5 kg yang ada â†’ selesai ~380 pcs (79%)
- Sistem catat "utang 5.42 kg" untuk sisa 100 pcs
- Besok material datang â†’ lanjut produksi sisa 100 pcs
- Zero delay impact ke departemen lain

#### Cara Kerja:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MATERIAL DEBT REGISTER                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  SPK: SPK-FIN-2026-00123                â”‚
â”‚  Article: [40551542] AFTONSPARV         â”‚
â”‚  Material: [IKP20157] RECYCLE HCS       â”‚
â”‚             Filling (7DX32 CM5N)        â”‚
â”‚  Jumlah Debt: -5.42 kg                  â”‚
â”‚  Departemen: Finishing (Stuffing)       â”‚
â”‚                                         â”‚
â”‚  Alasan: "Material PO-2026-0456         â”‚
â”‚           dari supplier PT Kapas Jaya   â”‚
â”‚           delay 1 hari (ETA: besok)"    â”‚
â”‚                                         â”‚
â”‚  Impact Analysis:                       â”‚
â”‚  â”œâ”€ Can produce: 380 pcs (79%)          â”‚
â”‚  â”œâ”€ Waiting: 100 pcs (21%)              â”‚
â”‚  â”œâ”€ Delay FG: 0 days (partial ship OK) â”‚
â”‚  â””â”€ Material ETA: 29-Jan-2026 15:00    â”‚
â”‚                                         â”‚
â”‚  Status: âš ï¸ PENDING APPROVAL            â”‚
â”‚                                         â”‚
â”‚  [APPROVE] [REJECT] [REQUEST INFO]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Workflow Approval**:
1. Admin Cutting input debt + alasan
2. SPV Cutting review & approve
3. Manager approve
4. Director view-only (notifikasi saja)
5. Setelah material datang â†’ adjustment & konfirmasi

**Manfaat**:
- Produksi tidak terhambat
- Tetap ada kontrol (approval multi-level)
- Audit trail lengkap (siapa approve, kapan, kenapa)

---

### E. **Aplikasi Android untuk Barcode Scanning**

#### Fitur Utama:
1. **Scan Barcode FinishGood**
   - Arahkan kamera ke barcode
   - Otomatis baca kode (misal: FG-2026-00123)
   - Tampilkan info: Artikel, PO, Jumlah per box

2. **Verifikasi Jumlah Box**
   - Input jumlah box (misal: 50 box)
   - Sistem hitung total units (50 box Ã— 10 units/box = 500 units)
   - Bandingkan dengan target MO

3. **Offline Mode**
   - Bisa scan meskipun tidak ada internet
   - Data tersimpan di HP
   - Saat internet nyala â†’ otomatis sync

#### Tampilan App:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“± ERP QUTY - FINISHGOOD SCANNER   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  [ğŸ“· SCAN BARCODE]                  â”‚
â”‚                                     â”‚
â”‚  Hasil Scan:                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ FG-2026-00123-CTN001         â”‚  â”‚
â”‚  â”‚ Article: [40551542]          â”‚  â”‚
â”‚  â”‚ AFTONSPARV soft toy          â”‚  â”‚
â”‚  â”‚ w astronaut suit 28 bear     â”‚  â”‚
â”‚  â”‚                              â”‚  â”‚
â”‚  â”‚ PO Label: PO-LBL-2026-0456   â”‚  â”‚
â”‚  â”‚ Week: W05-2026 (29-Jan)      â”‚  â”‚
â”‚  â”‚ MO: MO-2026-00089            â”‚  â”‚
â”‚  â”‚ Units/CTN: 60 pcs            â”‚  â”‚
â”‚  â”‚ Carton: [ACB30104]           â”‚  â”‚
â”‚  â”‚ Weight: 4.2 kg               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                     â”‚
â”‚  Scan Progress: 3/8 CTN scanned     â”‚
â”‚  â”œâ”€ CTN-001: 60 pcs âœ…              â”‚
â”‚  â”œâ”€ CTN-002: 60 pcs âœ…              â”‚
â”‚  â””â”€ CTN-003: 60 pcs âœ…              â”‚
â”‚                                     â”‚
â”‚  Total Scanned: 180 pcs             â”‚
â”‚  Target: 480 pcs (8 CTN Ã— 60)       â”‚
â”‚  Progress: 37.5%                    â”‚
â”‚                                     â”‚
â”‚  [SCAN NEXT] [FINISH & CONFIRM]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Manfaat**:
- Hemat waktu (tidak hitung manual)
- Akurat (tidak ada salah hitung)
- Real-time (data langsung masuk sistem)

---

### F. **Approval Workflow Multi-Level**

Setiap perubahan penting harus melewati approval:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  APPROVAL CHAIN                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Admin        SPV            Manager        Director
   ğŸ‘·  â”€â”€â”€â”€â”€â”€>   ğŸ‘¨â€ğŸ’¼  â”€â”€â”€â”€â”€â”€>    ğŸ‘¨â€ğŸ’¼  â”€â”€â”€â”€â”€â”€>   ğŸ‘”
  INPUT        REVIEW        APPROVE       VIEW ONLY
              (approve/                   (notifikasi)
               reject)

Contoh Real Case - AFTONSPARV Production:

1. Admin Sewing Body: "Request ubah SPK-SEW-2026-00156"
   Article: [40551542] AFTONSPARV
   Original: 480 pcs â†’ Adjusted: 465 pcs (-15 pcs)
   Reason: "[IKHR504] KOHAIR fabric defect pada roll terakhir,
            marker tidak bisa dapat 480 pcs (shortage 1.2 YARD)"

2. SPV Sewing: Review inspection report
   â””â”€> "Approved" 
       Notes: "Fabric defect confirmed by QC (batch #K7042),
              15 pcs sudah dikurangi dari marker calculation.
              Purchasing perlu claim ke supplier PT Kain Jaya"

3. Manager Produksi: Cross-check dengan target MO
   â””â”€> "Approved with Action"
       Notes: "Approved adjustment. PPIC segera koordinasi:
              - Packing adjust target: 8 CTN â†’ 7.75 CTN (465 pcs)
              - FG Warehouse siapkan 1 carton khusus 45 pcs
              - Finance: Claim supplier untuk fabric defect"

4. Director: Terima notifikasi (View Only)
   â””â”€> Dashboard update: AFTONSPARV yield 96.9% (within tolerance)
```

**Jenis Approval**:
- Perubahan MO (Manufacturing Order)
- Perubahan SPK (Surat Perintah Kerja)
- Material Debt (Inventaris Negatif)
- Adjustment Stock

**Manfaat**:
- Kontrol ketat (tidak sembarangan ubah data)
- Tanggung jawab jelas (audit trail)
- Management tetap tahu semua perubahan

---

### G. **Laporan PPIC Harian & Alert Keterlambatan**

#### Laporan Otomatis:
Setiap pagi jam 08:00, laporan dikirim otomatis via email/WhatsApp:

```
ğŸ“§ LAPORAN HARIAN PPIC - 28 Januari 2026

âœ… SPK SELESAI HARI INI: 8
   - SPK-CUT-2026-00120 (Cutting Body) â†’ 480/480 pcs AFTONSPARV
   - SPK-EMB-2026-00121 (Embroidery) â†’ 480/480 pcs AFTONSPARV
   - SPK-SEW-2026-00156 (Sewing Body) â†’ 465/480 pcs (96.9%)
   - SPK-FIN-2026-00089 (Stuffing) â†’ 380/480 pcs (79.2%)
   ...

ğŸ”„ SPK DALAM PROSES: 5
   - SPK-FIN-2026-00089 (Closing) â†’ 380/465 pcs (81.7%)
     ETA: 28-Jan 16:00 (on track)
   - SPK-PKG-2026-00045 (Packing) â†’ 240/465 pcs (51.6%)
     ETA: 28-Jan 18:00 (on track)
   ...

âš ï¸ SPK TERLAMBAT: 1
   - SPK-FIN-2026-00089 (Stuffing) â†’ Target: 480 pcs, Actual: 380 pcs
     Deadline: 28-Jan 12:00, Actual: Partial done (waiting material)
     Alasan: [IKP20157] Filling Dacron shortage 5.42 kg
             (PO-2026-0456 delay dari supplier PT Kapas Jaya)
     Status: Material Debt Approved (-5.42 kg)
     Sisa: 100 pcs (ETA: 29-Jan setelah material datang)

ğŸ“¦ MATERIAL KRITIS:
   - [IKHR504] KOHAIR D.BROWN: 125 YARD (âš ï¸ Low 15%, Min: 200 YD)
     â†’ Next MO butuh 70.4 YD untuk 480 pcs AFTONSPARV
     â†’ Stock cukup untuk 1.7 MO, order NOW!
   - [IKP20157] Filling Dacron: 20.5 kg (ğŸ”´ Critical!, Min: 50 kg)
     â†’ Material Debt: -5.42 kg (PO-2026-0456 ETA: today 15:00)
   - [ACB30104] Carton 570x375: 18 PCE (ğŸ”´ Critical!, Min: 50 PCE)
     â†’ Next Packing butuh 8 CTN, stock cukup untuk 2 MO only!

ğŸš¨ ACTION REQUIRED:
   1. Purchasing: Expedite [IKP20157] PO-2026-0456 (ETA update?)
   2. Warehouse: Prepare receiving [IKP20157] today 15:00
   3. Finishing: Continue Stuffing sisa 100 pcs setelah material datang
   4. Purchasing: Create PO [IKHR504] KOHAIR minimum 150 YARD
   5. Purchasing: Create PO [ACB30104] Carton minimum 100 PCE

ğŸ“Š ARTIKEL IN PRODUCTION (Active MO):
   â€¢ [40551542] AFTONSPARV: 3 MO active (1,440 pcs total)
     â”œâ”€ MO-2026-00089: W05-2026 â†’ 96.9% done (465/480 pcs)
     â”œâ”€ MO-2026-00090: W06-2026 â†’ 15% progress (72/480 pcs)
     â””â”€ MO-2026-00091: W07-2026 â†’ Just started (0/480 pcs)
```

#### Notifikasi Langsung:
Jika ada masalah, sistem langsung kirim notifikasi:

```
ğŸš¨ ALERT - PRODUCTION DELAY!

SPK-FIN-2026-00089 TERLAMBAT!
Article: [40551542] AFTONSPARV
Department: Finishing (Stuffing)

Deadline: Hari ini 28-Jan 12:00
Progress: 380/480 pcs (79.2%)
Status: âš ï¸ WAITING MATERIAL

Root Cause:
[IKP20157] RECYCLE HCS Filling shortage 5.42 kg
PO-2026-0456 delay dari PT Kapas Jaya
ETA: Today 15:00

Impact:
â”œâ”€ 100 pcs cannot proceed (21%)
â”œâ”€ Blocking next stage: Closing
â”œâ”€ FG target delay: Partial (can ship 380 pcs first)
â””â”€ Customer notification: Required if >24h delay

Action Taken:
âœ… Material Debt Approved (-5.42 kg)
âœ… Purchasing expedite supplier
â³ Warehouse standby untuk receiving 15:00

[VIEW FULL DETAILS] [CONTACT SPV FINISHING] [ESCALATE]
```

**ğŸ†• Material-Specific Alerts** (with SKU codes):

1. **Critical Stock Alert**:
```
ğŸ”´ CRITICAL MATERIAL SHORTAGE

Material: [IKHR504] KOHAIR 7MM RECYCLE D.BROWN
Current Stock: 125 YARD (15% of safety stock)
Minimum Level: 200 YARD
Usage Rate: 70.4 YD per MO (480 pcs AFTONSPARV)

Impact:
â”œâ”€ Can complete: 1.7 MO only
â”œâ”€ Next MO: MO-2026-00090 (start: tomorrow)
â””â”€ Lead time: 7 days from order to receive

Action Required:
ğŸš¨ CREATE PO URGENT: Minimum 150 YARD
ğŸ“ Contact Purchasing Manager NOW
```

2. **UOM Conversion Error Alert**:
```
âš ï¸ UOM VALIDATION FAILED

SPK-CUT-2026-00120 (Cutting Body)
Material: [IKHR504] KOHAIR D.BROWN
Input: 75.5 YARD â†’ Output: 480 pcs

System Calculation:
Expected: 480 Ã— 0.1005 = 48.24 YARD
Tolerance (Â±10%): 43.4 - 53.1 YARD
Your Input: 75.5 YARD (+56.5% variance!)

âš ï¸ ERROR: Variance exceeds maximum tolerance
Possible causes:
â€¢ Data entry error (typo?)
â€¢ Fabric roll width mismatch
â€¢ BOM standard outdated

Action: SPV approval required before proceeding

[CORRECT INPUT] [APPROVE OVERRIDE] [ESCALATE QC]
```

3. **Warehouse Finishing Internal Stock Alert**:
```
âš ï¸ WAREHOUSE FINISHING LOW STOCK

Stok: [AFTONSPARV_WIP_SKIN] (Skin from Sewing)
Current: 370 pcs
Minimum: 400 pcs
Status: BELOW MINIMUM

Impact:
â”œâ”€ Stuffing can run for 6.8 hours only
â”œâ”€ Risk: Admin idle if Sewing delayed
â””â”€ Next batch from Sewing: ETA 14:00 (120 pcs)

Action Required:
ğŸ“ Notify SPV Sewing: Prioritize AFTONSPARV Body
ğŸ“‹ PPIC: Monitor Sewing progress closely
```

**Manfaat**:
- PPIC tidak perlu buka sistem berkali-kali
- Langsung tahu masalah dan bisa ambil tindakan
- Laporan siap untuk meeting management

---

### F. **ğŸ†• Fitur Unggulan Terbaru (Unique Selling Points)**

#### **1. PO Label sebagai Kunci Produksi** ğŸ”‘ (ğŸ†• Dual Mode)

**ğŸ†• Konsep Baru**: MO Manufacturing memiliki **2 MODE OPERASI**:

**MODE 1 - EARLY START** (PO Kain Only):
- Trigger: PO Purchasing (Kain/Fabric) Status: Approved âœ…
- MO Status: **PARTIAL** âš ï¸
- Yang dapat start:
  - âœ… **Cutting** (butuh kain saja)
  - âœ… **Embroidery** (jika perlu, butuh kain + benang bordir)
- Yang di-BLOCK:
  - âŒ **Sewing** (butuh Label EU untuk dijahit ke produk)
  - âŒ **Finishing** (butuh Hang Tag)
  - âŒ **Packing** (butuh Week/Destination dari PO Label)
- Week/Destination: TBD (temporary/default)

**MODE 2 - FULL PRODUCTION** (PO Label Ready):
- Trigger: PO Purchasing (Label) Status: Approved âœ…
- MO Status: **RELEASED** âœ…
- Yang dapat start: **SEMUA DEPARTEMEN** âœ…âœ…âœ…âœ…âœ…
- Week/Destination: Auto-inherit dari PO Label (read-only)

---

**Masalah Lama**:
- MO harus tunggu PO Label untuk full production â†’ Cutting delay 3-7 hari (SOLVED: now can start with PO Kain)
- Kain sudah datang tapi numpuk di warehouse (tidak bisa dipotong)
- Lead time produksi terlalu panjang

**Solusi Baru - Flexible MO Creation**:

#### **ğŸ†• Contoh Workflow Real - 3 Purchasing Staff Parallel**

**Order Baru**: MO-2026-00089 untuk 480 pcs [40551542] AFTONSPARV  
**Timeline**: 25-Jan (order) â†’ 5-Feb (delivery to customer)

**Day 1 (25-Jan) - Purchasing A (Fabric)**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PURCHASING A - FABRIC SPECIALIST                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Login: purchasing_fabric_a@qutykarunia.com       â”‚
â”‚ Task: Create PO Kain untuk MO-2026-00089         â”‚
â”‚                                                  â”‚
â”‚ BOM Calculation (480 pcs AFTONSPARV):           â”‚
â”‚ â”œâ”€ [IKHR504] KOHAIR D.BROWN: 70.38 YD           â”‚
â”‚ â”œâ”€ [IJBR105] JS BOA BROWN: 4.51 YD              â”‚
â”‚ â”œâ”€ [INYR002] NYLEX BLACK: 0.48 YD               â”‚
â”‚ â”œâ”€ [INYNR701] NYLEX WHITE: 2.11 YD              â”‚
â”‚ â”œâ”€ [IPPR351] POLYESTER PRINT: 33.55 YD          â”‚
â”‚ â””â”€ [IPR301] POLYESTER WHITE: 59.95 YD           â”‚
â”‚                                                  â”‚
â”‚ Vendor Selection:                                â”‚
â”‚ â”œâ”€ PT Kain Jaya (KOHAIR, POLYESTER)             â”‚
â”‚ â”œâ”€ PT Tekstil Makmur (JS BOA, NYLEX)            â”‚
â”‚                                                  â”‚
â”‚ Create PO-KAIN-2026-0450:                        â”‚
â”‚ â”œâ”€ Total Value: Rp 12,450,000                   â”‚
â”‚ â”œâ”€ Lead Time: 2 days (ETA: 27-Jan)              â”‚
â”‚ â”œâ”€ Status: Draft â†’ Submit for approval          â”‚
â”‚ â””â”€ Approval: â†’ Director (no manager layer)      â”‚
â”‚                                                  â”‚
â”‚ [SUBMIT PO] â†’ Waiting Director Approval...       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Day 1 (25-Jan 15:00) - Director Approve:
âœ… PO-KAIN-2026-0450 APPROVED
   Status: Approved â†’ Sent to Vendor
   
ğŸ”” NOTIFICATION to PPIC:
   "PO Kain approved! Can create MO PARTIAL mode now"
```

**Day 1 (25-Jan 16:00) - PPIC Create MO PARTIAL**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PPIC - CREATE MO EARLY START                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… PO-KAIN-2026-0450: Approved (fabric ready)    â”‚
â”‚ âŒ PO-LBL-2026-XXXX: Not yet created             â”‚
â”‚                                                  â”‚
â”‚ Decision: CREATE MO PARTIAL (early start)        â”‚
â”‚                                                  â”‚
â”‚ MO-2026-00089:                                   â”‚
â”‚ â”œâ”€ Article: [40551542] AFTONSPARV               â”‚
â”‚ â”œâ”€ Target: 480 pcs                              â”‚
â”‚ â”œâ”€ Status: PARTIAL âš ï¸                            â”‚
â”‚ â”œâ”€ Can Start: Cutting âœ…, Embroidery âœ…          â”‚
â”‚ â”œâ”€ Blocked: Sewing âŒ, Finishing âŒ, Packing âŒ  â”‚
â”‚ â””â”€ Week/Dest: TBD (waiting PO Label)            â”‚
â”‚                                                  â”‚
â”‚ Benefits:                                        â”‚
â”‚ â€¢ Cutting can start on 27-Jan (kain datang)     â”‚
â”‚ â€¢ Save 3-5 days lead time                       â”‚
â”‚ â€¢ Cutting WIP ready when label arrives          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Day 2 (26-Jan) - Purchasing B (Label) + C (Accessories) Parallel**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PURCHASING B - LABEL SPECIALIST                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Login: purchasing_label_b@qutykarunia.com        â”‚
â”‚ Task: Create PO Label untuk MO-2026-00089        â”‚
â”‚                                                  â”‚
â”‚ BOM Calculation (480 pcs AFTONSPARV):           â”‚
â”‚ â”œâ”€ [ALL40030] LABEL EU: 480 pcs                 â”‚
â”‚ â”œâ”€ [ALB40011] HANG TAG: 480 pcs                 â”‚
â”‚ â”œâ”€ [ALS40012] STICKER MIA: 8 pcs (1 per carton) â”‚
â”‚ â””â”€ [AUL20220] STICKER ULL: 16 pcs (2 per FG)    â”‚
â”‚                                                  â”‚
â”‚ Vendor: PT Label Indo                            â”‚
â”‚ Lead Time: 3 days (ETA: 29-Jan)                  â”‚
â”‚                                                  â”‚
â”‚ **CRITICAL INFO from Customer PO**:              â”‚
â”‚ â”œâ”€ Week: W05-2026 (29-Jan to 2-Feb) ğŸ”‘          â”‚
â”‚ â””â”€ Destination: WH-IKEA-SWEDEN ğŸ”‘                â”‚
â”‚                                                  â”‚
â”‚ Create PO-LBL-2026-0456:                         â”‚
â”‚ â”œâ”€ Total Value: Rp 3,250,000                    â”‚
â”‚ â”œâ”€ Week: W05-2026 (input manual) ğŸ“             â”‚
â”‚ â”œâ”€ Destination: WH-IKEA-SWEDEN (input manual) ğŸ“â”‚
â”‚ â””â”€ Status: Draft â†’ Submit for approval          â”‚
â”‚                                                  â”‚
â”‚ [SUBMIT PO]                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PURCHASING C - ACCESSORIES SPECIALIST            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Login: purchasing_accessories_c@qutykarunia.com  â”‚
â”‚ Task: Create PO Benang, Kapas, Carton           â”‚
â”‚                                                  â”‚
â”‚ BOM Calculation (480 pcs AFTONSPARV):           â”‚
â”‚ â”œâ”€ Threads (9 colors): 4,448 meter total        â”‚
â”‚ â”œâ”€ [IKP20157] Filling: 25.92 kg                 â”‚
â”‚ â”œâ”€ [ACB30104] Carton: 8 pcs                     â”‚
â”‚ â”œâ”€ [ACB30121] Pallet: 1 pcs                     â”‚
â”‚ â””â”€ [ACB30132] Pad: 1 pcs                        â”‚
â”‚                                                  â”‚
â”‚ Vendors:                                         â”‚
â”‚ â”œâ”€ PT Benang Kuat (threads)                     â”‚
â”‚ â”œâ”€ PT Kapas Jaya (filling)                      â”‚
â”‚ â””â”€ PT Karton Box (carton, pallet, pad)          â”‚
â”‚                                                  â”‚
â”‚ Create 3 separate POs:                           â”‚
â”‚ â”œâ”€ PO-ACC-2026-0780 (threads) - Rp 1,800,000    â”‚
â”‚ â”œâ”€ PO-ACC-2026-0781 (filling) - Rp 2,100,000    â”‚
â”‚ â””â”€ PO-ACC-2026-0782 (packing) - Rp 950,000      â”‚
â”‚                                                  â”‚
â”‚ [SUBMIT ALL POs]                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Day 2 (26-Jan 14:00) - Director Approve All:
âœ… PO-LBL-2026-0456 APPROVED â† **TRIGGER 2!**
âœ… PO-ACC-2026-0780 APPROVED
âœ… PO-ACC-2026-0781 APPROVED
âœ… PO-ACC-2026-0782 APPROVED

ğŸ”” AUTO-UPGRADE MO:
   MO-2026-00089: PARTIAL âš ï¸ â†’ RELEASED âœ…
   Week: W05-2026 (auto-inherit from PO Label)
   Destination: WH-IKEA-SWEDEN (auto-inherit from PO Label)
   
ğŸ”” NOTIFICATION to PPIC & Production:
   "MO-2026-00089 RELEASED! All departments can proceed!"
```

**Day 3 (27-Jan) - Kain Datang, Cutting Start**:
```
Warehouse receive fabric from PO-KAIN-2026-0450
Cutting Department:
â”œâ”€ SPK-CUT-2026-00120 (Body) - START âœ…
â””â”€ SPK-CUT-2026-00121 (Baju) - START âœ…

Progress: Cutting 480 pcs â†’ Complete in 1 day
```

**Day 4 (28-Jan) - Embroidery Start**:
```
SPK-EMB-2026-00122: Embroidery Body â†’ Complete
```

**Day 5 (29-Jan) - Label Datang, Sewing Start**:
```
Warehouse receive label from PO-LBL-2026-0456
MO-2026-00089: Status = RELEASED âœ…

Sewing Department (NOW UNBLOCKED):
â”œâ”€ SPK-SEW-2026-00156 (Body) - START âœ…
â””â”€ SPK-SEW-2026-00157 (Baju) - START âœ…

Progress: Sewing 480 pcs â†’ Complete in 1 day
```

**Day 6 (30-Jan) - Finishing & Packing**:
```
Finishing: SPK-FIN-2026-00089
â”œâ”€ Stuffing: 480 â†’ 470 pcs (2% reject)
â””â”€ Closing: 470 â†’ 465 pcs (1% reject)

Packing: SPK-PKG-2026-00045
â””â”€ 465 pcs â†’ 8 CTN (avg 58 pcs/CTN)
    Week: W05-2026 (from PO Label)
    Destination: WH-IKEA-SWEDEN (from PO Label)
```

**Result**:
- âœ… **Lead Time**: 5 days (vs 8 days jika tunggu PO Label dulu)
- âœ… **On-Time**: Ready 30-Jan, ship 31-Jan, arrive 5-Feb âœ…
- âœ… **3 Purchasing Staff** bekerja parallel tanpa manager bottleneck
- âœ… **Dual Trigger** bekerja sempurna: PO Kain (early) + PO Label (full)

---

**Scenario A: PO Kain Sudah Ada, PO Label Belum**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CREATE MO - EARLY START MODE                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Artikel: [40551542] AFTONSPARV                     â”‚
â”‚  Target Quantity: 480 pcs (8 CTN)                   â”‚
â”‚                                                     â”‚
â”‚  âœ… PO Kain Found: PO-KAIN-2026-0450                â”‚
â”‚     - [IKHR504] KOHAIR: 80 YD (Available)           â”‚
â”‚     - [IPPR351] POLYESTER: 150 YD (Available)       â”‚
â”‚     Status: Approved & Stock Ready âœ…               â”‚
â”‚                                                     â”‚
â”‚  âš ï¸ PO Label Not Found: Searching...                â”‚
â”‚     - [ALL40030] LABEL EU: Not ordered yet          â”‚
â”‚     - [ALB40011] HANG TAG: Not ordered yet          â”‚
â”‚                                                     â”‚
â”‚  âš™ï¸ MO MODE: PARTIAL (Early Start)                  â”‚
â”‚                                                     â”‚
â”‚  Can Start Production:                              â”‚
â”‚  â”œâ”€ âœ… Cutting (fabric available)                   â”‚
â”‚  â”œâ”€ âœ… Embroidery (if needed)                       â”‚
â”‚  â””â”€ âŒ Sewing BLOCKED (need Label EU)               â”‚
â”‚                                                     â”‚
â”‚  Week/Destination: TBD (will inherit from PO Label) â”‚
â”‚                                                     â”‚
â”‚  Benefits:                                          â”‚
â”‚  â€¢ Start Cutting immediately (save 3-5 days)        â”‚
â”‚  â€¢ Utilize fabric stock (prevent accumulation)      â”‚
â”‚  â€¢ Cutting WIP ready when Label arrives             â”‚
â”‚                                                     â”‚
â”‚  âš ï¸ Important: MO will auto-upgrade to RELEASED     â”‚
â”‚     when PO Label status = Approved                 â”‚
â”‚                                                     â”‚
â”‚  [CREATE MO PARTIAL]  [WAIT FOR LABEL]  [CANCEL]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Scenario B: PO Kain + PO Label Sudah Ada**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CREATE MO - FULL PRODUCTION MODE                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Artikel: [40551542] AFTONSPARV                     â”‚
â”‚  Target Quantity: 480 pcs (8 CTN)                   â”‚
â”‚                                                     â”‚
â”‚  âœ… PO Kain Found: PO-KAIN-2026-0450                â”‚
â”‚     Status: Approved & Stock Ready âœ…               â”‚
â”‚                                                     â”‚
â”‚  âœ… PO Label Found: PO-LBL-2026-0456                â”‚
â”‚     - [ALL40030] LABEL EU: 480 pcs âœ…               â”‚
â”‚     - [ALB40011] HANG TAG: 480 pcs âœ…               â”‚
â”‚     - Week: W05-2026 (29-Jan to 2-Feb)              â”‚
â”‚     - Destination: WH-IKEA-SWEDEN                   â”‚
â”‚     Status: Approved âœ…                              â”‚
â”‚                                                     â”‚
â”‚  âš™ï¸ MO MODE: RELEASED (Full Production)             â”‚
â”‚                                                     â”‚
â”‚  Can Start Production:                              â”‚
â”‚  â”œâ”€ âœ… Cutting                                       â”‚
â”‚  â”œâ”€ âœ… Embroidery                                    â”‚
â”‚  â”œâ”€ âœ… Sewing (Label EU available)                  â”‚
â”‚  â”œâ”€ âœ… Finishing (Hang Tag available)               â”‚
â”‚  â””â”€ âœ… Packing (Week/Destination set)               â”‚
â”‚                                                     â”‚
â”‚  Week: W05-2026 (inherited, read-only)              â”‚
â”‚  Destination: WH-IKEA-SWEDEN (inherited, read-only) â”‚
â”‚                                                     â”‚
â”‚  [CREATE MO RELEASED]  [CANCEL]                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Keuntungan Dual Mode**:
- âœ… **Lead Time Reduction**: Cutting start 3-5 hari lebih cepat (tidak tunggu PO Label)
- âœ… **Flexibility**: Dapat respond urgent order dengan start Cutting dulu
- âœ… **Material Utilization**: Kain tidak numpuk, langsung dipotong
- âœ… **Risk Mitigation**: Cutting WIP dapat disimpan, valid untuk artikel yang sama
- âœ… **Auto-Upgrade**: System otomatis upgrade MO PARTIAL â†’ RELEASED saat PO Label ready
- âœ… **100% Traceability**: Tetap track PO Kain + PO Label untuk audit
- âœ… **Zero Manual Error**: Week & Destination tetap auto-inherit dari PO Label (tidak manual)
- âœ… **Smart Blocking**: Sewing onwards tetap blocked sampai PO Label ready (cegah kekacauan)

---

#### **2. Warehouse Finishing dengan Internal Conversion 2-Stage** ğŸ­

**Konsep Unik**: Warehouse khusus milik departemen Finishing yang mengelola **2 jenis inventory berbeda**.

**Masalah Lama**:
- Stuffing & Closing campur aduk, tidak terstruktur
- Tidak tahu berapa Skin yang ready vs Stuffed Body yang ready
- Konsumsi kapas sulit di-track (kadang over, kadang kurang)
- Surat jalan untuk internal conversion (ribet & tidak perlu)

**Solusi Baru**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  WAREHOUSE FINISHING - DUAL INVENTORY            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                  â”‚
â”‚  STOK 1: SKIN (dari Sewing)                      â”‚
â”‚  â”œâ”€ Current Stock: 1,250 pcs                     â”‚
â”‚  â”œâ”€ Minimum Alert: 1,000 pcs                     â”‚
â”‚  â”œâ”€ Usage Today: -500 pcs (untuk Stuffing)       â”‚
â”‚  â””â”€ Status: âš ï¸ Below Minimum                     â”‚
â”‚                                                  â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                  â”‚
â”‚  STOK 2: STUFFED BODY (hasil Stuffing)           â”‚
â”‚  â”œâ”€ Current Stock: 2,100 pcs                     â”‚
â”‚  â”œâ”€ Minimum Alert: 500 pcs                       â”‚
â”‚  â”œâ”€ Produced Today: +490 pcs                     â”‚
â”‚  â”œâ”€ Usage Today: -190 pcs (untuk Closing)        â”‚
â”‚  â””â”€ Status: âœ… Normal                             â”‚
â”‚                                                  â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                  â”‚
â”‚  ğŸ”„ INTERNAL CONVERSION (NO SURAT JALAN):        â”‚
â”‚  â€¢ Tab Stuffing: Skin â†’ Stuffed Body             â”‚
â”‚    â””â”€ JSON log internal, tidak keluar system     â”‚
â”‚  â€¢ Tab Closing: Stuffed Body â†’ Finished Doll     â”‚
â”‚    â””â”€ Generate surat jalan HANYA saat keluar     â”‚
â”‚        ke Packing                                â”‚
â”‚                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Keuntungan**:
- âœ… **Visibilitas Langsung**: Tahu berapa Skin ready & Stuffed Body ready setiap saat
- âœ… **Material Control**: Track konsumsi kapas per batch (variance >10% â†’ alert)
- âœ… **Paperless Internal**: Tidak perlu surat jalan untuk Stuffing (efficiency)
- âœ… **2-Stage BOM**: Bisa optimize masing-masing stage terpisah
- âœ… **Alert System**: Auto-notify jika Skin < minimum (Sewing harus prioritas kirim)

---

#### **3. UOM Conversion dengan Auto-Validation** ğŸš¨

**Konsep**: Kalkulasi dan validasi otomatis konversi satuan di **2 titik kritis**.

**Titik Kritis 1 - Cutting (YARD â†’ Pcs)**:

**Masalah Lama**:
- Admin input: "70.38 YARD fabric KOHAIR menghasilkan 480 pcs"
- Tidak tahu apakah 480 pcs itu wajar atau tidak
- Kadang salah hitung â†’ kekacauan inventori

**Solusi Baru**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CUTTING INPUT - UOM VALIDATION         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Material: [IKHR504] KOHAIR D.BROWN     â”‚
â”‚  Fabric Used: 70.38 YARD                â”‚
â”‚  Pieces Produced: 480 pcs               â”‚
â”‚                                         â”‚
â”‚  System Calculation:                    â”‚
â”‚  â”œâ”€ BOM Standard: 0.1466 YARD/pcs       â”‚
â”‚  â”œâ”€ Expected Usage: 70.37 YARD          â”‚
â”‚  â”‚   (480 Ã— 0.1466)                     â”‚
â”‚  â”œâ”€ Tolerance Range (Â±5%):              â”‚
â”‚  â”‚   66.85 - 73.89 YARD                 â”‚
â”‚  â””â”€ Your Input: 70.38 YARD              â”‚
â”‚                                         â”‚
â”‚  âœ… VALID: Within tolerance range       â”‚
â”‚  Variance: +0.01% (Excellent!)          â”‚
â”‚                                         â”‚
â”‚  Material Efficiency:                   â”‚
â”‚  â€¢ Waste: 0.01 YARD (~0.01%)            â”‚
â”‚  â€¢ Rating: â­â­â­â­â­ (5/5)          â”‚
â”‚                                         â”‚
â”‚  [âœ“ CONFIRM INPUT]  [ADJUST QTY]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Contoh Case dengan Warning**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CUTTING INPUT - UOM VALIDATION         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Material: [IKP20157] Filling Dacron    â”‚
â”‚  Filling Used: 28.5 KG                  â”‚
â”‚  Stuffed Body Produced: 480 pcs         â”‚
â”‚                                         â”‚
â”‚  System Calculation:                    â”‚
â”‚  â”œâ”€ BOM Standard: 0.054 KG/pcs          â”‚
â”‚  â”œâ”€ Expected Usage: 25.92 KG            â”‚
â”‚  â”‚   (480 Ã— 0.054)                      â”‚
â”‚  â”œâ”€ Tolerance Range (Â±10%):             â”‚
â”‚  â”‚   23.33 - 28.51 KG                   â”‚
â”‚  â””â”€ Your Input: 28.5 KG                 â”‚
â”‚                                         â”‚
â”‚  âš ï¸ WARNING: Close to max tolerance      â”‚
â”‚  Variance: +9.96% (investigate!)        â”‚
â”‚                                         â”‚
â”‚  Possible Causes:                       â”‚
â”‚  â€¢ Stuffing too much (overweight)       â”‚
â”‚  â€¢ Material quality lower density       â”‚
â”‚  â€¢ Admin error in measurement        â”‚
â”‚                                         â”‚
â”‚  Recommendation: Check sample weight    â”‚
â”‚  Expected: 54 gram/pcs Â± 5 gram        â”‚
â”‚                                         â”‚
â”‚  [REQUIRE SPV APPROVAL]  [RE-MEASURE]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Titik Kritis 2 - FG Receiving (CTN â†’ Pcs)**:

**Masalah Lama**:
- Packing bilang: "8 CTN"
- Warehouse input: "8 CTN = 400 pcs" (harusnya 480 pcs!)
- Inventory jadi kacau

**Solusi Baru**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FG RECEIVING - CTN CONVERSION          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Article: [40551542] AFTONSPARV         â”‚
â”‚  Carton Received: 8 CTN                 â”‚
â”‚                                         â”‚
â”‚  Kalkulasi Otomatis:                    â”‚
â”‚  Standard: 8 CTN Ã— 60 pcs/CTN = 480 Pcsâ”‚
â”‚                                         â”‚
â”‚  Physical Count Verification:           â”‚
â”‚  â”œâ”€ Admin scan each carton barcode   â”‚
â”‚  â”œâ”€ CTN-001: 60 pcs âœ…                  â”‚
â”‚  â”œâ”€ CTN-002: 60 pcs âœ…                  â”‚
â”‚  â”œâ”€ CTN-003: 60 pcs âœ…                  â”‚
â”‚  â”œâ”€ CTN-004: 60 pcs âœ…                  â”‚
â”‚  â”œâ”€ CTN-005: 60 pcs âœ…                  â”‚
â”‚  â”œâ”€ CTN-006: 57 pcs âš ï¸ (3 short)        â”‚
â”‚  â”œâ”€ CTN-007: 60 pcs âœ…                  â”‚
â”‚  â””â”€ CTN-008: 60 pcs âœ…                  â”‚
â”‚                                         â”‚
â”‚  Total Actual: 477 pcs                  â”‚
â”‚  Expected: 480 pcs                      â”‚
â”‚  Variance: -0.6% (3 pcs short)          â”‚
â”‚                                         â”‚
â”‚  âš ï¸ Discrepancy Detected!               â”‚
â”‚  CTN-006 short 3 pcs - reason required  â”‚
â”‚                                         â”‚
â”‚  [REPORT DISCREPANCY]  [ADJUST STOCK]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Keuntungan**:
- âœ… **Zero Conversion Error**: Perhitungan otomatis berdasarkan BOM real
- âœ… **Multi-UOM Support**: YARD, GRAM, CM, PCE, CTN semua ter-handle
- âœ… **Validasi Langsung**: Warning segera jika variance >10%
- âœ… **Cegah Kekacauan Inventori**: Catch error SEBELUM data masuk sistem
- âœ… **Audit Trail**: Record setiap conversion dengan variance tracking
- âœ… **Barcode Integration**: Scan per carton untuk akurasi 100%
- âœ… **Learning System**: System catat pattern (jika marker ternyata lebih efficient)

---

#### **Kesimpulan Fitur Unggulan**:

| Fitur | Impact | Unique? |
|-------|--------|---------|
| PO Label Trigger | ğŸ”¥ HIGH - Mencegah kekacauan produksi | âœ… **UNIQUE** (tidak ada di ERP lain) |
| Warehouse Finishing 2-Stage | ğŸ”¥ HIGH - Control internal conversion | âœ… **UNIQUE** (tidak ada di ERP manapun) |
| UOM Auto-Validation | ğŸ”¥ HIGH - Prevent inventory disaster | âœ… **UNIQUE** (Odoo tidak punya auto-validation) |
| Daily Input Calendar | ğŸŸ¡ MEDIUM - Track progress harian | âš ï¸ Semi-unique (Odoo tidak punya) |
| Material Debt Advanced | ğŸŸ¡ MEDIUM - Keep production running | âš ï¸ Semi-unique (Odoo basic only) |

**Tiga fitur unggulan pertama adalah KILLER FEATURES yang membedakan ERP Quty Karunia dengan ERP lain (termasuk Odoo)!**

---

## <a name="alur-produksi"></a>ğŸ­ 4. ğŸ†• ALUR KERJA PRODUKSI BARU (DARI PO LABEL)

### ğŸ”‘ Perubahan Fundamental: Dual Trigger System (PO Kain + PO Label)

**DULU**: Produksi dimulai dari PO IKEA (manual, tidak terintegrasi)  
**SEKARANG**: Produksi dimulai dari **PO Purchasing** dengan **2 Mode Fleksibel**:
- **Mode PARTIAL**: Hanya PO Kain â†’ Cutting & Embroidery dapat start (lead time -3 hari)
- **Mode RELEASED**: PO Kain + PO Label â†’ Semua departemen dapat start

---

### ğŸ”„ **MO Manufacturing - 5 Status Lifecycle**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MO STATUS LIFECYCLE                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  1ï¸âƒ£ DRAFT                                                    â”‚
â”‚     â”œâ”€ MO baru dibuat, belum validate material              â”‚
â”‚     â”œâ”€ Digunakan untuk planning & material calculation      â”‚
â”‚     â””â”€ Cannot start production                              â”‚
â”‚                                                              â”‚
â”‚  2ï¸âƒ£ PARTIAL (ğŸ†• New!)                                        â”‚
â”‚     â”œâ”€ PO Kain ready, PO Label belum                        â”‚
â”‚     â”œâ”€ Cutting âœ… Embroidery âœ… dapat start                  â”‚
â”‚     â”œâ”€ Sewing âŒ Finishing âŒ Packing âŒ di-block            â”‚
â”‚     â”œâ”€ Week/Destination: TBD (temporary)                    â”‚
â”‚     â””â”€ Auto-upgrade ke RELEASED saat PO Label approved      â”‚
â”‚                                                              â”‚
â”‚  3ï¸âƒ£ RELEASED                                                 â”‚
â”‚     â”œâ”€ PO Kain + PO Label ready                             â”‚
â”‚     â”œâ”€ Semua departemen âœ…âœ…âœ…âœ…âœ… dapat start                 â”‚
â”‚     â”œâ”€ Week/Destination: Set (dari PO Label, read-only)     â”‚
â”‚     â””â”€ Production dapat berjalan full                       â”‚
â”‚                                                              â”‚
â”‚  4ï¸âƒ£ IN-PROGRESS                                              â”‚
â”‚     â”œâ”€ Production sudah berjalan (minimal 1 SPK active)     â”‚
â”‚     â”œâ”€ Daily tracking & monitoring                          â”‚
â”‚     â””â”€ Progress: 0-99%                                      â”‚
â”‚                                                              â”‚
â”‚  5ï¸âƒ£ COMPLETED                                                â”‚
â”‚     â”œâ”€ FG received di warehouse                             â”‚
â”‚     â”œâ”€ All SPK locked (tidak bisa edit historical data)     â”‚
â”‚     â””â”€ Ready to ship                                        â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**State Transition Rules**:
```
DRAFT â†’ PARTIAL:  Saat PO Kain approved
PARTIAL â†’ RELEASED: Saat PO Label approved (auto-upgrade)
DRAFT â†’ RELEASED: Jika PO Kain + Label sudah ready bersamaan
RELEASED â†’ IN-PROGRESS: Saat SPK pertama mulai input daily
IN-PROGRESS â†’ COMPLETED: Saat FG receiving confirmed
```

### ğŸ“Š Macro Flow: Dari Forecast hingga Shipping (ğŸ†• Dual Trigger System)

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  PO IKEA (SPI)      â”‚  â† Forecast 2 mingguan dari IKEA
                    â”‚  (Manual Check)     â”‚     (Tidak di-input ke ERP)
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                             â”‚
                â–¼                             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ PO PURCHASING (KAIN)  â”‚     â”‚ PO PURCHASING (LABEL) â”‚
    â”‚ Fabric Material       â”‚     â”‚ Label EU, Hang Tag    â”‚
    â”‚ Status: Approved âœ…   â”‚     â”‚ Status: Pending â³    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                            â”‚
                â”‚ ğŸ”¥ TRIGGER 1               â”‚ ğŸ”¥ TRIGGER 2
                â”‚ (Early Start)              â”‚ (Full Release)
                â”‚                            â”‚
                â–¼                            â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚ MO MANUFACTURING                  â”‚   â”‚
    â”‚ Status: PARTIAL âš ï¸                â”‚   â”‚
    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚   â”‚
    â”‚ Can Start:                        â”‚   â”‚
    â”‚ âœ… Cutting                        â”‚   â”‚
    â”‚ âœ… Embroidery (optional)          â”‚   â”‚
    â”‚                                   â”‚   â”‚
    â”‚ Blocked:                          â”‚   â”‚
    â”‚ âŒ Sewing (need Label EU)         â”‚   â”‚
    â”‚ âŒ Finishing (need Hang Tag)      â”‚   â”‚
    â”‚ âŒ Packing (need Week/Dest)       â”‚   â”‚
    â”‚                                   â”‚   â”‚
    â”‚ Week/Destination: TBD             â”‚   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                 â”‚                           â”‚
                 â”‚ â³ Waiting PO Label...    â”‚
                 â”‚                           â”‚
                 â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ (Auto-Upgrade Trigger)
                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ MO MANUFACTURING                  â”‚
    â”‚ Status: RELEASED âœ…               â”‚
    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    â”‚ Can Start:                        â”‚
    â”‚ âœ… Cutting (already running)      â”‚
    â”‚ âœ… Embroidery (already done)      â”‚
    â”‚ âœ… Sewing (NOW UNBLOCKED)         â”‚
    â”‚ âœ… Finishing (NOW UNBLOCKED)      â”‚
    â”‚ âœ… Packing (NOW UNBLOCKED)        â”‚
    â”‚                                   â”‚
    â”‚ Week: W05-2026 (from PO Label)    â”‚
    â”‚ Destination: IKEA-SWEDEN          â”‚
    â”‚              (read-only)          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ WAREHOUSE RECEIVING               â”‚
    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    â”‚ â€¢ Fabric: From PO Kain            â”‚
    â”‚ â€¢ Label EU: From PO Label         â”‚
    â”‚ â€¢ Hang Tag: From PO Label         â”‚
    â”‚ â€¢ Other Materials                 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   PRODUCTION EXECUTION                                â”‚
    â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
    â”‚                                                       â”‚
    â”‚   STREAM 1 (Body):                                    â”‚
    â”‚   Cutting â†’ Embroidery â†’ Sewing â†’ Warehouse Finish   â”‚
    â”‚                                                       â”‚
    â”‚   STREAM 2 (Baju):                                    â”‚
    â”‚   Cutting â†’ Sewing (parallel)                         â”‚
    â”‚                                                       â”‚
    â”‚   CONVERGENCE:                                        â”‚
    â”‚   Warehouse Finish (Stuffing+Closing) â†’ Packing       â”‚
    â”‚   (Body + Baju merged 1:1)                            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ FINISH GOOD INVENTORY             â”‚
    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    â”‚ â€¢ Scan Barcode per Carton         â”‚
    â”‚ â€¢ UOM Conversion: CTN â†’ PCS       â”‚
    â”‚ â€¢ Lock all SPK (historical)       â”‚
    â”‚ â€¢ Update MO: COMPLETED âœ…         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ SHIPPING ke Customer              â”‚
    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    â”‚ â€¢ Week: W05-2026                  â”‚
    â”‚ â€¢ Destination: IKEA Stockholm     â”‚
    â”‚ â€¢ Tracking: DHL Express           â”‚
    â”‚ â€¢ Docs: Packing List, COC, ECIS   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ“‹ Flow Highlights**:
- **Dual Path**: PO Kain (early) vs PO Label (full)
- **MO Upgrade**: PARTIAL â†’ RELEASED (automatic when PO Label approved)
- **Parallel Production**: Body & Baju streams run simultaneously
- **Smart Blocking**: Sewing onwards wait for material availability
- **Lead Time Gain**: -3 to -5 days (Cutting & Embroidery start early)

---

### ğŸ­ Production Flow Detail (5 Departemen + Warehouse Finishing)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. CUTTING  â”‚â”€â”€â”€â–¶â”‚2. EMBROIDERY â”‚â”€â”€â”€â–¶â”‚  3. SEWING   â”‚
â”‚  (Potong)    â”‚    â”‚  (Bordir)    â”‚    â”‚  (Jahit)     â”‚
â”‚ ğŸš¨ Yardâ†’Pcs â”‚    â”‚  (Optional)  â”‚    â”‚              â”‚
â”‚ âœ… PARTIAL OKâ”‚    â”‚ âœ… PARTIAL OKâ”‚    â”‚ âš ï¸ RELEASED  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
   Waktu: 1 hari       Waktu: 1 hari            â”‚
                                                 â”‚ Skin (WIP)
                                                 â–¼
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚ WAREHOUSE FINISHING    â”‚ ğŸ†•
                                    â”‚ (Gudang Bayangan)      â”‚
                                    â”‚ â€¢ Stok 1: Skin         â”‚
                                    â”‚ â€¢ Stok 2: Stuffed Body â”‚
                                    â”‚ âš ï¸ Need RELEASED MO    â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ INTERNAL CONVERSION (NO Surat Jalan)           â”‚
                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                    â–¼                     â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 4A. STUFFING          â”‚  â”‚ 4B. CLOSING           â”‚
        â”‚ Skin + Kapas          â”‚  â”‚ Stuffed + Benang      â”‚
        â”‚ â†’ Stuffed Body        â”‚  â”‚ â†’ Finished Doll       â”‚
        â”‚ âš ï¸ Need RELEASED MO   â”‚  â”‚ âš ï¸ Need RELEASED MO   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           Waktu: 0.5 hari                    â”‚
                                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. PACKING  â”‚â”€â”€â”€â–¶â”‚6.FINISHGOOD  â”‚â”€â”€â”€â–¶â”‚ 7. SHIPPING  â”‚
â”‚  (Kemasan)   â”‚    â”‚ (Warehouse)  â”‚    â”‚ (Kirim)      â”‚
â”‚ ğŸš¨ Boxâ†’Pcs   â”‚    â”‚ Scan Barcode â”‚    â”‚              â”‚
â”‚ âš ï¸ RELEASED  â”‚    â”‚              â”‚    â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   Waktu: 0.5 hari    Waktu: 0.5 hari     Waktu: sesuai PO

TOTAL CYCLE TIME: ~5-6 hari per batch (500 units)
LEAD TIME GAIN: -3 to -5 days (Cutting dapat start lebih awal)

âœ… = Can start with MO PARTIAL (PO Kain only)
âš ï¸ = Requires MO RELEASED (PO Label approved)
ğŸš¨ = Titik Kritis UOM Conversion (Developer wajib extra careful!)
ğŸ†• = Fitur baru yang tidak ada di alur lama
```

---

### ğŸ” Business Rules Kunci

1. **ğŸ†• Flexible MO Trigger - Dual Mode**:
   - **MODE PARTIAL**: MO dapat dibuat hanya dengan PO Kain (Cutting & Embroidery dapat start)
   - **MODE RELEASED**: MO full production setelah PO Label approved (semua dept dapat start)
   - Auto-upgrade: System otomatis upgrade MO PARTIAL â†’ RELEASED saat PO Label ready
   
2. **Week & Destination Inheritance**: Otomatis dari PO Label (saat upgrade ke RELEASED), read-only di MO

3. **MO Draft Mode**: Boleh buat MO Draft untuk hitung kebutuhan kain tanpa PO apapun

4. **Department Access Control**:
   - **MO Status = PARTIAL**: Hanya Cutting âœ… + Embroidery âœ… dapat buat SPK
   - **MO Status = RELEASED**: Semua departemen âœ…âœ…âœ…âœ…âœ… dapat buat SPK
   - Validation error jika Sewing/Finishing/Packing coba buat SPK saat MO = PARTIAL

5. **Embroidery Optional**: Tidak semua produk perlu bordir, bisa skip langsung Cutting â†’ Sewing

6. **Warehouse Finishing Internal**: Conversion Skin â†’ Stuffed Body TIDAK pakai surat jalan (internal log only)

7. **UOM Conversion Critical**: 
   - Cutting: Input Meter/Yard â†’ Output Pcs (pakai rumus marker)
   - FG Receiving: Input Box/Dus â†’ Output Pcs (pakai conversion factor) atau dibalik atau keseluruhan

---

### **STAGE 1: CUTTING (POTONG)** ğŸš¨ UOM Critical

**Siapa**: Departemen Cutting (5-10 Admin)  
**Input**: Fabric (Roll/YARD) - **dalam YARD**  
**Output**: Cut Pieces - **dalam PCS** (2 streams: Body & Baju)

**ğŸ†• AFTONSPARV Unique**: Cutting terbagi **2 parallel streams** terpisah!

#### ğŸš¨ UOM Conversion Challenge:
Bagaimana convert **70.38 YARD fabric KOHAIR** menjadi **480 pieces BODY**? Jawabannya tergantung **BOM standard per pcs**.

**Contoh Kasus Real - Cutting Body**:
- Artikel: [40551542] AFTONSPARV BODY
- Material: [IKHR504] KOHAIR 7MM RECYCLE D.BROWN
- BOM Standard: 0.1005 YARD/pcs (untuk body saja, belum embroidery)
- Fabric Width: 60" (1.52 Yard)
- Waste Allowance: 5%

**Rumus System**:
```
Target Output: 480 pcs Body
Calculation:
- Theoretical Usage = 480 Ã— 0.1005 = 48.24 YARD
- With Waste 5% = 48.24 Ã— 1.05 = 50.65 YARD
- Expected Cutting Output: 480 pcs Â± 2%

Sistem tampilkan: "Expected usage: ~50.65 YARD (Â±5%)"
```

**Langkah di ERP**:
1. **Admin Produksi buat SPK Cutting** via web portal
   - **ğŸ†• MO Status Validation (CRITICAL)**:
     ```
     System checks MO Status before allowing SPK creation:
     
     IF MO Status = DRAFT:
       âŒ ERROR: "Cannot create SPK. MO is still in DRAFT mode.
                   Please release MO to PARTIAL or RELEASED first."
     
     IF MO Status = PARTIAL:
       âœ… PASS: "MO PARTIAL detected. Cutting can proceed.
                  Note: Sewing onwards will be blocked until MO = RELEASED"
       âœ… Material Check: PO Kain availability verified
       âœ… Department Access: Cutting + Embroidery UNLOCKED
     
     IF MO Status = RELEASED:
       âœ… PASS: "MO RELEASED. All departments can proceed."
       âœ… Material Check: PO Kain + PO Label availability verified
       âœ… Department Access: ALL departments UNLOCKED
     ```
   - Pilih Artikel: [40551542] AFTONSPARV
   - Input target quantity: 480 pcs
   - Perhitungan otomatis kebutuhan fabric per jenis:
     ```
     FABRIC BODY:
     â”œâ”€ [IKHR504] KOHAIR D.BROWN: 50.65 YARD
     â”œâ”€ [IJBR105] JS BOA BROWN: 0.75 YARD
     â”œâ”€ [INYR002] NYLEX BLACK: 0.50 YARD
     â””â”€ [INYNR701] NYLEX WHITE: 2.21 YARD
     
     FABRIC BAJU:
     â”œâ”€ [IPPR351-1] POLYESTER PRINT WHITE: 35.25 YARD
     â”œâ”€ [IPPR352] POLYESTER PRINT BLUE: 7.16 YARD
     â”œâ”€ [IPPR353] POLYESTER PRINT WHITE: 19.71 YARD
     â”œâ”€ [IPR301] POLYESTER WHITE: 62.95 YARD
     â””â”€ [IPR302] POLYESTER BLUE: 13.05 YARD
     ```
   - Check stock fabric â†’ jika kurang, system suggest material debt

2. **Admin Cutting mulai kerja** (2 teams parallel)
   - **Team A**: Cutting Body (untuk Boneka)
     - Tap "START PRODUCTION - BODY"
     - Input progres harian:
       - [IKHR504] KOHAIR used: 12.66 YARD
       - Body pieces produced: 120 pcs
     - System hitung variance: 
       - Expected: 120 Ã— 0.1005 = 12.06 YARD
       - Actual: 12.66 YARD
       - Variance: +5.0% âš ï¸ (slightly over)
   
   - **Team B**: Cutting Baju (untuk Pakaian)
     - Tap "START PRODUCTION - BAJU"
     - Input progres harian:
       - [IPR301] POLYESTER WHITE used: 15.74 YARD
       - Baju pieces produced: 120 pcs
     - System hitung variance:
       - Expected: 120 Ã— 0.1249 = 14.99 YARD
       - Actual: 15.74 YARD
       - Variance: +5.0% âš ï¸

3. **Validasi Real-time**:
   - Jika variance >10% â†’ âš ï¸ Warning popup
   - Jika variance >15% â†’ âŒ Block input, butuh SPV approval
   - System track waste material per Admin per fabric type

4. **Selesai & handover**
   - **Stream Body**: 480 pcs Body cut â†’ Transfer ke Embroidery (dengan surat jalan)
   - **Stream Baju**: 480 pcs Baju cut â†’ Langsung ke Sewing Baju (dengan surat jalan)
   - Total fabric used tracked per material code
   - Material efficiency calculated: KOHAIR 99.4%, POLYESTER 98.1%

**KPI yang Dilacak**:
- Material Usage Variance per fabric type (actual vs BOM)
- Waste rate per Admin per material
- Pieces per hour (productivity) per stream
- Fabric utilization efficiency per roll
- **Dual stream sync**: Body vs Baju cutting speed balance

---

### **STAGE 2: EMBROIDERY (BORDIR)** - Optional

**Siapa**: Departemen Embroidery (8-12 Admin)  
**Input**: Potongan kain dari Cutting  
**Output**: Potongan kain dengan bordir

**Kapan Dibutuhkan?**:
- Produk dengan logo IKEA yang complex
- Artikel premium dengan detail embroidery
- Design khusus customer

**Proses di ERP**:
1. **Terima WIP dari Cutting** (scan barcode surat jalan)

2. **SPK Embroidery dibuat**:
   - **ğŸ†• MO Status Validation (Same Rules as Cutting)**:
     ```
     âœ… MO Status = PARTIAL â†’ Embroidery ALLOWED
        Reason: Early production stage, only fabric needed
        PO Kain sufficient, PO Label not required yet
     
     âœ… MO Status = RELEASED â†’ Embroidery ALLOWED  
        Full production mode, all materials available
     
     âŒ MO Status = DRAFT â†’ Embroidery BLOCKED
        ERROR: "MO not released for production.
                Cannot start embroidery work."
     ```
   - Linked ke SPK Cutting
   - Input design embroidery (upload pattern file)
   - Input warna benang yang dibutuhkan
   
3. **Admin Embroidery**:
   - Setup mesin dengan pattern
   - Input progres harian (pcs embroidered)
   - QC inline: check kualitas bordir (density, alignment)
4. **Handover ke Sewing**:
   - Generate surat jalan
   - Transfer WIP dengan barcode

**Alternative Flow - Vendor Embroidery**:
- Jika kapasitas internal tidak cukup
- Buat surat jalan keluar â†’ Vendor
- Vendor return â†’ Scan barcode masuk
- QC check before accepted

**KPI**:
- Embroidery per hour
- Color change time (efficiency mesin)
- Reject rate (thread break, misalignment)

---

### **STAGE 3: SEWING (JAHIT)**

**Siapa**: Departemen Sewing (15-20 Admin)  
**Input**: Potongan kain (dari Cutting atau Embroidery) + Label Identity  
**Output**: Skin/WIP (boneka terjahit tapi belum diisi)

**Proses di ERP**:
1. **Terima WIP** (scan barcode)
   - Dari Embroidery (jika ada bordir)
   - Atau langsung dari Cutting (jika tanpa bordir)
   
2. **ğŸ†• AFTONSPARV: 2 Parallel SPK Terpisah**

   **âš ï¸ CRITICAL MO Status Validation (SEWING STAGE)**:
   ```
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ âš ï¸ SEWING BLOCKED - MO Status PARTIAL            â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                                                  â”‚
   â”‚ MO: MO-2026-00089                                â”‚
   â”‚ Article: [40551542] AFTONSPARV                   â”‚
   â”‚ Current Status: PARTIAL ğŸŸ¡                      â”‚
   â”‚                                                  â”‚
   â”‚ âŒ Cannot Create SPK Sewing                      â”‚
   â”‚                                                  â”‚
   â”‚ Reason:                                          â”‚
   â”‚ Sewing requires LABEL EU [ALL40030] which must   â”‚
   â”‚ be sewn into the product. This material is only  â”‚
   â”‚ available when PO Label is approved.             â”‚
   â”‚                                                  â”‚
   â”‚ Current Material Status:                         â”‚
   â”‚ âœ… PO Kain: Approved (Cutting completed)        â”‚
   â”‚ âŒ PO Label: NOT YET ORDERED                     â”‚
   â”‚    - [ALL40030] LABEL EU: Unavailable            â”‚
   â”‚    - [ALB40011] HANG TAG: Unavailable            â”‚
   â”‚                                                  â”‚
   â”‚ What Happened So Far:                            â”‚
   â”‚ âœ… Cutting: 480 pcs completed                   â”‚
   â”‚ âœ… Embroidery: 480 pcs completed                â”‚
   â”‚ â¸ï¸ Sewing: Waiting for MO upgrade...          â”‚
   â”‚                                                  â”‚
   â”‚ Action Required:                                 â”‚
   â”‚ 1. Contact Purchasing to expedite PO Label       â”‚
   â”‚ 2. Notify PPIC to track PO Label approval        â”‚
   â”‚ 3. Wait for auto-upgrade (MO PARTIALâ†’RELEASED)  â”‚
   â”‚                                                  â”‚
   â”‚ Expected Timeline:                               â”‚
   â”‚ PO Label ETA: 2-3 days                           â”‚
   â”‚ MO will auto-upgrade when PO Label = Approved    â”‚
   â”‚                                                  â”‚
   â”‚ [CONTACT PPIC] [NOTIFY PURCHASING] [CLOSE]       â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   
   âœ… IF MO Status = RELEASED:
      SUCCESS: "MO RELEASED. Sewing can proceed."
      Material Verification:
      âœ… [ALL40030] LABEL EU: 480 pcs in stock
      âœ… Threads (9 colors): All available
      âœ… Webbing tape: 97 meter available
      âœ… Week/Destination: W05-2026, IKEA-SWEDEN
   ```
   â”‚                                                  â”‚
   â”‚  [CONTACT PURCHASING]  [VIEW MO STATUS]          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   ```
   
   **Validation Logic**:
   - âŒ If MO Status = PARTIAL â†’ **BLOCKED** (need PO Label for Label EU material)
   - âœ… If MO Status = RELEASED â†’ Can create SPK (PO Label ready, Label EU available)
   - âŒ If MO Status = DRAFT â†’ Cannot create SPK

   **SPK Sewing Body** (untuk Boneka):
   - Input: [AFTONSPARV_WIP_EMBO] 480 pcs (dari Embroidery)
   - Material allocation:
     - [ALL40030] LABEL EU: 480 pcs
     - [ATR10500] EV62030 Thread BROWN: 119,808 CM (2,496 cm per pcs)
     - [ATR10701] EV65075 Thread BROWN: 7,680 CM (160 cm per pcs)
     - [ATR10906] EV65080 Thread BLACK: 3,840 CM (80 cm per pcs)
     - [ATR10702] EV65075 Thread BLACK: 3,840 CM (80 cm per pcs)
     - [ATR10907] EV65080 Thread BLACK: 20,160 CM (420 cm per pcs)
     - [ATR10908] EV65080 Thread BROWN: 81,600 CM (1,700 cm per pcs)
     - [ATR10900] EV65180 Thread WHITE: 204,000 CM (4,250 cm per pcs)
     - [AWT20158] WEBBING TAPE WHITE: 9,696 CM (202 cm per pcs)
   - Output: [AFTONSPARV_WIP_SKIN] 465 pcs (reject 15 pcs = 3.1%)
   
   **SPK Sewing Baju** (untuk Pakaian Astronaut):
   - Input: [AFTONSPARV_WIP_CUTTING_BAJU] 480 pcs (dari Cutting)
   - Material allocation: Thread, accessories for clothing
   - Output: [AFTONSPARV_WIP_BAJU] 470 pcs (reject 10 pcs = 2.1%)

3. **Admin Sewing** (2 teams parallel):
   - **Team Body**: Jahit Body (3 lines)
     - Line A: 155 pcs (produksi 3 hari)
     - Line B: 160 pcs
     - Line C: 150 pcs
     - Total: 465 pcs (target 480, yield 96.9%)
   
   - **Team Baju**: Jahit Baju (2 lines)
     - Line D: 240 pcs
     - Line E: 230 pcs
     - Total: 470 pcs (target 480, yield 97.9%)

4. **QC Inline**:
   - Check setiap 50 pcs
   - Reject rate target: <3%
   - Catat defect type: 
     - Body: jahitan tidak rapi, label EU posisi miring, KOHAIR sobek
     - Baju: polyester stitching skip, sleeve tidak symmetry
   - Material tracking: [ATR10500] consumption variance per line

5. **Output: 2 WIP Terpisah** (siap untuk stage berbeda)
   - **SKIN (Body)**: 465 pcs â†’ Transfer ke **Warehouse Finishing** (surat jalan)
   - **BAJU (Clothing)**: 470 pcs â†’ Simpan di gudang Sewing, nanti kirim ke Packing (surat jalan)
   - Generate 2 surat jalan terpisah:
     - SJ-SEW-FIN-20260128-001 (Body ke Finishing)
     - SJ-SEW-PKG-20260130-001 (Baju ke Packing, setelah Finishing selesai)
   - Scan barcode saat terima di masing-masing departemen

**KPI**:
- Units per line per hour
- Reject rate per Admin
- Rework rate
- Label accuracy (IKEA label harus perfect position)

---

### **STAGE 4: WAREHOUSE FINISHING (GUDANG BAYANGAN)** ğŸ†• Fitur Baru!

**Konsep Unik**: Warehouse Finishing adalah **gudang khusus** milik departemen Finishing yang mengelola **2 jenis stok berbeda**:

#### ğŸ“¦ Stok Type 1: SKIN (dari Sewing)
- WIP terjahit, belum diisi kapas
- Stok in: Dari Sewing (dengan surat jalan)
- Stok out: Ke proses Stuffing (internal, NO surat jalan)

#### ğŸ§¸ Stok Type 2: STUFFED BODY (hasil Stuffing)
- WIP sudah diisi kapas, belum di-closing
- Stok in: Dari proses Stuffing (internal conversion)
- Stok out: Ke proses Closing (internal, NO surat jalan)

#### ğŸ”„ Internal Conversion (2-Stage Process):

---

### **STAGE 4A: STUFFING (ISI KAPAS)**

**Input**: Skin (dari stok Warehouse Finishing)  
**Material**: Kapas/Dacron (dari Warehouse Main)  
**Output**: Stuffed Body

**Proses di ERP**:
1. **Check Stok Skin**:
   ```
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ WAREHOUSE FINISHING - STOCK CHECK   â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ Skin Available: 1,250 pcs           â”‚
   â”‚ Reserved for SPK: 500 pcs           â”‚
   â”‚ Free Stock: 750 pcs                 â”‚
   â”‚                                     â”‚
   â”‚ Status: âœ… OK to Process            â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   ```
   - âŒ Jika Skin = 0 â†’ **System BLOCK**, error: "Stok Skin tidak tersedia"
   - âœ… Jika Skin > 0 â†’ Lanjut proses

2. **Admin Stuffing Input** (di SPK Finishing - Tab Stuffing):
   - Material Code Input:
     - [AFTONSPARV_WIP_SKIN] Skin used: 100 pcs
     - [IKP20157] RECYCLE HCS Filling used: 5.4 kg (5,400 gram)
     - [ATR20302] Thread Closing used: 60 Meter
   - Output:
     - [AFTONSPARV_WIP_BONEKA] Stuffed Body produced: 98 pcs
     - Reject: 2 pcs (uneven stuffing, overweight)
   - Quality Notes: 
     - Average weight per pcs: 55.1 gram (BOM: 54 gram, +2.0%)

3. **System Action**:
   - Stok Skin (AFTONSPARV_WIP_SKIN): -100 pcs
   - Stok Stuffed Body (AFTONSPARV_WIP_BONEKA): +98 pcs
   - Stok Filling [IKP20157]: -5.4 kg (from Warehouse Main)
   - Stok Thread [ATR20302]: -60 Meter
   - **TIDAK ADA SURAT JALAN** (internal conversion)
   - Log tercatat: 
     ```json
     {
       "timestamp": "2026-01-30T10:15:23Z",
       "Admin": "Admin-FIN-001",
       "process": "STUFFING",
       "input": {
         "skin_code": "AFTONSPARV_WIP_SKIN",
         "skin_qty": 100,
         "filling_code": "IKP20157",
         "filling_kg": 5.4,
         "thread_code": "ATR20302",
         "thread_Meter": 60
       },
       "output": {
         "stuffed_body_code": "AFTONSPARV_WIP_BONEKA",
         "good_qty": 98,
         "reject_qty": 2,
         "reject_reason": "uneven stuffing, overweight"
       },
       "variance": {
         "filling": "+2.0%",
         "weight_avg": "55.1g (expected 54g)"
       }
     }
     ```

4. **Quality Check**:
   - Weight check: Setiap stuffed body harus 54Â±5 gram
   - Actual: 55.1 gram average (within tolerance âœ…)
   - Visual inspection: Kapas merata, tidak ada gumpalan
   - Warning jika weight variance >10% (reject otomatis)

**KPI**:
- Filling consumption variance (actual vs BOM) - Target: <5%
- Weight consistency per piece - Target: 54Â±5 gram
- Stuffing productivity (pcs per hour) - Target: 20 pcs/hour
- Reject rate - Target: <2%
- **Material tracking**: [IKP20157] usage per batch dengan variance analysis

---

### **STAGE 4B: CLOSING (JAHIT TUTUP)**

**Input**: Stuffed Body (dari stok Warehouse Finishing)  
**Material**: Benang jahit tangan, Hangtag, Cleaning fluid  
**Output**: Finished Doll (siap packing)

**Proses di ERP**:
1. **Check Stok Stuffed Body**:
   ```
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Stuffed Body Available: 2,100 pcs   â”‚
   â”‚ In Closing Process: 300 pcs         â”‚
   â”‚ Free Stock: 1,800 pcs               â”‚
   â”‚ Status: âœ… OK to Process            â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   ```
   - âŒ Jika Stuffed Body = 0 â†’ **System BLOCK**
   - âœ… Jika > 0 â†’ Lanjut proses

2. **Admin Closing Input** (Tab Closing):
   - Material Code Input:
     - [AFTONSPARV_WIP_BONEKA] Stuffed Body used: 98 pcs
     - [ALB40011] Hang Tag used: 98 pcs
   - Output:
     - [AFTONSPARV_WIP_BONEKA_COMPLETE] Finished Doll produced: 97 pcs
     - Reject: 1 pcs (hang tag placement error)
   - Quality Notes:
     - Final QC pass rate: 99.0%

**âš ï¸ Note Penting - AFTONSPARV Case**: 
Pada artikel AFTONSPARV, thread closing [ATR20302] (60 cm) **sudah digunakan saat Stuffing** (bersamaan dengan jahit tutup lubang kapas). 

Stage "Closing" ini lebih ke:
- Final touch-up & inspection
- Pasang hang tag [ALB40011]
- Final QC inspection (stitching quality, weight, appearance)
- Cleaning & polishing

Jadi **tidak ada thread consumption lagi** di stage Closing untuk AFTONSPARV.

3. **System Action**:
   - Stok Stuffed Body (AFTONSPARV_WIP_BONEKA): -98 pcs
   - Stok Hang Tag [ALB40011]: -98 pcs
   - Finished Doll (AFTONSPARV_WIP_BONEKA_COMPLETE): +97 pcs (keluar dari Warehouse Finishing)
   - **ADA SURAT JALAN** (keluar ke Packing)
   - Generate surat jalan: SJ-FIN-PKG-20260130-001
   - Final QC sebelum transfer

4. **Quality Final Check**:
   - Closing stitch quality: rapi, tidak ada benang lepas
   - Hangtag position: correct, tidak miring
   - Cleaning result: bersih, tidak ada noda
   - Overall appearance: pass final inspection

**Transfer ke Packing**:
- Generate surat jalan: SJ-FIN-PKG-20260130-001
- Packing scan barcode surat jalan
- Confirm received: 96 pcs Finished Doll

**KPI**:
- Closing productivity (pcs per hour)
- Benang consumption accuracy
- Hangtag placement accuracy (target 100%)
- Final QC pass rate (target >95%)

---

### **Dashboard Warehouse Finishing - Real-time Monitoring**

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  WAREHOUSE FINISHING - LIVE DASHBOARD (AFTONSPARV)               â•‘
â•‘  Updated: 30-Jan-2026 10:15:00                                  â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                  â•‘
â•‘  ğŸ“¦ SKIN (from Sewing) - [AFTONSPARV_WIP_SKIN]                   â•‘
â•‘  â”œâ”€ Opening Stock Today: 500 pcs                                â•‘
â•‘  â”œâ”€ Received Today: 120 pcs (from Sewing Body)                  â•‘
â•‘  â”œâ”€ Used for Stuffing: -250 pcs                                 â•‘
â•‘  â””â”€ Current Stock: 370 pcs            [âš ï¸ Below Min: 400]       â•‘
â•‘     Action: Notify Sewing SPV to prioritize AFTONSPARV          â•‘
â•‘                                                                  â•‘
â•‘  ğŸ§¸ STUFFED BODY (ready for Closing) - [AFTONSPARV_WIP_BONEKA]  â•‘
â•‘  â”œâ”€ Opening Stock Today: 800 pcs                                â•‘
â•‘  â”œâ”€ Produced (Stuffing): +245 pcs (from 250 Skin, 98% yield)    â•‘
â•‘  â”œâ”€ Used for Closing: -97 pcs                                   â•‘
â•‘  â””â”€ Current Stock: 948 pcs                         [âœ… Normal]   â•‘
â•‘                                                                  â•‘
â•‘  ğŸ“Š Today's Performance (Target: 8 CTN = 480 pcs)                â•‘
â•‘  â”œâ”€ Skin â†’ Stuffed: 245/250 pcs (98.0%) - Good                  â•‘
â•‘  â”œâ”€ Stuffed â†’ Finished: 97/100 pcs (97.0%) - Excellent          â•‘
â•‘  â””â”€ Overall Efficiency: 97.5% (Target: 95%) âœ…                   â•‘
â•‘                                                                  â•‘
â•‘  ğŸ“ˆ Material Consumption Variance (vs BOM)                       â•‘
â•‘  â”œâ”€ [IKP20157] Filling: +2.0% (slightly over, within tolerance) â•‘
â•‘  â”œâ”€ [ATR20302] Thread Closing: +0.5% (efficient) âœ…              â•‘
â•‘  â””â”€ [ALB40011] Hang Tag: 100% (perfect match) âœ…                 â•‘
â•‘                                                                  â•‘
â•‘  ğŸš¨ Alerts                                                       â•‘
â•‘  â””â”€ Skin stock below minimum (370 < 400) â†’ Notify Sewing & PPIC â•‘
â•‘                                                                  â•‘
â•‘  ğŸ“‹ Next 2 Hours Forecast                                        â•‘
â•‘  â”œâ”€ Stuffing Plan: 150 pcs (if Skin arrives from Sewing)        â•‘
â•‘  â”œâ”€ Closing Plan: 200 pcs (utilize current Stuffed Body stock)  â•‘
â•‘  â””â”€ Expected Output: 347 pcs finished today (72% of daily goal) â•‘
â•‘                                                                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

**Alert Triggers** (dengan material code specific):
1. **Critical**: Skin < 200 pcs â†’ Block Stuffing, urgent alert
2. **Warning**: Skin < 400 pcs â†’ Notify SPV & PPIC
3. **Critical**: Stuffed Body < 100 pcs â†’ Block Closing
4. **Warning**: Stuffed Body < 300 pcs â†’ Notify SPV
5. **Info**: Daily target not met â†’ Report to Production Manager
6. **Material Variance**: [IKP20157] usage >10% â†’ Quality investigation
7. **Material Variance**: [ATR20302] usage >15% â†’ SPV approval required

---

### **STAGE 5: PACKING (KEMASAN)** ğŸš¨ UOM Critical

**Siapa**: Departemen Packing (5-8 Admin)  
**Input**: 
- Finished Doll (Boneka dari Warehouse Finishing)  
- Baju (dari Sewing Baju)
**Output**: Packed Product - **dalam CTN (CARTON)**

**ğŸ†• AFTONSPARV Unique**: Packing menggabungkan **2 WIP terpisah** (Boneka + Baju)!

#### ğŸš¨ UOM Conversion Challenge:
Admin packing input **8 CTN**, tapi system inventory harus record dalam **pieces**!

**Contoh Kasus Real**:
- Artikel: [40551542] AFTONSPARV
- Packing Standard: 60 pcs per CTN (conversion factor)
- Admin input: 8 CTN
- System harus calculate: 8 Ã— 60 = **480 pcs**

**Proses di ERP**:
1. **Terima 2 Stream WIP** (scan surat jalan)
   - **Stream 1**: [AFTONSPARV_WIP_BONEKA_COMPLETE] dari Warehouse Finishing
     - Surat Jalan: SJ-FIN-PKG-20260130-001
     - Quantity: 465 pcs Finished Doll
   - **Stream 2**: [AFTONSPARV_WIP_BAJU] dari Sewing Baju
     - Surat Jalan: SJ-SEW-PKG-20260130-001
     - Quantity: 470 pcs Clothing
   - **System Auto-Match**: Boneka = 465, Baju = 470 (5 baju excess)
   - **Decision**: Pack 465 sets (1:1 pairing), simpan 5 baju sebagai spare
   
2. **Proses Packing**:
   - **Match boneka + baju** (1:1 pairing): 465 sets
   - **Susun dalam master carton**:
     - [ACB30104] CARTON 570X375X450: 8 cartons
       - 7 CTN Ã— 60 pcs = 420 pcs
       - 1 CTN Ã— 45 pcs = 45 pcs (last carton partial)
       - Total: 465 pcs
   - **Stack di pallet**:
     - [ACB30121] PALLET 1140X750X50: 1 pcs (8 CTN Ã— 0.125)
     - [ACB30132] PAD 1140X750: 1 pcs (protective layer)
   - **Tempel sticker per carton**:
     - [ALS40012] STICKER MIA: 8 pcs (1 per carton)
   - **Generate barcode per carton**: FG-2026-00123-CTN001 to CTN008

3. **Generate Barcode FG** (per carton):
   ```
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ BARCODE GENERATION - CTN 001        â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ FG Code: FG-2026-00123-CTN001       â”‚
   â”‚ Artikel: [40551542] AFTONSPARV      â”‚
   â”‚ Week: W05-2026                      â”‚
   â”‚ Destination: WH-IKEA-SWEDEN         â”‚
   â”‚ Units/CTN: 60 pcs (standard)        â”‚
   â”‚ Carton: [ACB30104]                  â”‚
   â”‚ Weight: 4.2 kg (60 pcs Ã— 70g)       â”‚
   â”‚ Barcode: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ]             â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   ```
   - Print label via thermal printer
   - Tempel di setiap carton (8 labels total)
   - QR code contains: Article, MO, PO Label, Week, Qty

4. **Admin Input** (di SPK Packing):
   - Carton quantity: 8 CTN
   - System auto-show:
     ```
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ UOM CONVERSION CHECK                    â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚ Input: 8 CTN                            â”‚
     â”‚ Standard: 60 pcs/CTN                    â”‚
     â”‚ Expected: 8 Ã— 60 = 480 pcs              â”‚
     â”‚                                         â”‚
     â”‚ Cross-check dengan WIP Input:           â”‚
     â”‚ â€¢ Boneka dari Finishing: 465 pcs âœ…     â”‚
     â”‚ â€¢ Baju dari Sewing: 470 pcs âœ…          â”‚
     â”‚ â€¢ Matched pairs: 465 pcs âœ…             â”‚
     â”‚                                         â”‚
     â”‚ âš ï¸ Discrepancy Detected!                â”‚
     â”‚ â€¢ Expected: 480 pcs (8 Ã— 60)            â”‚
     â”‚ â€¢ Actual: 465 pcs (7.75 CTN)            â”‚
     â”‚ â€¢ Variance: -15 pcs (-3.1%)             â”‚
     â”‚                                         â”‚
     â”‚ Reason: Body reject 15 pcs at Sewing    â”‚
     â”‚                                         â”‚
     â”‚ Packing Configuration:                  â”‚
     â”‚ â€¢ CTN 001-007: 60 pcs each (420 pcs)    â”‚
     â”‚ â€¢ CTN 008: 45 pcs (partial) âš ï¸          â”‚
     â”‚                                         â”‚
     â”‚ [âœ“ CONFIRM ADJUSTED] [REPORT MANAGER]   â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     ```
   - System validate: 465 pcs valid (match dengan WIP input)
   - Trigger notification ke PPIC: Short 15 pcs dari target 480
     Variance: -4% (50 pcs short)
     
     âš ï¸ Note: Variance acceptable (<5%)
     Possible cause: Reject from final QC
     ```

5. **Validasi & Approval**:
   - Variance <5%: Auto-approved
   - Variance 5-15%: SPV approval needed
   - Variance >15%: Manager approval + investigation

6. **Handover ke Warehouse FG**:
   - Generate surat jalan ke gudang FG
   - Pallet barcode: PLT-FG-001-50BOX
   - Forklift transfer ke gudang

**KPI**:
- Packing speed (box per hour)
- Barcode accuracy (scan success rate >99.9%)
- Box stacking quality (damaged rate <0.1%)
- Label accuracy (position, readability)

---

### **STAGE 6: FINISHGOOD WAREHOUSE**

**Siapa**: Warehouse Staff (2-3 orang)  
**Input**: Boxed Product (from Packing)  
**Output**: Confirmed FG Inventory

**Proses di ERP**:
1. **Terima Pallet dari Packing**
   - Scan pallet barcode: PLT-FG-2026-00089
   - System load info:
     - Artikel: [40551542] AFTONSPARV
     - Week: W05-2026
     - Destination: WH-IKEA-SWEDEN
     - Expected carton: 8 CTN (7 full @ 60 pcs + 1 partial @ 45 pcs)
     - Expected units: 465 pcs (adjusted from 480 target)

2. **Android App - FG Receiving**:
   ```
   â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
   â•‘  ğŸ“± FG RECEIVING - SCAN CONFIRM       â•‘
   â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
   â•‘                                       â•‘
   â•‘  Pallet: PLT-FG-2026-00089            â•‘
   â•‘  Article: [40551542] AFTONSPARV       â•‘
   â•‘  soft toy w astronaut suit 28 bear    â•‘
   â•‘  Week: W05-2026                        â•‘
   â•‘  Expected: 8 CTN (465 pcs)            â•‘
   â•‘                                       â•‘
   â•‘  [SCAN CARTON BARCODES]                â•‘
   â•‘  CTN-001: âœ… 60 pcs (Full)             â•‘
   â•‘  CTN-002: âœ… 60 pcs (Full)             â•‘
   â•‘  CTN-003: âœ… 60 pcs (Full)             â•‘
   â•‘  CTN-004: âœ… 60 pcs (Full)             â•‘
   â•‘  CTN-005: âœ… 60 pcs (Full)             â•‘
   â•‘  CTN-006: âœ… 60 pcs (Full)             â•‘
   â•‘  CTN-007: âœ… 60 pcs (Full)             â•‘
   â•‘  CTN-008: âœ… 45 pcs (Partial) âš ï¸        â•‘
   â•‘                                       â•‘
   â•‘  Total Scanned: 8 CTN                 â•‘
   â•‘  Kalkulasi Sistem: 465 pcs            â•‘
   â•‘  Expected: 465 pcs                    â•‘
   â•‘                                       â•‘
   â•‘  âœ… Perfect Match! Ready to Confirm    â•‘
   â•‘                                       â•‘
   â•‘  [CONFIRM RECEIVING] [ADD STICKER ULL] â•‘
   â•‘  (âš ï¸ Step 2: Tambah 2 sticker ULL/FG)   â•‘
   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ```

3. **System Update** (saat confirm):
   ```sql
   BEGIN TRANSACTION;
   
   -- Update FG Inventory
   UPDATE inventory_fg 
   SET qty_pcs = qty_pcs + 465,
       qty_ctn_info = qty_ctn_info + 8
   WHERE artikel_code = '40551542';
   
   -- Update MO Status
   UPDATE manufacturing_order
   SET status = 'COMPLETED',
       actual_output = 465,
       target_output = 480,
       yield_percentage = 96.9,
       completion_date = NOW()
   WHERE mo_no = 'MO-2026-00089';
   
   -- Lock all SPK Daily Input
   UPDATE spk_daily_input
   SET is_locked = TRUE,
       locked_at = NOW(),
       locked_reason = 'MO Completed & FG Received'
   WHERE mo_no = 'MO-2026-00089';
   
   -- Record variance
   INSERT INTO production_variance (mo_no, variance_type, variance_qty, reason)
   VALUES ('MO-2026-00089', 'SHORTAGE', -15, 
           'Sewing Body reject 15 pcs - fabric defect batch #K7042');
   
   -- Send notification
   INSERT INTO notifications (to_users, message)
   VALUES ('PPIC,Sales,Purchasing', 
           'MO-2026-00089 COMPLETED: 465/480 pcs (96.9%) ready to ship. '
           'Shortage 15 pcs due to fabric defect - claim to supplier PT Kain Jaya');
   
   COMMIT;
   ```

4. **Storage Assignment**:
   - System suggest lokasi: RACK-A-12-03
   - Admin confirm placement
   - Inventory record updated dengan lokasi

**KPI**:
- Receiving time (pallet to confirm)
- Barcode scan accuracy
- Storage accuracy (item di lokasi yang benar)
- Inventory accuracy (physical vs system)

---

### **STAGE 7: SHIPPING**

**Siapa**: Logistik (2-3 orang)  
**Input**: FG dari warehouse  
**Output**: Shipped to customer

**Proses di ERP**:
1. **Receive Shipping Order** (dari Sales/PPIC):
   - Customer: IKEA Sweden
   - Article: [40551542] AFTONSPARV soft toy w astronaut suit 28 bear
   - Quantity: 465 pcs (8 CTN: 7Ã—60 + 1Ã—45)
   - Destination: IKEA Distribution Center Stockholm
   - PO Label: PO-LBL-2026-0456
   - Week Production: W05-2026
   - Deadline: 5-Feb-2026

2. **Pick from Warehouse**:
   - Scan pallet barcode untuk pick: PLT-FG-2026-00089
   - System confirm location: RACK-A-12-03
   - Forklift ambil pallet (8 cartons on 1 pallet)
   - Double-check: scan barcode lagi
   - Final check: Add [AUL20220] STICKER ULL: 16 pcs (2 per FG label)

3. **Generate Surat Jalan & Packing List**:
   ```
   SURAT JALAN: SJ-SHIP-2026-00145
   Date: 30-Jan-2026
   From: PT Quty Karunia Manufacturing
   To: IKEA Distribution Center Stockholm, Sweden
   
   Item:
   - Article Code: [40551542]
   - Description: AFTONSPARV soft toy w astronaut suit 28 bear
   - Quantity: 8 CTN (465 pcs total)
     â”œâ”€ CTN-001 to CTN-007: 60 pcs each (420 pcs)
     â””â”€ CTN-008: 45 pcs (partial)
   - Pallet: PLT-FG-2026-00089
   - Week Production: W05-2026 (29-Jan to 2-Feb 2026)
   - PO Label Reference: PO-LBL-2026-0456
   - Carton Spec: [ACB30104] CARTON 570X375X450
   - Weight: 33.6 kg gross (465 pcs Ã— ~70g + packaging)
   
   Quality Docs:
   - Certificate of Conformity: COC-2026-00089
   - EU Label Compliance: âœ… Verified
   - ULL Sticker: âœ… 16 pcs attached
   
   Transporter: DHL Express
   Container: CONT-DHL-20260130-001
   Resi: DHL-SE-123456789
   ETA: 5-Feb-2026 (6 days transit)
   ```

4. **Load to Container & Confirm Ship**:
   - Scan barcode saat loading container
   - Photo dokumentasi (untuk claim jika rusak)
   - System update:
     - Inventory FG: -465 pcs (artikel 40551542)
     - Status: SHIPPED
     - Tracking: Active (link DHL)
   - Customer notification email (otomatis):
     ```
     Subject: Shipment Notification - PO-LBL-2026-0456
     
     Dear IKEA Purchasing Team,
     
     Your order has been shipped:
     - Article: [40551542] AFTONSPARV
     - Quantity: 465 pcs (8 CTN)
     - Tracking: DHL-SE-123456789
     - ETA: 5-Feb-2026
     
     Packing list & COC attached.
     
     Note: Shipment 15 pcs short from PO (480 pcs) due to
     fabric defect during production. Credit note processed.
     
     Best regards,
     PT Quty Karunia Logistic Team
     ```

5. **Integration dengan EXIM** (jika export):
   - Auto-populate data ECIS
   - Custom documents
   - Export declaration

**KPI**:
- On-time delivery rate (target >95%)
- Shipping accuracy (correct item, correct qty)
- Documentation completeness
- Container utilization rate

---

### ğŸ“Š Key Metrics - End to End

| Metric | Target | Actual (Last Week) | Status |
|--------|--------|-------------------|--------|
| **Cycle Time** | 5-6 days | 5.2 days | âœ… On Target |
| **Material Utilization** | >98% | 99.1% | âœ… Excellent |
| **First Pass Yield** | >95% | 96.3% | âœ… Good |
| **On-Time Delivery** | >95% | 94.2% | âš ï¸ Need Improvement |
| **UOM Accuracy** | 100% | 99.8% | âœ… Good |
| **WH Finishing Efficiency** | >95% | 95.3% | âœ… On Target |
| **Barcode Scan Success** | >99.5% | 99.7% | âœ… Excellent |

---

### ğŸ¯ Critical Success Factors

1. **ğŸ†• Flexible Production Start**: MO dapat dibuat mode PARTIAL (PO Kain only) untuk early start Cutting & Embroidery (-3 to -5 days lead time), upgrade otomatis ke RELEASED saat PO Label ready
2. **Department Access Discipline**: Sewing onwards hanya dapat start setelah MO = RELEASED (butuh Label EU [ALL40030] & Hang Tag [ALB40011] available)
3. **UOM Conversion Accuracy**: Zero tolerance untuk error konversi (Cutting & FG Receiving adalah titik kritis)
4. **Warehouse Finishing Control**: Dual inventory tracking harus akurat (Skin vs Stuffed Body stock)
5. **Daily Input Compliance**: Admin wajib input sebelum shift selesai
6. **QC Checkpoint**: Tidak boleh ada transfer WIP tanpa QC approval
7. **Barcode Scanning**: 100% material movement pakai barcode

---

## <a name="modul-sistem"></a>ğŸ—‚ï¸ 5. MODUL-MODUL SISTEM

### A. **Modul PPIC (Production Planning)**
**User**: PPIC Staff, Manager PPIC

**Fitur**:
- Buat Manufacturing Order (MO) dengan **2 mode**:
  - **MODE PARTIAL**: PO Kain ready â†’ Cutting & Embroidery dapat start (early start)
  - **MODE RELEASED**: PO Label ready â†’ Semua departemen dapat start (full production)
- Alokasi material otomatis dari BOM Manufacturing
- Dashboard: lihat semua SPK (all departments) dengan color-coding MO status
- Laporan produksi harian
- Alert keterlambatan & alert MO status PARTIAL (reminder: "PO Label still pending - expedite to unlock Sewing/Finishing/Packing")
- View-only untuk semua approval
- MO status tracking: DRAFT â†’ PARTIAL â†’ RELEASED â†’ IN-PROGRESS â†’ COMPLETED
- Visual indicator: ğŸŸ¡ PARTIAL (Cutting/Embroidery active), ğŸŸ¢ RELEASED (All departments active)

**Akses**:
- Web Portal (desktop/laptop)
- Dashboard view-only di mobile

**ğŸ†• Validation Rules**:
- SPK Cutting/Embroidery: Dapat dibuat jika MO Status >= PARTIAL
- SPK Sewing/Finishing/Packing: Hanya dapat dibuat jika MO Status >= RELEASED
- System auto-upgrade MO PARTIAL â†’ RELEASED saat PO Label approved

---

### B. **Modul Production**
**User**: Admin Produksi, SPV, Admin (semua departemen)

**Fitur**:
- Buat SPK per departemen dengan **MO Status validation**:
  - âœ… Cutting/Embroidery: Dapat dibuat jika MO >= PARTIAL
  - âš ï¸ Sewing/Finishing/Packing: Hanya jika MO >= RELEASED
- Input produksi harian (calendar grid)
- Edit SPK (dengan approval workflow)
- Material request (jika stock kurang)
- QC inline input (reject, alasan)
- Handover antar departemen (QT-09)
- **Visual blocker**: Error message jika coba buat SPK Sewing dengan MO PARTIAL

**Akses**:
- Web Portal (untuk admin/SPV)
- Mobile App (untuk Admin)
- Big Button Mode (untuk area produksi)

---

### C. **Modul Warehouse**
**User**: Warehouse Staff, SPV Warehouse

**Fitur**:
- Stock management (material + finishgood)
- Material issue (keluarkan material untuk SPK)
- Material receipt (terima material dari purchasing)
- FinishGood receive (dari packing)
- Barcode scanning (Android app)
- Stock opname (cycle count)
- Adjustment stock

**Akses**:
- Web Portal + Android App

---

### D. **Modul Purchasing**
**User**: Purchasing Staff (3 Specialists: Fabric, Label, Accessories)

**Fitur**:
- Buat Purchase Order (PO) dengan **3 kategori khusus**:
  - **PO Kain/Fabric** (ğŸ”‘ TRIGGER 1): Dibuat oleh Purchasing A â†’ Unlock Cutting/Embroidery (MO PARTIAL)
  - **PO Label** (ğŸ”‘ TRIGGER 2): Dibuat oleh Purchasing B â†’ Unlock Sewing/Finishing/Packing (MO RELEASED)
  - **PO Accessories**: Dibuat oleh Purchasing C â†’ Supporting materials (benang, kapas, carton, pallet, dll)
- BOM Purchasing (bisa beda dengan BOM Manufacturing)
- Vendor management
- Material request dari PPIC/Produksi
- PO tracking (status: draft, sent, partial, completed)
- Material receipt confirmation
- **Auto-notification ke PPIC**: Saat PO Label approved â†’ trigger MO upgrade
- **Approval**: Langsung ke Director (tidak ada manager layer)

**Akses**:
- Web Portal

---

### E. **Modul Quality Control (QC)**
**User**: QC Staff, QC Manager

**Fitur**:
- Inspection plan per artikel
- QC check di setiap stage
- Reject/rework management
- Defect reporting
- QC dashboard (reject rate per departemen)
- Final inspection sebelum packing

**Akses**:
- Web Portal + Mobile App

---

### F. **Modul Reports & Analytics**
**User**: Manager, Director, PPIC

**Fitur**:
- Production efficiency report
- **ğŸ†• Lead time analysis**: PARTIAL vs RELEASED mode comparison
- Material utilization report
- On-time delivery rate
- Reject rate analysis
- Cost analysis (material vs target)
- **ğŸ†• MO status aging report**: Berapa lama MO stuck di PARTIAL mode
- Custom reports (export ke Excel)
- **ğŸ†• PO Label bottleneck analysis**: Identify delay patterns

**Akses**:
- Web Portal (desktop)

---

### G. **Modul User Management & Security**
**User**: IT Admin, HR

**Fitur**:
- Buat user baru
- Assign role (22 roles tersedia)
- Permission management (PBAC - Permission-Based Access Control)
- Audit trail (siapa akses apa, kapan)
- Password policy
- 2FA (Two-Factor Authentication) untuk role kritikal

**Akses**:
- Web Portal (admin only)

---

## <a name="teknologi"></a>ğŸ’» 6. TEKNOLOGI YANG DIGUNAKAN

### A. **Backend (Sistem Belakang)**
```
ğŸ Python 3.11+ (FastAPI Framework)
â”œâ”€ FastAPI: API REST untuk komunikasi frontend-backend
â”œâ”€ PostgreSQL: Database utama (27+ tabel)
â”œâ”€ Redis: Cache & Message Broker
â”œâ”€ JWT: Token untuk keamanan login
â”œâ”€ Pydantic: Validasi data otomatis
â”œâ”€ SQLAlchemy 2.0 (Async): ORM modern
â”œâ”€ Alembic: Database migration & versioning
â””â”€ Celery / ARQ: Asynchronous Task Queue Worker ğŸ†•

ğŸ”„ Async Processing (Background Tasks):
â”œâ”€ Celery Worker (alternatif: ARQ)
â”œâ”€ Redis sebagai Message Broker
â”œâ”€ Tugas Berat yang Di-offload:
â”‚  â”œâ”€ Generate Laporan PDF (Produksi Bulanan)
â”‚  â”œâ”€ Re-kalkulasi HPP (Cost Analysis)
â”‚  â”œâ”€ Email/SMS Notification (Approval, Alert)
â”‚  â”œâ”€ Export Excel (Material Usage Report)
â”‚  â””â”€ Backup Database (Daily at 03:00 AM)
â””â”€ Benefit: FastAPI main thread tidak hang, response tetap cepat

ğŸ”’ Keamanan:
â”œâ”€ PBAC (Permission-Based Access Control) - 22 roles
â”œâ”€ Audit Trail (siapa akses apa, kapan)
â”œâ”€ Password hashing (Argon2)
â””â”€ HTTPS (enkripsi data)
```

**Alasan Pilih Python**:
- Mudah dipelajari (untuk maintenance tim lokal)
- Banyak library (untuk AI/ML di masa depan)
- Cepat develop (hemat waktu & biaya)

**ğŸ†• Mengapa Async Processing Penting?**:
- **Masalah Tanpa Worker**: Generate PDF laporan 50 halaman bisa butuh 10-15 detik. Jika dilakukan di main thread FastAPI, user yang request akan wait 15 detik (bad UX), dan request lain yang masuk akan queue (server terlihat hang).
- **Solusi dengan Celery/ARQ**: Request generate PDF langsung return "Task submitted, please wait..." (200ms), kemudian worker proses di background. User bisa lihat progres bar dan notifikasi saat selesai.

---

### B. **Frontend (Tampilan Web)**
```
âš›ï¸ React 18 + TypeScript
â”œâ”€ Vite: Build tool modern (cepat)
â”œâ”€ TailwindCSS: Styling yang cepat & konsisten
â”œâ”€ Zustand: State management (simpel)
â”œâ”€ Axios: HTTP client untuk API
â””â”€ React Query: Cache & sync data otomatis

ğŸ“± Responsive Design:
â”œâ”€ Desktop (manager/admin)
â”œâ”€ Tablet (SPV di area produksi)
â””â”€ Mobile browser (view-only untuk field staff)
```

**Alasan Pilih React**:
- Modern & populer (mudah cari developer)
- Fast & responsive
- Component reusable (hemat development)

---

### C. **Mobile App (Android)**
```
ğŸ¤– Native Kotlin (Android)
â”œâ”€ Min API 25 (Android 7.1.2+)
â”œâ”€ ML Kit Vision: Barcode scanning (Google)
â”œâ”€ Room Database: Offline storage
â”œâ”€ WorkManager: Background sync otomatis
â”œâ”€ Jetpack Compose: UI modern
â”œâ”€ Retrofit: HTTP client untuk API
â””â”€ App Updater Module: Cek versi ke server & download APK update otomatis

ğŸ“¡ Offline Mode:
â”œâ”€ Data scan disimpan di HP
â”œâ”€ Auto sync saat internet nyala
â””â”€ Conflict resolution otomatis
```

**Alasan Pilih Native Kotlin**:
- Performance terbaik (dibanding React Native)
- Barcode scanning akurat (ML Kit terintegrasi)
- Offline mode solid (untuk area produksi tanpa WiFi)

---

### D. **Database Structure**
```
ğŸ“Š PostgreSQL 14+ (27+ Tables)

Core Tables:
â”œâ”€ users (22 roles)
â”œâ”€ manufacturing_orders (MO)
â”œâ”€ spk (Surat Perintah Kerja)
â”œâ”€ bom_manufacturing (BOM Produksi)
â”œâ”€ bom_purchasing (BOM Pembelian)
â”œâ”€ materials (Master Material)
â”œâ”€ material_transactions (Keluar-masuk material)
â”œâ”€ material_debt (Inventaris Negatif)
â”œâ”€ daily_production_input (Input harian per SPK)
â”œâ”€ finishgood (Barang Jadi)
â”œâ”€ finishgood_transactions (Barcode scan records)
â”œâ”€ approval_workflows (Multi-level approval)
â”œâ”€ audit_trail (Log semua aktivitas)
â””â”€ ... (14+ tabel lainnya)

Performance:
â”œâ”€ Indexing: 30+ indexes untuk query cepat
â”œâ”€ Materialized Views: Dashboard PPIC (refresh tiap 5 menit)
â”œâ”€ Partitioning: Tabel besar dipartisi per bulan
â””â”€ ğŸ†• Timezone Strategy: UTC di database, WIB di display layer

ğŸŒ Timezone Configuration (Critical for Audit):
â”œâ”€ PostgreSQL: SET timezone = 'UTC'
â”œâ”€ Backend API: Simpan semua timestamp di UTC
â”œâ”€ Frontend Display: Convert UTC â†’ WIB (UTC+7) saat render
â””â”€ Benefit: Audit trail akurat, tidak bingung saat daylight saving

ğŸ”„ Database Migration & Versioning:
â”œâ”€ Tool: Alembic (integrated dengan SQLAlchemy)
â”œâ”€ Version Control: Migration files di Git
â”œâ”€ Auto-generate: Alembic detect schema changes
â”œâ”€ Rollback Support: Downgrade jika migration error
â””â”€ Production Flow:
   1. Developer buat migration (local)
   2. Test di staging environment
   3. Review migration SQL (manual check)
   4. Deploy ke production (kubectl apply / docker-compose up)
   5. Alembic auto-run pending migrations

Contoh Migration File:
```python
"""add_mo_status_partial_mode

Revision ID: a1b2c3d4
Create Date: 2026-01-25 14:30:00
"""
from alembic import op
import sqlalchemy as sa

def upgrade():
    # Add new column 'mo_status' with default 'DRAFT'
    op.add_column('manufacturing_orders', 
                  sa.Column('mo_status', sa.String(20), 
                           server_default='DRAFT'))
    # Add check constraint
    op.create_check_constraint(
        'ck_mo_status_valid',
        'manufacturing_orders',
        "mo_status IN ('DRAFT', 'PARTIAL', 'RELEASED')"
    )

def downgrade():
    # Rollback: remove column
    op.drop_constraint('ck_mo_status_valid', 'manufacturing_orders')
    op.drop_column('manufacturing_orders', 'mo_status')
```
```

---

### E. **Document & Label Generation** ğŸ†•

#### **PDF Generation untuk Dokumen Manufaktur**

**Library**: WeasyPrint (HTML to PDF) + Jinja2 Templates

**Dokumen yang Di-generate**:
```
ğŸ“„ Production Documents:
â”œâ”€ SPK (Surat Perintah Kerja)
â”‚  â”œâ”€ Header: No SPK, Artikel, Target Qty
â”‚  â”œâ”€ BOM Material List (tabel)
â”‚  â”œâ”€ QR Code untuk tracking
â”‚  â””â”€ Signature area (SPV, Manager)
â”‚
â”œâ”€ Surat Jalan (Delivery Note)
â”‚  â”œâ”€ From Department â†’ To Department
â”‚  â”œâ”€ Material/WIP details
â”‚  â”œâ”€ Barcode untuk scan
â”‚  â””â”€ Received by (signature area)
â”‚
â”œâ”€ Laporan Produksi Bulanan (Monthly Report)
â”‚  â”œâ”€ Executive Summary (1 page)
â”‚  â”œâ”€ Production Chart (efficiency, yield)
â”‚  â”œâ”€ Material Usage Detail (20+ pages)
â”‚  â””â”€ Reject Analysis (by department)
â”‚
â””â”€ Invoice/Purchase Order
   â”œâ”€ Vendor details
   â”œâ”€ Material list dengan harga
   â”œâ”€ Total calculation
   â””â”€ Terms & conditions
```

**Mengapa WeasyPrint?**
- **Pro**: HTML/CSS familiar (designer web bisa buat template), support Unicode (Bahasa Indonesia + simbol), rendering cepat (~1-2 detik per halaman)
- **Cons**: Tidak bisa edit PDF hasil (read-only), butuh Linux fonts untuk production
- **Alternatif**: ReportLab (lebih low-level, Python code untuk layout, lebih cepat tapi susah maintain)

**Contoh Template SPK** (Jinja2 + HTML):
```html
<!DOCTYPE html>
<html>
<head>
  <style>
    @page { size: A4; margin: 2cm; }
    .header { text-align: center; font-size: 18pt; }
    .material-table { width: 100%; border-collapse: collapse; }
    .material-table th, td { border: 1px solid #000; padding: 5px; }
  </style>
</head>
<body>
  <div class="header">
    <h1>SURAT PERINTAH KERJA</h1>
    <p>PT QUTY KARUNIA - Soft Toy Manufacturing</p>
  </div>
  
  <table>
    <tr><td>No SPK:</td><td>{{ spk.no_spk }}</td></tr>
    <tr><td>Artikel:</td><td>{{ spk.artikel_code }} - {{ spk.artikel_name }}</td></tr>
    <tr><td>Target:</td><td>{{ spk.target_qty }} {{ spk.uom }}</td></tr>
    <tr><td>Deadline:</td><td>{{ spk.deadline | date_format }}</td></tr>
  </table>
  
  <h3>Material Requirement:</h3>
  <table class="material-table">
    <thead>
      <tr>
        <th>No</th><th>Material Code</th><th>Material Name</th>
        <th>Qty</th><th>UOM</th><th>Status</th>
      </tr>
    </thead>
    <tbody>
      {% for mat in materials %}
      <tr>
        <td>{{ loop.index }}</td>
        <td>{{ mat.code }}</td>
        <td>{{ mat.name }}</td>
        <td>{{ mat.qty | number_format }}</td>
        <td>{{ mat.uom }}</td>
        <td>{{ mat.stock_status }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  
  <div style="margin-top: 50px;">
    <img src="data:image/png;base64,{{ qr_code_base64 }}" />
    <p>Scan QR untuk tracking progres</p>
  </div>
  
  <div class="signature" style="margin-top: 100px;">
    <table style="width: 100%;">
      <tr>
        <td style="width: 33%;">Dibuat Oleh:<br><br><br>_____________<br>Admin PPIC</td>
        <td style="width: 33%;">Disetujui Oleh:<br><br><br>_____________<br>SPV {{ dept }}</td>
        <td style="width: 33%;">Diketahui Oleh:<br><br><br>_____________<br>Manager</td>
      </tr>
    </table>
  </div>
</body>
</html>
```

**Backend API untuk Generate PDF**:
```python
# File: app/services/pdf_service.py
from weasyprint import HTML
from jinja2 import Environment, FileSystemLoader
import qrcode
import io
import base64

class PDFService:
    def __init__(self):
        self.jinja_env = Environment(
            loader=FileSystemLoader('app/templates/pdf')
        )
    
    async def generate_spk_pdf(self, spk_id: int) -> bytes:
        # Fetch SPK data from database
        spk = await get_spk_detail(spk_id)
        materials = await get_spk_materials(spk_id)
        
        # Generate QR code
        qr = qrcode.make(f"SPK-{spk.no_spk}")
        buffer = io.BytesIO()
        qr.save(buffer, format='PNG')
        qr_base64 = base64.b64encode(buffer.getvalue()).decode()
        
        # Render template
        template = self.jinja_env.get_template('spk_template.html')
        html_content = template.render(
            spk=spk,
            materials=materials,
            qr_code_base64=qr_base64
        )
        
        # Convert HTML to PDF (offload ke Celery worker!)
        pdf_bytes = HTML(string=html_content).write_pdf()
        return pdf_bytes

# File: app/api/endpoints/spk.py
from app.services.pdf_service import PDFService
from app.tasks.celery_tasks import generate_pdf_task
from fastapi import BackgroundTasks
from fastapi.responses import FileResponse

@router.get("/spk/{spk_id}/pdf")
async def download_spk_pdf(
    spk_id: int,
    background_tasks: BackgroundTasks,
    current_user: User = Depends(get_current_user)
):
    # Option 1: Generate sync (untuk dokumen kecil <5 pages)
    # pdf_service = PDFService()
    # pdf_bytes = await pdf_service.generate_spk_pdf(spk_id)
    # return Response(content=pdf_bytes, media_type="application/pdf")
    
    # Option 2: Generate async via Celery (untuk laporan besar >10 pages)
    task = generate_pdf_task.delay(spk_id, 'spk')  # Offload ke worker
    return {
        "message": "PDF generation started",
        "task_id": task.id,
        "status_url": f"/api/tasks/{task.id}/status"
    }
    # Frontend poll /api/tasks/{task_id}/status setiap 2 detik
    # Ketika status = 'SUCCESS', download PDF dari /api/tasks/{task_id}/result
```

#### **Label Barcode Printing** ğŸ·ï¸

**Use Case**:
- Label material (saat receiving dari vendor)
- Label WIP (saat transfer antar departemen)
- Label Finished Good (saat packing)

**Printer Type**:
- **Thermal Printer** (Zebra ZD420, TSC TTP-244 Pro)
- Protokol: ZPL (Zebra) atau TSPL (TSC)
- Koneksi: USB, Ethernet, atau WiFi

**Raw Printing** (Direct Socket untuk printer network):
```python
# File: app/services/label_printer.py
import socket
import barcode
from barcode.writer import ImageWriter
import io

class LabelPrinterService:
    def __init__(self, printer_ip: str, port: int = 9100):
        self.printer_ip = printer_ip
        self.port = port
    
    def print_material_label(self, material_code: str, qty: float, uom: str):
        """
        Print label untuk material receiving
        Format: Barcode + Material Info
        """
        # Generate ZPL command (Zebra Printer Language)
        zpl_template = f"""
        ^XA
        ^FO50,50^BY2^BCN,100,Y,N,N
        ^FD{material_code}^FS
        ^FO50,180^A0N,30,30^FDMaterial: {material_code}^FS
        ^FO50,220^A0N,25,25^FDQty: {qty} {uom}^FS
        ^FO50,260^A0N,20,20^FDDate: {{date}}^FS
        ^XZ
        """
        
        # Send ke printer via socket
        try:
            sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
            sock.connect((self.printer_ip, self.port))
            sock.send(zpl_template.encode('utf-8'))
            sock.close()
            return {"success": True, "message": "Label printed"}
        except Exception as e:
            return {"success": False, "error": str(e)}
    
    def print_finishgood_label(self, fg_code: str, week: str, 
                                destination: str, carton_no: int, 
                                total_cartons: int):
        """
        Print label untuk carton Finished Good
        Include: Article Code, Week, Destination, Carton X of Y
        """
        zpl_template = f"""
        ^XA
        ^FO50,30^A0N,40,40^FDPT QUTY KARUNIA^FS
        ^FO50,80^BY3^BCN,120,Y,N,N
        ^FD{fg_code}^FS
        ^FO50,220^A0N,35,35^FDArticle: {fg_code}^FS
        ^FO50,270^A0N,30,30^FDWeek: {week}^FS
        ^FO50,310^A0N,30,30^FDDest: {destination}^FS
        ^FO50,350^A0N,25,25^FDCarton {carton_no} of {total_cartons}^FS
        ^XZ
        """
        # ... (sama seperti di atas, send via socket)

# API Endpoint
@router.post("/labels/print-material")
async def print_material_label(
    material_code: str,
    qty: float,
    uom: str,
    current_user: User = Depends(get_current_user)
):
    printer = LabelPrinterService(printer_ip="192.168.1.100")
    result = printer.print_material_label(material_code, qty, uom)
    return result
```

**Alternatif** (jika tidak ada thermal printer):
- Generate PDF label (4 label per A4 sheet)
- Print dengan printer kantor biasa
- Gunting manual dan tempel

---

### F. **Infrastructure (Production)**
```
ğŸ³ Docker Containers
â”œâ”€ Backend Container (Python FastAPI)
â”œâ”€ Frontend Container (React build)
â”œâ”€ Database Container (PostgreSQL)
â”œâ”€ Redis Container (Cache)
â””â”€ Nginx Container (Reverse Proxy)

â˜ï¸ Server Specs (Rekomendasi):
â”œâ”€ CPU: 4 cores (Intel Xeon / AMD EPYC)
â”œâ”€ RAM: 16 GB
â”œâ”€ Storage: 500 GB SSD
â”œâ”€ Network: 100 Mbps (dedicated line)
â””â”€ OS: Ubuntu 22.04 LTS

ğŸ”§ Monitoring:
â”œâ”€ Prometheus: Metrics collection
â”œâ”€ Grafana: Dashboard monitoring
â”œâ”€ Alertmanager: Alert jika server down
â””â”€ Backup otomatis tiap hari (03:00 AM)

ğŸ—„ï¸ Backup Strategy (3-2-1 Rule): ğŸ†• ENHANCED
â”œâ”€ Tier 1 - Local Same Server:
â”‚  â”œâ”€ PostgreSQL dump (.sql) ke /backups/
â”‚  â”œâ”€ Docker volumes snapshot (bila perlu restore cepat)
â”‚  â”œâ”€ Schedule: Daily 03:00 AM (Celery Periodic Task)
â”‚  â””â”€ âš ï¸ Risk: Jika HDD server jebol, data hilang!
â”‚
â”œâ”€ Tier 2 - Off-site Local (Network Storage): ğŸ†•
â”‚  â”œâ”€ Rsync backup files ke NAS (Network Attached Storage)
â”‚  â”œâ”€ Location: Ruangan berbeda / Gedung berbeda (jika ada)
â”‚  â”œâ”€ Protocol: NFS mount atau SMB/CIFS
â”‚  â”œâ”€ Retention: 30 hari (auto-delete old backups)
â”‚  â”œâ”€ Estimated Cost: NAS 4TB + Raid 1 = Rp 8-12 juta (one-time)
â”‚  â””â”€ Benefit: Aman dari kerusakan server, tapi tetap on-premise
â”‚  
â”‚  Script Example:
â”‚  ```bash
â”‚  # /scripts/backup-to-nas.sh
â”‚  #!/bin/bash
â”‚  BACKUP_FILE="/backups/erp_$(date +%Y%m%d_%H%M%S).sql"
â”‚  NAS_PATH="/mnt/nas-backup/erp/"
â”‚  
â”‚  # Dump database
â”‚  docker exec erp-postgres pg_dump -U erp_user erp_db > $BACKUP_FILE
â”‚  
â”‚  # Compress (gzip reduce size ~70%)
â”‚  gzip $BACKUP_FILE
â”‚  
â”‚  # Rsync to NAS
â”‚  rsync -avz $BACKUP_FILE.gz $NAS_PATH
â”‚  
â”‚  # Delete local file older than 7 days
â”‚  find /backups/ -name "*.sql.gz" -mtime +7 -delete
â”‚  
â”‚  # Delete NAS file older than 30 days
â”‚  find $NAS_PATH -name "*.sql.gz" -mtime +30 -delete
â”‚  ```
â”‚
â””â”€ Tier 3 - Cloud Backup (Disaster Recovery): ğŸ†•
   â”œâ”€ Upload encrypted backup ke cloud storage
   â”œâ”€ Options:
   â”‚  â”œâ”€ AWS S3 Glacier Deep Archive: $1/TB/month (cheapest, slow restore)
   â”‚  â”œâ”€ Google Cloud Storage (Coldline): $4/TB/month (balance)
   â”‚  â””â”€ Backblaze B2: $5/TB/month (no egress fee, good for restore)
   â”‚
   â”œâ”€ Encryption: GPG/AES-256 sebelum upload
   â”œâ”€ Retention: 90 hari (compliance requirement)
   â”œâ”€ Schedule: Weekly (tiap Minggu 04:00 AM)
   â”œâ”€ Estimated Cost: ~100 GB backup Ã— $1/month = $1-2/month (~Rp 30k/bulan)
   â””â”€ Use Case: Disaster recovery (kebakaran, banjir, ransomware)
   
   Script Example (with Rclone):
   ```bash
   # /scripts/backup-to-cloud.sh
   #!/bin/bash
   BACKUP_FILE="/backups/erp_weekly_$(date +%Y%m%d).sql.gz"
   ENCRYPTED_FILE="$BACKUP_FILE.gpg"
   
   # Encrypt backup (GPG passphrase di environment var)
   gpg --batch --yes --passphrase "$GPG_PASSPHRASE" \
       -c $BACKUP_FILE -o $ENCRYPTED_FILE
   
   # Upload ke AWS S3 via rclone
   rclone copy $ENCRYPTED_FILE aws-s3:quty-erp-backup/weekly/
   
   # Cleanup
   rm $ENCRYPTED_FILE
   
   # Alert jika gagal
   if [ $? -ne 0 ]; then
     curl -X POST "https://api.telegram.org/botXXX/sendMessage" \
          -d "chat_id=123456&text=Cloud backup FAILED!"
   fi
   ```

ğŸš¨ Why Off-site Backup Critical?
â”œâ”€ Real Risk di Indonesia:
â”‚  â”œâ”€ Kebakaran: Server room terbakar â†’ data lokal hilang 100%
â”‚  â”œâ”€ Banjir: Jakarta/Semarang rawan banjir â†’ server terendam
â”‚  â”œâ”€ Ransomware: Hacker encrypt semua data â†’ minta tebusan Bitcoin
â”‚  â””â”€ Hardware Failure: HDD/SSD tiba-tiba mati (lifetime ~5 tahun)
â”‚
â”œâ”€ Without Off-site:
â”‚  â””â”€ Jika server + NAS di ruangan sama terbakar â†’ SEMUA DATA HILANG!
â”‚     (Bisnis bisa collapse, 3-6 bulan data produksi hilang)
â”‚
â””â”€ With Cloud Backup (Tier 3):
   â””â”€ Worst case: Restore dari cloud (butuh 2-3 jam download)
      Bisnis bisa recover dalam 1 hari, tidak kehilangan data.

ğŸ“Š Restore Time Objective (RTO):
â”œâ”€ Tier 1 (local): 15 menit (restore dari /backups/)
â”œâ”€ Tier 2 (NAS): 30-60 menit (rsync dari NAS)
â””â”€ Tier 3 (cloud): 2-4 jam (download + decrypt + restore)
```

---

### G. **Deployment & Update Strategy** ğŸ†•

#### **Strategi Deployment Lokal** (On-Premise Server)

**Challenge**:
- Tidak bisa pakai cloud auto-update (Play Store, AWS CodeDeploy)
- Manual deployment ke server lokal
- APK Android harus distribute manual ke HP karyawan

**Solution - 3 Stage Deployment**:

```
ğŸ”„ Backend/Frontend Update:
â”œâ”€ Development (Local)
â”‚  â”œâ”€ Developer code di laptop
â”‚  â”œâ”€ Test di local Docker
â”‚  â””â”€ Push ke Git repository
â”‚
â”œâ”€ Staging (Test Server)
â”‚  â”œâ”€ Git pull latest code
â”‚  â”œâ”€ Run migration: alembic upgrade head
â”‚  â”œâ”€ Docker Compose rebuild:
â”‚  â”‚  docker-compose -f docker-compose.staging.yml up -d --build
â”‚  â”œâ”€ Test by QA team (1-2 hari)
â”‚  â””â”€ If OK â†’ promote to production
â”‚
â””â”€ Production (Main Server)
   â”œâ”€ Scheduled maintenance (Sabtu 22:00-23:00)
   â”œâ”€ Announce to users (email/WA group)
   â”œâ”€ Backup database before update (safety)
   â”œâ”€ Git pull production branch
   â”œâ”€ Run migration: alembic upgrade head
   â”œâ”€ Docker Compose rebuild:
   â”‚  docker-compose -f docker-compose.production.yml up -d --build
   â”œâ”€ Smoke test (check critical APIs)
   â””â”€ Monitor logs for 30 minutes

ğŸš¨ Rollback Plan (jika error):
   1. Stop containers: docker-compose down
   2. Restore database: psql < backup_pre_update.sql
   3. Git checkout previous version
   4. Docker Compose up old version
   5. Notify team & investigate issue
```

#### **APK Distribution & Auto-Update** ğŸ¤– ğŸ†•

**Problem**:
- Android APK tidak bisa auto-update via Play Store (karena internal only)
- Manual download & install repot (50+ karyawan)
- Susah track versi APK di setiap HP

**Solution - Built-in Update Checker**:

**Backend API** (`/api/mobile/check-update`):
```python
# File: app/api/endpoints/mobile.py
from fastapi import APIRouter
from pydantic import BaseModel

router = APIRouter()

class AppVersion(BaseModel):
    version_code: int  # Integer: 1, 2, 3, ... (increment setiap release)
    version_name: str  # String: "1.0.0", "1.1.0", "2.0.0"
    apk_url: str       # URL download APK
    release_notes: str # Changelog
    force_update: bool # True = wajib update, False = opsional
    min_supported_version: int  # Version code minimal yang masih didukung

@router.get("/check-update")
async def check_app_update(
    current_version: int,  # dari query param
    platform: str = "android"  # untuk future support iOS
) -> dict:
    """
    Endpoint untuk cek versi terbaru APK.
    Dipanggil saat app startup atau manual refresh.
    """
    # Hardcode atau simpan di database tabel 'app_versions'
    LATEST_VERSION = AppVersion(
        version_code=5,
        version_name="1.2.0",
        apk_url="http://192.168.1.10:8000/static/apk/erp-quty-v1.2.0.apk",
        release_notes="""ğŸ†• New Features:
        - Dual MO Mode (PARTIAL/RELEASED)
        - Warehouse Finishing 2-stage
        - Performance improvements
        
        ğŸ› Bug Fixes:
        - Fix barcode scanner crash on low light
        - Fix material debt calculation
        """,
        force_update=False,  # Set True jika breaking changes
        min_supported_version=3  # Versi 1, 2 tidak support lagi
    )
    
    if current_version < LATEST_VERSION.min_supported_version:
        return {
            "update_available": True,
            "force_update": True,  # Paksa update (API tidak support versi lama)
            "latest_version": LATEST_VERSION.dict(),
            "message": "âš ï¸ Your app version is too old. Please update immediately."
        }
    
    if current_version < LATEST_VERSION.version_code:
        return {
            "update_available": True,
            "force_update": LATEST_VERSION.force_update,
            "latest_version": LATEST_VERSION.dict(),
            "message": "ğŸ†• New version available. Update now!"
        }
    
    return {
        "update_available": False,
        "message": "âœ… You are using the latest version."
    }

@router.get("/download-apk/{version}")
async def download_apk(version: str):
    """
    Serve APK file untuk download.
    Alternative: gunakan Nginx static file serving.
    """
    apk_path = f"/var/www/apk/erp-quty-{version}.apk"
    return FileResponse(
        apk_path,
        media_type="application/vnd.android.package-archive",
        filename=f"erp-quty-{version}.apk"
    )
```

**Android App - Update Checker** (Kotlin):
```kotlin
// File: app/src/main/kotlin/com/qutykarunia/erp/UpdateChecker.kt
class UpdateChecker(private val context: Context) {
    private val apiClient = ApiClient.getInstance()
    
    suspend fun checkForUpdates(): UpdateInfo? {
        val currentVersion = BuildConfig.VERSION_CODE  // dari build.gradle
        
        try {
            val response = apiClient.checkAppUpdate(currentVersion)
            
            if (response.update_available) {
                return UpdateInfo(
                    versionName = response.latest_version.version_name,
                    versionCode = response.latest_version.version_code,
                    downloadUrl = response.latest_version.apk_url,
                    releaseNotes = response.latest_version.release_notes,
                    forceUpdate = response.force_update
                )
            }
        } catch (e: Exception) {
            Log.e("UpdateChecker", "Failed to check update: ${e.message}")
        }
        
        return null  // No update available or error
    }
    
    fun showUpdateDialog(updateInfo: UpdateInfo, onConfirm: () -> Unit) {
        val dialog = AlertDialog.Builder(context)
            .setTitle("ğŸ†• Update Tersedia")
            .setMessage("""
                Versi terbaru: ${updateInfo.versionName}
                
                ${updateInfo.releaseNotes}
                
                ${if (updateInfo.forceUpdate) 
                    "âš ï¸ Update wajib dilakukan untuk melanjutkan." 
                  else 
                    "Update sekarang untuk fitur terbaru."}
            """.trimIndent())
            .setPositiveButton("Update Sekarang") { _, _ ->
                downloadAndInstallApk(updateInfo.downloadUrl)
            }
        
        // Jika force_update = true, dialog tidak bisa di-dismiss
        if (!updateInfo.forceUpdate) {
            dialog.setNegativeButton("Nanti Saja", null)
        } else {
            dialog.setCancelable(false)
        }
        
        dialog.show()
    }
    
    private fun downloadAndInstallApk(url: String) {
        val request = DownloadManager.Request(Uri.parse(url))
            .setTitle("ERP Quty Karunia Update")
            .setDescription("Downloading APK...")
            .setNotificationVisibility(
                DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED
            )
            .setDestinationInExternalFilesDir(
                context,
                Environment.DIRECTORY_DOWNLOADS,
                "erp-update.apk"
            )
        
        val downloadManager = context.getSystemService(
            Context.DOWNLOAD_SERVICE
        ) as DownloadManager
        
        val downloadId = downloadManager.enqueue(request)
        
        // Listen for download completion
        val onComplete = object : BroadcastReceiver() {
            override fun onReceive(context: Context, intent: Intent) {
                val id = intent.getLongExtra(
                    DownloadManager.EXTRA_DOWNLOAD_ID, -1
                )
                if (id == downloadId) {
                    // Install APK (requires user permission)
                    installApk(context)
                }
            }
        }
        
        context.registerReceiver(
            onComplete,
            IntentFilter(DownloadManager.ACTION_DOWNLOAD_COMPLETE)
        )
    }
    
    private fun installApk(context: Context) {
        val apkFile = File(
            context.getExternalFilesDir(Environment.DIRECTORY_DOWNLOADS),
            "erp-update.apk"
        )
        
        val apkUri = if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.N) {
            FileProvider.getUriForFile(
                context,
                "${context.packageName}.fileprovider",
                apkFile
            )
        } else {
            Uri.fromFile(apkFile)
        }
        
        val intent = Intent(Intent.ACTION_VIEW).apply {
            setDataAndType(apkUri, "application/vnd.android.package-archive")
            flags = Intent.FLAG_ACTIVITY_NEW_TASK or 
                    Intent.FLAG_GRANT_READ_URI_PERMISSION
        }
        
        context.startActivity(intent)
    }
}

// Di MainActivity.kt - Cek update saat app start
class MainActivity : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        
        // Check for updates on app startup
        lifecycleScope.launch {
            val updateChecker = UpdateChecker(this@MainActivity)
            val updateInfo = updateChecker.checkForUpdates()
            
            updateInfo?.let {
                updateChecker.showUpdateDialog(it) {
                    // User confirmed update
                }
            }
        }
    }
}
```

**Workflow Update APK**:
```
1. Developer release APK baru (v1.2.0)
   â”œâ”€ Build APK di Android Studio
   â”œâ”€ Upload ke server: /var/www/apk/erp-quty-v1.2.0.apk
   â””â”€ Update backend database: app_versions.version_code = 5

2. Karyawan buka app di HP
   â”œâ”€ App call API /check-update (background)
   â”œâ”€ Server respond: "update available"
   â””â”€ Dialog muncul: "Update Sekarang" atau "Nanti Saja"

3. User tap "Update Sekarang"
   â”œâ”€ Download APK dari server (via WiFi, ~15 MB)
   â”œâ”€ Install prompt muncul (perlu izin "Install from Unknown Sources")
   â”œâ”€ User tap "Install"
   â””â”€ App auto-restart dengan versi baru

4. Jika force_update = true
   â”œâ”€ Dialog tidak bisa di-close
   â”œâ”€ User wajib update sebelum bisa pakai app
   â””â”€ Prevent old version access API (security/compatibility)
```

**Benefits**:
- âœ… IT Admin tidak perlu install manual di 50+ HP
- âœ… Update bisa dilakukan bertahap (rollout 10 user dulu, test, baru rollout semua)
- âœ… User dapat notifikasi otomatis saat ada update
- âœ… Force update untuk breaking changes critical

**Alternative (jika IT resource terbatas)**:
- Gunakan **Firebase App Distribution** (free untuk internal testing)
- Upload APK ke Firebase, invite user via email
- User download dari link Firebase (ada notifikasi push)
```

---

## <a name="keamanan"></a>ğŸ”’ 7. KEAMANAN & HAK AKSES

### A. **23 Roles Defined** ğŸ†• (Updated with System Role & Fraud Prevention)

| **No** | **Role** | **Akses** |
|--------|----------|-----------|
| 1 | **Director** | View-only semua data + notifikasi approval |
| 2 | **Manager Production** | Approve SPK, lihat semua laporan produksi |
| 3 | **Manager PPIC** | Buat MO, approve material request |
| 4 | **Manager Warehouse** | Approve stock adjustment |
| 5 | **Manager Purchasing** | Approve PO >$10,000 |
| 6 | **Manager QC** | Approve reject decision |
| 7 | **SPV Cutting** | Approve SPK Cutting, edit SPK |
| 8 | **SPV Sewing** | Approve SPK Sewing, edit SPK |
| 9 | **SPV Finishing** | Approve SPK Finishing, edit SPK |
| 10 | **SPV Packing** | Approve SPK Packing |
| 11 | **SPV Warehouse** | Approve material issue |
| 12 | **Admin PPIC** | Buat MO, buat BOM Manufacturing |
| 13 | **Admin Produksi** | Buat SPK, input produksi harian |
| 14 | **Admin Cutting** | Input produksi, view SPK sendiri |
| 15 | **Admin Sewing** | Input produksi, view SPK sendiri |
| 16 | **Admin Finishing** | Input produksi, view SPK sendiri |
| 17 | **Admin Packing** | Input packing, scan barcode |
| 18 | **Warehouse Staff** | Material issue, receive, scan barcode |
| 19 | **Purchasing Staff** | Buat PO, BOM Purchasing |
| 20 | **QC Staff** | Input inspection, reject/approve |
| 21 | **IT Admin** | Buat user, assign role, view audit trail |
| 22 | **View-Only** | Lihat data (untuk trainee, auditor) |
| 23 | **System / Bot** ğŸ†• | Hidden role untuk automated tasks (user_id: 0) |

**ğŸ†• Role 23: System / Bot** (Special Hidden Role):
```
Purpose: Untuk audit trail automated actions
User ID: 0 (reserved, tidak bisa login)

Use Cases:
â”œâ”€ Auto-reject SPK yang expired (lewat deadline >7 hari)
â”œâ”€ Auto-close MO yang sudah complete
â”œâ”€ Scheduled backup (tiap malam pukul 03:00)
â”œâ”€ Auto-notification email/SMS
â”œâ”€ Material stock alert trigger
â””â”€ Celery/ARQ background task execution

Benefit:
âœ… Audit log jelas: "System" yang action, bukan admin random
âœ… Prevent confusion: Admin tidak disalahkan untuk auto-action
âœ… Compliance: External audit bisa bedakan human vs system action

Example Audit Log:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 02-Feb-2026 03:00 | System | AUTO_BACKUP    â”‚
â”‚ 02-Feb-2026 08:15 | System | AUTO_CLOSE_MO  â”‚
â”‚ 02-Feb-2026 08:15 | admin_ppic_01 | VIEW_MO  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### B. **Permission Matrix (PBAC)** ğŸ†• Refined with CRUD+A+V Logic

**Permission Types**:
- **C**reate: Buat data baru
- **R**ead: Lihat data
- **U**pdate: Edit data existing
- **D**elete: Hapus data (soft delete)
- **A**pprove: Approve workflow
- **V**oid: Batalkan/void dokumen (hard constraint)

---

#### **Refined Permission: Admin Produksi (Role 13)** ğŸ†•

**âŒ OLD (MASALAH)**:
```
âœ… CREATE: SPK (semua departemen) <- Bahaya! Bisa bikin SPK gelap
```

**âœ… NEW (SECURE)**:
```yaml
Admin Produksi:
  âœ… ALLOWED:
    - GENERATE: SPK (Strictly based on MO Data)
      Logic: Ambil data dari MO yang sudah RELEASED
      Qty/Material tidak bisa diubah manual (inherit dari BOM)
      System validate: MO Status >= PARTIAL untuk Cutting/Emb
                       MO Status >= RELEASED untuk Sewing/Finishing/Packing
    
    - READ: 
      â”œâ”€ MO (Manufacturing Order) - untuk referensi
      â”œâ”€ BOM Manufacturing - untuk cek material requirement
      â”œâ”€ Stock WIP (Work In Progress) - untuk tahu availability
      â””â”€ SPK History - untuk tracking
    
    - UPDATE:
      â”œâ”€ Progress Tracking (Daily Input Output)
      â”œâ”€ Reject Quantity (dengan alasan & foto)
      â””â”€ Status SPK (Draft â†’ In Progress â†’ Completed)
    
    - PRINT:
      â”œâ”€ SPK Ticket (PDF dengan QR Code)
      â””â”€ Material Request Form (jika stock kurang)
  
  âŒ DENIED:
    - CREATE: SPK Manual (tanpa referensi MO)
      Reason: Prevent "produksi gelap" (unauthorized production)
      
    - UPDATE: BOM Values (Qty per unit, material code)
      Reason: Hanya Admin PPIC yang boleh (master data)
      
    - DELETE: Any data
      Reason: Audit trail harus utuh, pakai VOID jika perlu batalkan
      
    - APPROVE: SPK / Material Debt
      Reason: Butuh level SPV+ untuk approval
      
    - VIEW: Financial Data (Harga material, Cost per unit)
      Reason: Sensitive data, hanya Manager+ dan Purchasing
```

**Impact**:
- âœ… Prevent produksi tanpa PO (fraud)
- âœ… Material tracking akurat (tidak bisa manipulasi qty)
- âœ… Audit trail solid

---

#### **Refined Permission: Director (Role 1)** ğŸ†•

**âŒ OLD (TERLALU LEMAH)**:
```
Director: View-only semua data + notifikasi approval
```
â†‘ Masalah: Direktur tidak bisa action apapun saat emergency!

**âœ… NEW (EMERGENCY POWER)**:
```yaml
Director:
  âœ… ALLOWED:
    - VIEW: All Data (Dashboard Executive, Real-time)
      â”œâ”€ Financial Summary (Revenue, Cost, Margin)
      â”œâ”€ Production KPI (Efficiency, Yield, OTD)
      â”œâ”€ Material Stock Value (Total inventory Rp)
      â””â”€ Employee Performance (per department)
    
    - ACTION: Emergency Override ğŸš¨
      â”œâ”€ Emergency Unlock SPK (yang stuck/terkunci sistem)
      â”œâ”€ Force Approve PO (bypass budget limit saat urgent)
      â”œâ”€ Override Material Debt (izinkan produksi dengan stok -)
      â””â”€ Manual Close MO (jika ada bug sistem)
      
      âš ï¸ Constraint:
      â€¢ Setiap override tercatat di Audit Log dengan badge MERAH
      â€¢ Notification otomatis ke IT Admin & Manager terkait
      â€¢ Butuh input "Reason" (wajib, min 20 karakter)
      â€¢ Max 5 override per hari (prevent abuse)
    
    - NOTIFICATION:
      â”œâ”€ Real-time alert (Telegram/WhatsApp)
      â”œâ”€ Weekly summary email (production performance)
      â””â”€ Monthly report (financial + operational)
  
  âŒ DENIED:
    - CREATE/UPDATE: Master Data (Material, BOM, User)
      Reason: Operational task, delegasi ke Manager/Admin
      
    - DELETE: Historical Data
      Reason: Audit compliance, data tidak boleh hilang
```

**Emergency Override Log Example**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸš¨ EMERGENCY OVERRIDE - AUDIT LOG                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Date: 02-Feb-2026 14:30                                   â”‚
â”‚ User: director_rizaldy (Role: Director)                   â”‚
â”‚ Action: FORCE_APPROVE_PO                                  â”‚
â”‚ Target: PO-2026-0789 (IKHR504 KOHAIR - Rp 25,000,000)    â”‚
â”‚                                                           â”‚
â”‚ Original Status: PENDING_BUDGET_APPROVAL                  â”‚
â”‚ Budget Limit: Rp 20,000,000 (EXCEEDED by Rp 5,000,000)   â”‚
â”‚                                                           â”‚
â”‚ Reason (Input Director):                                  â”‚
â”‚ "Customer IKEA urgent order 2000 pcs AFTONSPARV.          â”‚
â”‚  Kain KOHAIR stock critical (hanya 50 YARD).              â”‚
â”‚  Delay 1 hari = penalty $5000. Approve exceptional."     â”‚
â”‚                                                           â”‚
â”‚ System Validation:                                        â”‚
â”‚ âœ… Reason length: 120 characters (min 20)                 â”‚
â”‚ âœ… Override count today: 2/5 (safe)                       â”‚
â”‚ âœ… Notification sent: manager_ppic_01, it_admin_01        â”‚
â”‚                                                           â”‚
â”‚ Result: PO-2026-0789 status â†’ APPROVED (by Director)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### **Refined Permission: SPV Cutting/Sewing/Finishing (Role 7-9)** ğŸ†•

**âŒ OLD WORKFLOW (RAWAN ERROR)**:
```
SPV Cutting: "Edit SPK" â† Bahaya!
```
â†‘ Masalah: Jika SPK sudah berjalan (sudah potong 100 pcs), terus di-edit jadi 200 pcs, stok WIP kacau!

**âœ… NEW WORKFLOW (REVISION REQUEST)** ğŸ†•:
```yaml
SPV Cutting/Sewing/Finishing:
  âœ… ALLOWED:
    - APPROVE: SPK Creation (dari Admin Produksi)
    
    - REQUEST_REVISION: SPK (tidak langsung edit!)
      Workflow:
      1. SPV klik "Request Revision" (bukan "Edit")
      2. Input alasan revisi (wajib, min 20 char)
      3. System void SPK lama:
         - Status: ACTIVE â†’ VOIDED
         - Void reason: "Revised to SPK-2026-00123-R1"
         - Void by: spv_cutting_01
         - Void date: 02-Feb-2026 10:30
      
      4. System create SPK baru:
         - No SPK: SPK-2026-00123-R1 (suffix R1 = Revision 1)
         - Parent: SPK-2026-00123 (link ke SPK lama)
         - Status: DRAFT (perlu re-approve Manager)
         - Revision reason: Copy dari input SPV
      
      5. Manager approve SPK revisi (lihat history perubahan)
      
      6. SPK-R1 active, SPK lama tetap di database (audit trail)
    
    - APPROVE: Material Debt (stok minus sementara)
    - APPROVE: Reject/Rework Decision
    - VIEW: Department Performance (hanya dept sendiri)
  
  âŒ DENIED:
    - UPDATE: SPK yang sudah IN_PROGRESS (pakai Revision!)
    - DELETE: SPK History
    - VIEW: Other Department Data (restrict by department_scope)
    - VIEW: Cost/Price (financial data)
```

**SPK Revision History UI**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SPK HISTORY - AFTONSPARV Cutting Body                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚ â‘  SPK-2026-00123 (Original)                         â”‚
â”‚    Created: 28-Jan-2026 08:00 by admin_prod_01      â”‚
â”‚    Target: 480 pcs                                   â”‚
â”‚    Status: âŒ VOIDED (02-Feb-2026 10:30)             â”‚
â”‚    Void Reason: "BOM updated, fabric qty changed"   â”‚
â”‚    Void By: spv_cutting_01                           â”‚
â”‚    Progress saat di-void: 120/480 pcs (25%)         â”‚
â”‚    [VIEW DETAILS]                                    â”‚
â”‚                                                      â”‚
â”‚ â‘¡ SPK-2026-00123-R1 (Revision 1) â† ACTIVE           â”‚
â”‚    Created: 02-Feb-2026 10:35 by spv_cutting_01     â”‚
â”‚    Target: 360 pcs (updated from 480)               â”‚
â”‚    Status: âœ… IN_PROGRESS                            â”‚
â”‚    Progress: 120/360 pcs (33%) - inherited from old â”‚
â”‚    [VIEW DETAILS] [TRACK PROGRESS]                  â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Benefits**:
- âœ… History SPK tidak hilang (audit trail utuh)
- âœ… WIP stock calculation akurat (tidak double count)
- âœ… Manager tahu kenapa SPK di-revisi (transparency)

---

#### **Auto-Approve Logic: Manager Production (Role 2)** ğŸ†•

**âŒ OLD (MANAGER BOTTLENECK)**:
```
Manager Production: Approve SPK (ALL SPK! 100+ per hari)
```
â†‘ Masalah: Manager lelah klik "Approve" terus â†’ asal approve tanpa periksa â†’ rawan fraud

**âœ… NEW (LIMIT APPROVAL)** ğŸ†•:
```yaml
Manager Production:
  Auto-Approve Conditions (System bypass Manager):
  â”œâ”€ SPK sesuai BOM (material qty & code match 100%)
  â”œâ”€ SPK linked to valid MO (MO Status >= PARTIAL/RELEASED)
  â”œâ”€ No material debt (stock available)
  â”œâ”€ Target qty <= MO target (tidak over-produksi)
  â””â”€ Created by authorized Admin (role verified)
  
  IF all conditions TRUE:
    â†’ SPK auto-approved by System (user_id: 0)
    â†’ Manager hanya dapat notification summary (harian)
    â†’ Approval log: "Auto-approved (standard SPK)"
  
  Manual Approval Required (Manager review):
  â”œâ”€ Material variance > Â±5% dari BOM
  â”œâ”€ Material debt requested (stok minus)
  â”œâ”€ Revision SPK (suffix -R1, -R2, etc)
  â”œâ”€ Target qty > MO target (over-produksi)
  â”œâ”€ Custom BOM (bukan standard artikel)
  â””â”€ Priority "URGENT" flag (expedite request)
  
  IF any condition TRUE:
    â†’ SPK status: PENDING_MANAGER_APPROVAL
    â†’ Manager dapat notification: "Action required"
    â†’ UI highlight red: Alasan kenapa perlu manual review
```

**Manager Dashboard - Approval Queue** ğŸ†•:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MANAGER PRODUCTION - APPROVAL QUEUE                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                        â”‚
â”‚ ğŸ“Š Summary Today (02-Feb-2026):                        â”‚
â”‚ â”œâ”€ Total SPK Created: 127                             â”‚
â”‚ â”œâ”€ Auto-Approved: 119 (93.7%) âœ…                       â”‚
â”‚ â””â”€ Need Your Review: 8 (6.3%) âš ï¸                       â”‚
â”‚                                                        â”‚
â”‚ âš ï¸ PENDING YOUR APPROVAL (8):                          â”‚
â”‚                                                        â”‚
â”‚ 1. SPK-2026-00134 (Cutting - AFTONSPARV)              â”‚
â”‚    ğŸš¨ Material Variance: +12% (KOHAIR)                 â”‚
â”‚    Reason: "Fabric defect, butuh extra 8 YARD"        â”‚
â”‚    Created by: admin_prod_02                           â”‚
â”‚    [APPROVE] [REJECT] [REQUEST_INFO]                   â”‚
â”‚                                                        â”‚
â”‚ 2. SPK-2026-00135-R1 (Sewing - KRAMIG)                â”‚
â”‚    ğŸ”„ Revision from SPK-00135                          â”‚
â”‚    Change: Target 480 â†’ 360 pcs (customer reduce)     â”‚
â”‚    Requested by: spv_sewing_02                         â”‚
â”‚    [APPROVE] [REJECT] [VIEW_HISTORY]                   â”‚
â”‚                                                        â”‚
â”‚ 3. SPK-2026-00136 (Finishing - AFTONSPARV)            â”‚
â”‚    ğŸ“¦ Material Debt: -5.2 kg (Filling)                 â”‚
â”‚    ETA Material: Today 15:00 (PO-2026-0456)           â”‚
â”‚    Requested by: admin_finishing_03                    â”‚
â”‚    [APPROVE] [REJECT] [CHECK_PO]                       â”‚
â”‚                                                        â”‚
â”‚ ... (5 more items)                                     â”‚
â”‚                                                        â”‚
â”‚ [APPROVE ALL STANDARD] [VIEW ALL] [FILTER]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Benefits**:
- âœ… Manager fokus review yang critical only (8 dari 127 = 6%)
- âœ… Approval cepat (119 SPK auto-approved dalam hitungan detik)
- âœ… Reduce human error (system validasi ketat)
- âœ… Audit log jelas: Auto vs Manual approval

---

### C. **Audit Trail**
Semua aktivitas dicatat:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AUDIT LOG - SPK-2026-00123                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  28-Jan-2026 08:15  â”‚ admin_prod_01 â”‚ CREATE SPK   â”‚
â”‚  28-Jan-2026 09:30  â”‚ Admin_cut_05 â”‚ START PROD â”‚
â”‚  28-Jan-2026 16:00  â”‚ admin_prod_01 â”‚ INPUT DAILY  â”‚
â”‚  28-Jan-2026 16:05  â”‚ admin_prod_01 â”‚ EDIT SPK QTY â”‚
â”‚  28-Jan-2026 16:10  â”‚ spv_cutting_01 â”‚ APPROVE EDIT â”‚
â”‚  28-Jan-2026 16:15  â”‚ manager_prod_01 â”‚ APPROVE EDITâ”‚
â”‚  29-Jan-2026 10:00  â”‚ Admin_cut_05 â”‚ COMPLETE   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Manfaat Audit Trail**:
- Tahu siapa yang ubah data
- Investigasi jika ada masalah
- Compliance (untuk audit external)

---

### D. **Database Security Flags** ğŸ†• (Fraud Prevention)

#### **1. can_see_cost (Boolean Flag)** ğŸ’°

**Problem**:
- Admin Cutting tidak perlu tahu harga kain per meter (Rp 150,000/YD)
- Admin Sewing tidak perlu tahu cost per unit (Rp 85,000/pcs)
- **Risk**: Data harga bocor ke kompetitor via karyawan

**Solution**: Role-based cost visibility

**Database Schema** (`users` table):
```sql
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    role_id INTEGER REFERENCES roles(id),
    department_id INTEGER REFERENCES departments(id),
    can_see_cost BOOLEAN DEFAULT FALSE,  -- ğŸ†• Flag
    department_scope INTEGER[],          -- ğŸ†• Array
    created_at TIMESTAMPTZ DEFAULT NOW()
);
```

**Role Assignment**:
```yaml
can_see_cost: TRUE (Boleh lihat harga):
â”œâ”€ Director (semua data financial)
â”œâ”€ Manager PPIC (untuk cost analysis)
â”œâ”€ Manager Purchasing (nego vendor)
â”œâ”€ Purchasing Staff (buat PO dengan harga)
â”œâ”€ Finance Staff (accounting)
â””â”€ IT Admin / Developer (untuk debug)

can_see_cost: FALSE (Hanya lihat Qty, HIDE harga):
â”œâ”€ Admin Produksi (semua dept)
â”œâ”€ Admin Cutting/Sewing/Finishing/Packing
â”œâ”€ Warehouse Staff (hanya qty stock)
â”œâ”€ QC Staff (hanya qty reject)
â””â”€ SPV (kecuali SPV Finance)
```

**Backend API Middleware**:
```python
# File: app/api/dependencies.py
from fastapi import Depends, HTTPException
from app.models.user import User

async def check_cost_permission(current_user: User = Depends(get_current_user)):
    """
    Middleware untuk protect endpoint yang expose financial data.
    Jika user.can_see_cost = False, return 403 Forbidden.
    """
    if not current_user.can_see_cost:
        raise HTTPException(
            status_code=403,
            detail={
                "error": "INSUFFICIENT_PERMISSION",
                "message": "You are not authorized to view cost/price data.",
                "required_permission": "can_see_cost"
            }
        )
    return current_user

# Usage di endpoint
@router.get("/materials/{material_id}")
async def get_material_detail(
    material_id: int,
    current_user: User = Depends(get_current_user)
):
    material = await get_material(material_id)
    
    # Conditional response based on permission
    if current_user.can_see_cost:
        return {
            "code": material.code,
            "name": material.name,
            "stock_qty": material.stock_qty,
            "uom": material.uom,
            "unit_price": material.unit_price,      # ğŸ’° Show price
            "total_value": material.stock_qty * material.unit_price,
            "supplier": material.supplier
        }
    else:
        return {
            "code": material.code,
            "name": material.name,
            "stock_qty": material.stock_qty,
            "uom": material.uom,
            "unit_price": "***HIDDEN***",           # ğŸ”’ Hide price
            "total_value": "***HIDDEN***",
            "supplier": material.supplier
        }
```

**Frontend UI - Conditional Rendering**:
```typescript
// File: frontend/src/components/MaterialTable.tsx
import { useAuthStore } from '@/store/authStore';

const MaterialTable = ({ materials }) => {
  const { currentUser } = useAuthStore();
  
  return (
    <table>
      <thead>
        <tr>
          <th>Material Code</th>
          <th>Name</th>
          <th>Stock Qty</th>
          {currentUser.can_see_cost && (
            <>
              <th>Unit Price</th>
              <th>Total Value</th>
            </>
          )}
        </tr>
      </thead>
      <tbody>
        {materials.map(mat => (
          <tr key={mat.id}>
            <td>{mat.code}</td>
            <td>{mat.name}</td>
            <td>{mat.stock_qty} {mat.uom}</td>
            {currentUser.can_see_cost && (
              <>
                <td>Rp {mat.unit_price.toLocaleString()}</td>
                <td>Rp {mat.total_value.toLocaleString()}</td>
              </>
            )}
          </tr>
        ))}
      </tbody>
    </table>
  );
};
```

**Mobile App - Hide Price**:
```kotlin
// File: mobile/app/src/.../MaterialDetailScreen.kt
if (currentUser.canSeeCost) {
    Text(text = "Unit Price: Rp ${material.unitPrice}")
    Text(text = "Total Value: Rp ${material.totalValue}")
} else {
    // Don't render price fields at all
    Text(
        text = "Price: ***RESTRICTED***",
        color = Color.Gray,
        fontStyle = FontStyle.Italic
    )
}
```

---

#### **2. department_scope (Array/JSON Flag)** ğŸ¢

**Problem**:
- Admin Cutting bisa lihat (bahkan edit) data Sewing department
- SPV Sewing bisa approve SPK Cutting (kekacauan lintas departemen)
- **Risk**: Data leak antar departemen, fraud collaboration

**Solution**: Restrict data access by department

**Database Schema**:
```sql
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    username VARCHAR(50),
    role_id INTEGER,
    department_scope INTEGER[],  -- ğŸ†• Array of department IDs
    -- Example values:
    -- Admin Cutting: [1]           (hanya dept Cutting)
    -- SPV Cutting:   [1]           (hanya dept Cutting)
    -- Manager Prod:  [1,2,3,4,5]   (semua dept produksi)
    -- Director:      NULL          (unrestricted, semua dept)
    CONSTRAINT ck_dept_scope CHECK (
        department_scope IS NULL OR array_length(department_scope, 1) > 0
    )
);

CREATE TABLE departments (
    id SERIAL PRIMARY KEY,
    code VARCHAR(20) UNIQUE,  -- CUT, SEW, FIN, PKG, WHS, PPIC, PUR, QC
    name VARCHAR(100)
);
```

**Auto-populate department_scope saat create user**:
```python
# File: app/services/user_service.py
def create_user(username: str, role: str, department: str) -> User:
    # Mapping role â†’ department_scope
    scope_rules = {
        "Admin Cutting": [1],       # dept_id 1 = Cutting
        "Admin Sewing": [2],        # dept_id 2 = Sewing
        "Admin Finishing": [3],     # dept_id 3 = Finishing
        "SPV Cutting": [1],
        "SPV Sewing": [2],
        "Manager Production": [1,2,3,4,5],  # All production depts
        "Manager PPIC": [1,2,3,4,5,6],      # Production + PPIC
        "Director": None,                   # Unrestricted
        "IT Admin": None,                   # Unrestricted (for debug)
    }
    
    user = User(
        username=username,
        role=role,
        department_scope=scope_rules.get(role, [department.id])
    )
    db.add(user)
    db.commit()
    return user
```

**Backend Query Filter** (SQLAlchemy):
```python
# File: app/api/endpoints/spk.py
from sqlalchemy import or_

@router.get("/spk/list")
async def get_spk_list(
    current_user: User = Depends(get_current_user),
    db: Session = Depends(get_db)
):
    query = db.query(SPK)
    
    # Apply department scope filter
    if current_user.department_scope is not None:
        # User has restricted scope (e.g., Admin Cutting)
        query = query.filter(
            SPK.department_id.in_(current_user.department_scope)
        )
    # else: unrestricted (Director, IT Admin)
    
    spk_list = query.all()
    return spk_list

# Example:
# Admin Cutting (dept_scope=[1]) â†’ Only sees SPK where department_id = 1
# Manager Prod (dept_scope=[1,2,3,4,5]) â†’ Sees SPK from 5 depts
# Director (dept_scope=NULL) â†’ Sees ALL SPK
```

**Frontend - Hide Tabs for Restricted Departments**:
```typescript
// File: frontend/src/components/Sidebar.tsx
import { useAuthStore } from '@/store/authStore';

const Sidebar = () => {
  const { currentUser } = useAuthStore();
  
  const canAccessDepartment = (deptId: number) => {
    if (!currentUser.department_scope) return true; // Unrestricted
    return currentUser.department_scope.includes(deptId);
  };
  
  return (
    <nav>
      {canAccessDepartment(1) && <Link to="/cutting">Cutting</Link>}
      {canAccessDepartment(2) && <Link to="/sewing">Sewing</Link>}
      {canAccessDepartment(3) && <Link to="/finishing">Finishing</Link>}
      {/* ... */}
    </nav>
  );
};
```

**Benefits**:
- âœ… Admin Cutting tidak bisa "mengintip" data Sewing
- âœ… SPV tidak bisa approve SPK dept lain (prevent collusion fraud)
- âœ… Query database lebih cepat (filter by scope, less data loaded)
- âœ… UI lebih clean (hanya tampilkan menu relevan)

---

### E. **Fraud Prevention Checklist** ğŸš¨ ğŸ†•

#### **Common Fraud Scenarios di Manufaktur & Mitigasi**:

**1. Produksi Gelap (Ghost Production)**
```
Skenario:
Admin Produksi buat SPK palsu tanpa MO/PO.
Ambil material dari gudang untuk produksi "sampingan".
Jual hasil produksi ke pasar gelap (tanpa invoice).

Mitigasi:
âœ… SPK hanya bisa di-GENERATE dari MO (bukan CREATE manual)
âœ… Material issue butuh approve SPV Warehouse
âœ… Barcode tracking: Material â†’ WIP â†’ Finished Good (full chain)
âœ… Audit Trail: Siapa ambil material, untuk SPK mana
âœ… AI Anomaly Detection (future): Material usage vs output variance >15%
```

**2. Material Theft (Pencurian Material)**
```
Skenario:
Warehouse Staff scan barcode material keluar.
Tapi material tidak sampai ke produksi (dibawa pulang).

Mitigasi:
âœ… Double verification: Warehouse issue + Production receive
âœ… Surat Jalan dengan barcode: Scan keluar + Scan masuk
âœ… Weight check (future): Timbang material saat keluar warehouse
âœ… CCTV integration (future): Auto-capture foto saat material keluar
âœ… Periodic cycle count: Stock opname tiap minggu (random material)
```

**3. Quantity Manipulation**
```
Skenario:
Admin Cutting input: "Potong 480 pcs" (sesuai SPK).
Actual produksi: 450 pcs (30 pcs disembunyikan untuk dijual).

Mitigasi:
âœ… QC random check: Sample 10% output per SPK
âœ… Material variance alert: Jika fabric usage >10% dari BOM, flag red
âœ… Packing verification: Barcode scan carton, hitung total pcs
âœ… Cross-check: Cutting output 480 â†’ Sewing input harus 480 (jika beda, alert)
```

**4. Approval Bypass (Kolusi SPV + Admin)**
```
Skenario:
SPV Cutting approve SPK dengan material variance 50%.
SPV dapat "komisi" dari Admin (kolusi).

Mitigasi:
âœ… Auto-Approve untuk SPK standard (Manager tidak terlibat)
âœ… Manager review hanya untuk variance >5% (prevent SPV abuse)
âœ… Audit Log: Variance approval history per SPV (track pattern)
âœ… Quarterly audit: Finance team review semua high-variance approval
```

**5. Data Manipulation (Edit History)**
```
Skenario:
IT Admin dengan akses database langsung.
Edit data SPK di database (bypass aplikasi).

Mitigasi:
âœ… Database access restricted: Hanya via application API (no direct SQL)
âœ… Database audit log: PostgreSQL pgAudit extension (log all DML)
âœ… Immutable audit trail: Gunakan append-only log table (tidak bisa edit/delete)
âœ… Role separation: Developer != Production DBA (different credentials)
```

#### **Fraud Detection Dashboard (Future Enhancement)**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸš¨ FRAUD DETECTION DASHBOARD                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚ ğŸ” Anomaly Detected (Last 7 Days):                   â”‚
â”‚                                                      â”‚
â”‚ 1. âš ï¸ Material Variance Alert                        â”‚
â”‚    User: admin_cutting_05                            â”‚
â”‚    SPK: SPK-2026-00134 (AFTONSPARV)                  â”‚
â”‚    Variance: +28.5% (KOHAIR fabric)                  â”‚
â”‚    Expected: 70.4 YD | Actual: 90.5 YD               â”‚
â”‚    Frequency: 3x dalam 7 hari (pattern!)             â”‚
â”‚    [INVESTIGATE] [NOTIFY_MANAGER]                    â”‚
â”‚                                                      â”‚
â”‚ 2. âš ï¸ WIP Mismatch                                   â”‚
â”‚    Cutting output: 480 pcs (SPK-2026-00120)          â”‚
â”‚    Sewing input: 450 pcs (30 pcs hilang!)            â”‚
â”‚    Date: 01-Feb-2026                                 â”‚
â”‚    Status: Pending investigation                     â”‚
â”‚    [VIEW_SURAT_JALAN] [CONTACT_SPV]                  â”‚
â”‚                                                      â”‚
â”‚ 3. ğŸš¨ High Emergency Override                        â”‚
â”‚    User: director_rizaldy                            â”‚
â”‚    Action: 5 override dalam 1 hari (MAX LIMIT!)     â”‚
â”‚    Last: Force approve PO Rp 50,000,000 (15:30)     â”‚
â”‚    [VIEW_AUDIT_LOG]                                  â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## <a name="android-app"></a>ğŸ“± 8. APLIKASI ANDROID MOBILE

### A. **Minimum Requirement**
- Android 7.1.2+ (API Level 25)
- RAM: 2 GB
- Storage: 100 MB
- Camera: 5 MP (untuk barcode scanning)
- Internet: 3G/4G atau WiFi (offline mode available)

**Compatible Devices**:
- Hampir semua HP Android dari tahun 2017+
- Termasuk HP budget (Xiaomi, Realme, Samsung A-series)

---

### B. **4 Screens Utama**

#### 1ï¸âƒ£ **Login Screen**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ­ ERP QUTY KARUNIA            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚  Username: [_______________]    â”‚
â”‚  Password: [_______________]    â”‚
â”‚                                 â”‚
â”‚  [LOGIN]                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2ï¸âƒ£ **Dashboard Screen** (ğŸ†• with MO Status Indicator)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š DASHBOARD PRODUKSI            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚  ğŸ“… 30 Januari 2026              â”‚
â”‚  ğŸ‘¤ Admin: Ahmad (Cutting)       â”‚
â”‚                                 â”‚
â”‚  ğŸ†• Active MO Status:            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  MO-2026-00089                   â”‚
â”‚  [40551542] AFTONSPARV           â”‚
â”‚  Status: ğŸŸ¢ RELEASED              â”‚
â”‚  (All Dept Can Start)            â”‚
â”‚                                 â”‚
â”‚  MO-2026-00090                   â”‚
â”‚  [40551543] KRAMIG Bear          â”‚
â”‚  Status: ğŸŸ¡ PARTIAL               â”‚
â”‚  (Cutting/Emb Only)              â”‚
â”‚  âš ï¸ PO Label Pending              â”‚
â”‚                                 â”‚
â”‚  ğŸ“‹ SPK Hari Ini: 3               â”‚
â”‚  â”œâ”€ SPK-CUT-00120: 95% âœ…          â”‚
â”‚  â”œâ”€ SPK-CUT-00121: 60% ğŸ”„          â”‚
â”‚  â””â”€ SPK-CUT-00122: 5% â³           â”‚
â”‚                                 â”‚
â”‚  ğŸ“¦ Material Stock:              â”‚
â”‚  â”œâ”€ KOHAIR: 125 YD âš ï¸ Low        â”‚
â”‚  â””â”€ Filling: 45 KG âœ… OK         â”‚
â”‚                                 â”‚
â”‚  [ğŸ“ Input Harian]                â”‚
â”‚  [ğŸ“· Scan Barcode]                â”‚
â”‚  [ğŸ“Š Laporan]                     â”‚
â”‚  [ğŸšª Logout]                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ†• New Feature - MO Status Real-Time Visibility**:
- ğŸŸ¢ **RELEASED**: Green badge - All departments can start
- ğŸŸ¡ **PARTIAL**: Yellow badge - Limited to Cutting/Embroidery
- âšª **DRAFT**: Gray badge - Planning only
- Admin dapat lihat MO status sebelum mulai input
- Warning notification jika coba input SPK yang blocked

```

#### 3ï¸âƒ£ **Daily Production Input Screen**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“… JANUARI 2026                â”‚
â”‚  SPK-SEW-2026-00156              â”‚
â”‚  [40551542] AFTONSPARV Body      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Mo  Tu  We  Th  Fr             â”‚
â”‚  26  27  28  29  30             â”‚
â”‚  --- 155 160  [HARI INI]  ---   â”‚
â”‚                                 â”‚
â”‚  Total: 315/480 (65.6%)         â”‚
â”‚  Reject: 8 pcs (2.5%)           â”‚
â”‚                                 â”‚
â”‚  Input Hari Ini (29-Jan):       â”‚
â”‚  Jumlah Good: [____] pcs        â”‚
â”‚  Reject: [__] pcs               â”‚
â”‚  Defect Type:                   â”‚
â”‚  â˜ Jahitan tidak rapi            â”‚
â”‚  â˜ Label EU posisi miring         â”‚
â”‚  â˜ KOHAIR fabric sobek           â”‚
â”‚  â˜ Thread skip                    â”‚
â”‚                                 â”‚
â”‚  Material Used Today:           â”‚
â”‚  [ATR10500] Thread: [___] CM    â”‚
â”‚  [ALL40030] Label EU: [__] pcs  â”‚
â”‚                                 â”‚
â”‚  Catatan: [_______________]     â”‚
â”‚                                 â”‚
â”‚  [SAVE] [CANCEL]                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4ï¸âƒ£ **FinishGood Barcode Scanner**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“· SCAN FINISHGOOD BARCODE     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                          â”‚  â”‚
â”‚  â”‚   [CAMERA PREVIEW]       â”‚  â”‚
â”‚  â”‚                          â”‚  â”‚
â”‚  â”‚   ğŸ“· Arahkan ke barcode  â”‚  â”‚
â”‚  â”‚      carton FG           â”‚  â”‚
â”‚  â”‚                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                 â”‚
â”‚  ğŸ” Hasil Scan:                 â”‚
â”‚  FG-2026-00123-CTN005           â”‚
â”‚                                 â”‚
â”‚  ğŸ­ Article:                    â”‚
â”‚  [40551542] AFTONSPARV          â”‚
â”‚  soft toy w astronaut suit      â”‚
â”‚                                 â”‚
â”‚  ğŸ“ PO: PO-LBL-2026-0456         â”‚
â”‚  ğŸ“… Week: W05-2026                â”‚
â”‚  ğŸ“¦ MO: MO-2026-00089             â”‚
â”‚                                 â”‚
â”‚  Units/CTN: 60 pcs              â”‚
â”‚  Scanned: 5/8 CTN               â”‚
â”‚  Total: 300/465 pcs (64.5%)     â”‚
â”‚                                 â”‚
â”‚  âœ… VALID - Continue scanning     â”‚
â”‚                                 â”‚
â”‚  [SCAN NEXT CTN] [FINISH]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### C. **Offline Mode**

**Cara Kerja**:
1. User scan barcode (tidak ada internet)
2. Data tersimpan di HP (Room Database)
3. Tampilkan notifikasi: "Offline - Data akan sync otomatis"
4. Saat internet nyala â†’ Background sync (WorkManager)
5. User terima notifikasi: "Sync complete - 5 items uploaded"

**Data yang Bisa Offline**:
- Daily production input
- Barcode scan
- QC inspection

**Conflict Resolution**:
- Last write wins (data terakhir yang menang)
- Jika ada konflik â†’ notifikasi ke user

---

## <a name="new-ideas"></a>ğŸ’¡ 9. IDE PENGEMBANGAN MENDATANG

### 1ï¸âƒ£ **BOM Manufacturing untuk Alokasi Material Otomatis**

**Masalah Saat Ini**: Admin harus manual pilih material saat buat SPK

**Solusi**: 
- PPIC buat BOM Manufacturing per artikel (dengan 30+ SKU material untuk complex product)
- Saat buat SPK â†’ alokasi material otomatis dari BOM
- Contoh: SPK 480 pcs AFTONSPARV â†’ otomatis reserve:
  - [IKHR504] KOHAIR: 70.38 YARD
  - [IKP20157] Filling: 25.92 kg
  - [ATR10500] Thread: 1,198 Meter
  - [ALL40030] Label EU: 480 pcs
  - [ACB30104] Carton: 8 pcs
  - Total: 30+ material SKU tracked automatically

**Status**: âœ… **SUDAH DIIMPLEMENTASIKAN** (dengan UOM Conversion validation)

---

### 2ï¸âƒ£ **Approval Multi-Level untuk Perubahan MO & SPK**

**Workflow**: SPV â†’ Manager â†’ Director (View Only)

**Contoh Kasus**:
- Admin mau ubah SPK dari 500 â†’ 480 units
- SPV review & approve (dengan alasan)
- Manager approve
- Director terima notifikasi (tidak perlu approve)

**Status**: âœ… **SUDAH DIIMPLEMENTASIKAN**

---

### 3ï¸âƒ£ **Input Produksi Harian dengan Pelacakan Progres**

**Fitur**:
- Tampilan kalender grid (31 hari)
- Admin input jumlah harian per SPK
- Sistem track progres kumulatif
- Konfirmasi otomatis saat 100%

**Status**: âœ… **SUDAH DIIMPLEMENTASIKAN** (Web + Mobile)

---

### 4ï¸âƒ£ **Sistem Inventaris Negatif (Material Debt)**

**Fitur**:
- Produksi bisa jalan meskipun material kurang
- Sistem catat "utang material" + keterangan
- Approval multi-level (SPV â†’ Manager)
- Adjustment setelah material datang

**Status**: âœ… **SUDAH DIIMPLEMENTASIKAN**

---

### 5ï¸âƒ£ **Aplikasi Android untuk Scan Barcode FinishGood**

**Fitur**:
- ML Kit Vision untuk barcode scanning
- Verifikasi jumlah box
- Offline mode
- 4 screens (Login, Dashboard, Daily Input, Scanner)

**Status**: âœ… **SUDAH DIIMPLEMENTASIKAN** (Kotlin Native)

---

### 6ï¸âƒ£ **Laporan PPIC Harian & Notifikasi Alert**

**Fitur**:
- Email/WhatsApp otomatis setiap pagi
- Alert real-time untuk keterlambatan
- Dashboard dengan traffic light (hijau/kuning/merah)

**Status**: âœ… **SUDAH DIIMPLEMENTASIKAN** (System Architecture)

---

### 7ï¸âƒ£ **SPK per Departemen Dapat Diedit dengan Approval**

**Fitur**:
- Admin bisa edit SPK (qty, deadline, material)
- Workflow approval multi-level
- Audit trail lengkap

**Status**: âœ… **SUDAH DIIMPLEMENTASIKAN**

---

### 8ï¸âƒ£ **Input SPK Produksi Harian dengan Kalender Grid**

**Fitur**:
- Tampilan kalender 31 hari
- Input jumlah harian + pelacakan progres kumulatif
- Binding: Week code, Article, PO

**Status**: âœ… **SUDAH DIIMPLEMENTASIKAN**

---

### 9ï¸âƒ£ **Purchasing Buat PO Berdasarkan Kebutuhan dari BOM**

**Fitur**:
- PPIC buat MO â†’ sistem hitung kebutuhan material dari BOM
- Purchasing terima notifikasi: "Material needed for MO-xxx"
- Purchasing buat PO berdasarkan kebutuhan

**Status**: âš ï¸ **PERLU IMPLEMENTASI** (Backend logic sudah ada, perlu UI)

---

### ğŸ”Ÿ **PPIC Membuat BOM Manufacturing yang Terhubung ke MO**

**Fitur**:
- BOM Manufacturing untuk alokasi material saat buat MO
- Reservasi material otomatis
- Check stock availability

**Status**: âœ… **SUDAH DIIMPLEMENTASIKAN**

---

### 1ï¸âƒ£1ï¸âƒ£ **Purchasing Buat BOM Purchasing yang Berbeda**

**Fitur**:
- BOM Purchasing untuk pembelian material dari vendor
- Bisa berbeda dengan BOM Manufacturing (karena minimum order, dll)
- Perbandingan efisiensi: BOM Manufacturing vs BOM Purchasing

**Status**: âš ï¸ **PERLU IMPLEMENTASI** (Logic ada, perlu UI + reporting)

---

### 1ï¸âƒ£2ï¸âƒ£ **Perbandingan MO, SPK, BOM Manufacturing, BOM Purchasing**

**Fitur**:
- Laporan akhir produksi:
  - MO Target vs SPK Actual
  - BOM Manufacturing (target) vs Material Terpakai (actual)
  - BOM Purchasing vs Material Dibeli
  - Analisis efisiensi & waste

**Status**: âš ï¸ **PERLU IMPLEMENTASI** (Reporting module)

**Timeline**: 2-3 minggu setelah go-live

---

### 1ï¸âƒ£3ï¸âƒ£ **Modul Jembatan ke Finance (Export Journal CSV)** ğŸ†• ğŸ’°

**Problem Statement**:
Tim Finance akan kesulitan jika harus input ulang data produksi manual selama 1 tahun penuh sebelum integrasi akuntansi penuh (Februari 2027+). Perpindahan stok Raw Material â†’ WIP â†’ Finished Goods memiliki nilai uang (HPP) yang butuh dicatat di Laporan Laba Rugi bulanan.

**Solution - Export Journal Otomatis**:

**Trigger**: Saat MO Status = COMPLETED

**Output**: File CSV format jurnal akuntansi (disesuaikan dengan software yang dipakai)

**Support Formats**:
```yaml
Supported Accounting Software:
â”œâ”€ Accurate (format: ID_Accurate.csv)
â”œâ”€ Zahir (format: ID_Zahir.csv)
â”œâ”€ Jurnal.id (format: ID_Jurnal.csv)
â””â”€ Generic (format: ID_Generic.csv) - untuk software lain
```

**CSV Structure Example** (Accurate format):
```csv
Tanggal,No_Voucher,Akun_Debit,Akun_Kredit,Jumlah,Keterangan,Departemen
2026-01-31,JV-MO-2026-00089,1140-Persediaan Barang Jadi,1130-Persediaan Dalam Proses,40800000,"Penyelesaian MO-2026-00089: 480 pcs AFTONSPARV",Produksi
2026-01-31,JV-MO-2026-00089,1130-Persediaan Dalam Proses,1120-Persediaan Bahan Baku,35680000,"Konsumsi material MO-2026-00089: Fabric+Thread+Filling",Produksi
2026-01-31,JV-MO-2026-00089,5110-Biaya Tenaga Kerja Langsung,2110-Utang Gaji,5120000,"Direct Labor Cost MO-2026-00089: 480 units",Produksi
```

**Backend API**:
```python
# File: app/services/finance_export_service.py
from datetime import datetime
import csv
import io

class FinanceExportService:
    def generate_journal_csv(
        self, 
        mo_id: int, 
        format: str = "accurate"
    ) -> bytes:
        """
        Generate CSV journal entries saat MO completed.
        Format disesuaikan dengan accounting software.
        """
        mo = await get_mo_detail(mo_id)
        
        if mo.status != "COMPLETED":
            raise ValueError("MO must be COMPLETED to export journal")
        
        # Calculate values
        material_cost = mo.calculate_material_cost()  # Sum BOM Ã— unit price
        labor_cost = mo.calculate_labor_cost()        # Standard labor rate Ã— units
        overhead_cost = mo.calculate_overhead()       # Factory overhead allocation
        total_hpp = material_cost + labor_cost + overhead_cost
        
        # Generate journal entries
        entries = [
            {
                "tanggal": mo.completed_date.strftime("%Y-%m-%d"),
                "no_voucher": f"JV-MO-{mo.no_mo}",
                "akun_debit": "1140-Persediaan Barang Jadi",
                "akun_kredit": "1130-Persediaan Dalam Proses",
                "jumlah": total_hpp,
                "keterangan": f"Penyelesaian {mo.no_mo}: {mo.target_qty} pcs {mo.artikel_code}",
                "departemen": "Produksi"
            },
            {
                "tanggal": mo.completed_date.strftime("%Y-%m-%d"),
                "no_voucher": f"JV-MO-{mo.no_mo}",
                "akun_debit": "1130-Persediaan Dalam Proses",
                "akun_kredit": "1120-Persediaan Bahan Baku",
                "jumlah": material_cost,
                "keterangan": f"Konsumsi material {mo.no_mo}: Fabric+Thread+Filling",
                "departemen": "Produksi"
            },
            {
                "tanggal": mo.completed_date.strftime("%Y-%m-%d"),
                "no_voucher": f"JV-MO-{mo.no_mo}",
                "akun_debit": "5110-Biaya Tenaga Kerja Langsung",
                "akun_kredit": "2110-Utang Gaji",
                "jumlah": labor_cost,
                "keterangan": f"Direct Labor Cost {mo.no_mo}: {mo.target_qty} units",
                "departemen": "Produksi"
            }
        ]
        
        # Format CSV based on accounting software
        if format == "accurate":
            return self._format_accurate(entries)
        elif format == "zahir":
            return self._format_zahir(entries)
        elif format == "jurnal":
            return self._format_jurnal_id(entries)
        else:
            return self._format_generic(entries)
    
    def _format_accurate(self, entries: list) -> bytes:
        """Format CSV untuk Accurate"""
        output = io.StringIO()
        writer = csv.DictWriter(
            output, 
            fieldnames=["Tanggal", "No_Voucher", "Akun_Debit", 
                       "Akun_Kredit", "Jumlah", "Keterangan", "Departemen"]
        )
        writer.writeheader()
        writer.writerows(entries)
        return output.getvalue().encode('utf-8')

# API Endpoint
@router.post("/mo/{mo_id}/export-journal")
async def export_journal_to_finance(
    mo_id: int,
    format: str = Query("accurate", enum=["accurate", "zahir", "jurnal", "generic"]),
    current_user: User = Depends(get_current_user)
):
    """
    Export journal entries untuk Finance team.
    Hanya bisa dipanggil saat MO = COMPLETED.
    """
    # Check permission (hanya Finance, PPIC, Manager)
    if current_user.role not in ["Finance Staff", "Manager PPIC", "Director"]:
        raise HTTPException(403, "Insufficient permission")
    
    service = FinanceExportService()
    csv_bytes = await service.generate_journal_csv(mo_id, format)
    
    return Response(
        content=csv_bytes,
        media_type="text/csv",
        headers={
            "Content-Disposition": f"attachment; filename=JV-MO-{mo_id}_{format}.csv"
        }
    )
```

**Frontend UI** (PPIC Page):
```typescript
// File: frontend/src/pages/PPICPage.tsx
const handleExportJournal = async (moId: number) => {
  const format = selectedAccountingSoftware; // 'accurate' | 'zahir' | 'jurnal'
  
  const response = await api.post(
    `/mo/${moId}/export-journal?format=${format}`,
    { responseType: 'blob' }
  );
  
  // Download CSV file
  const url = window.URL.createObjectURL(new Blob([response.data]));
  const link = document.createElement('a');
  link.href = url;
  link.setAttribute('download', `JV-MO-${moId}_${format}.csv`);
  document.body.appendChild(link);
  link.click();
  
  toast.success("Journal exported! Kirim file ke Finance team.");
};

// Button di MO Detail
{mo.status === 'COMPLETED' && (
  <button onClick={() => handleExportJournal(mo.id)}>
    ğŸ’° Export Journal to Finance
  </button>
)}
```

**Workflow**:
```
1. MO Status = COMPLETED (saat semua SPK selesai)
   â†“
2. PPIC klik "Export Journal to Finance"
   â†“
3. Pilih format: Accurate / Zahir / Jurnal.id
   â†“
4. Download CSV file (auto-generate nama: JV-MO-2026-00089_accurate.csv)
   â†“
5. PPIC kirim file via Email/WA ke Finance team
   â†“
6. Finance team import CSV ke accounting software (1 klik import)
   â†“
7. Jurnal otomatis tercatat (Debit/Kredit balanced)
```

**Benefits**:
- âœ… Finance team tidak memusuhi ERP (workflow mereka tetap efisien)
- âœ… Zero manual re-entry (prevent typo & calculation error)
- âœ… Reconciliation mudah (CSV bisa di-trace back ke MO ID)
- âœ… Flexible format (support 3+ accounting software)
- âœ… Monthly closing cepat (Finance tidak tunggu data produksi)

**Status**: âš ï¸ **FASE 1 - PRIORITY HIGH** (Implementasi: Maret 2026)

---

### 1ï¸âƒ£4ï¸âƒ£ **Sales Return Receiving (Customer Returns / RMA)** ğŸ†• ğŸ“¦

**Problem Statement**:
Dokumen saat ini membahas Internal Reject dan Shipping, tapi belum ada flow untuk handle **Customer Return**. Jika IKEA mengembalikan 100 pcs boneka karena cacat setelah sampai di Swedia, bagaimana cara memasukkannya kembali ke sistem?

**Solution - RMA (Return Merchandise Authorization) Module**:

**Flow RMA**:
```
1. Customer (IKEA) report defect via email
   â†“
2. Customer Service create RMA Request di ERP
   - RMA No: RMA-2026-00001
   - Reference: Delivery Note DN-2026-00345
   - Article: [40551542] AFTONSPARV
   - Qty Return: 100 pcs (dari original 480 pcs)
   - Reason: Fabric color mismatch
   - Attachment: Photo bukti defect
   â†“
3. Manager approve RMA (verify reason & qty)
   â†“
4. Generate Return Surat Jalan (RSJ-2026-00001)
   â†“
5. Barang arrive di warehouse
   â†“
6. Warehouse Staff scan barcode RSJ
   â†“
7. QC Inspection (classify defect level)
   â†“
8. Decision:
   â”œâ”€ RESTOCK (minor defect, saleable)
   â”œâ”€ REPAIR (medium defect, fixable)
   â””â”€ SCRAP (major defect, destroy)
   â†“
9. System update inventory:
   - If RESTOCK â†’ Add to FG stock
   - If REPAIR â†’ Create SPK Repair (Finishing dept)
   - If SCRAP â†’ Write-off (loss account)
```

**Database Schema**:
```sql
CREATE TABLE rma_requests (
    id SERIAL PRIMARY KEY,
    rma_no VARCHAR(50) UNIQUE NOT NULL,
    delivery_note_id INTEGER REFERENCES delivery_notes(id),
    customer_id INTEGER REFERENCES customers(id),
    artikel_id INTEGER REFERENCES artikels(id),
    qty_return INTEGER NOT NULL,
    reason TEXT NOT NULL,
    attachment_url VARCHAR(255),  -- Photo bukti
    status VARCHAR(20) DEFAULT 'DRAFT',
    -- Status: DRAFT, APPROVED, IN_TRANSIT, RECEIVED, COMPLETED
    approved_by INTEGER REFERENCES users(id),
    approved_at TIMESTAMPTZ,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE TABLE rma_items (
    id SERIAL PRIMARY KEY,
    rma_id INTEGER REFERENCES rma_requests(id),
    item_barcode VARCHAR(100),  -- Scan barcode saat receive
    qc_result VARCHAR(20),  -- PASS, MINOR, MAJOR, CRITICAL
    decision VARCHAR(20),   -- RESTOCK, REPAIR, SCRAP
    decision_reason TEXT,
    inspected_by INTEGER REFERENCES users(id),
    inspected_at TIMESTAMPTZ
);
```

**Backend API**:
```python
# File: app/api/endpoints/rma.py
@router.post("/rma/receive/{rma_id}")
async def receive_rma_items(
    rma_id: int,
    items: List[RMAItemReceive],
    current_user: User = Depends(get_current_user)
):
    """
    Warehouse staff receive RMA items.
    Each item scanned individually with QC decision.
    """
    rma = await get_rma(rma_id)
    
    for item in items:
        # Create RMA item record
        rma_item = RMAItem(
            rma_id=rma_id,
            item_barcode=item.barcode,
            qc_result=item.qc_result,
            decision=item.decision,  # RESTOCK / REPAIR / SCRAP
            decision_reason=item.reason,
            inspected_by=current_user.id
        )
        db.add(rma_item)
        
        # Process based on decision
        if item.decision == "RESTOCK":
            # Add back to FG stock
            await add_fg_stock(
                artikel_id=rma.artikel_id,
                qty=1,
                location="FG-RETURN",
                reference=f"RMA-{rma.rma_no}"
            )
        
        elif item.decision == "REPAIR":
            # Create SPK Repair (Finishing department)
            spk = await create_spk_repair(
                artikel_id=rma.artikel_id,
                qty=1,
                defect_type=item.qc_result,
                reference=f"RMA-{rma.rma_no}"
            )
            # Notification to SPV Finishing
            await notify_spv_finishing(
                f"New SPK Repair: {spk.no_spk} from RMA-{rma.rma_no}"
            )
        
        elif item.decision == "SCRAP":
            # Write-off (accounting entry)
            await create_scrap_entry(
                artikel_id=rma.artikel_id,
                qty=1,
                cost=rma.artikel.unit_cost,
                reason=f"RMA scrap: {item.decision_reason}",
                reference=f"RMA-{rma.rma_no}"
            )
    
    # Update RMA status
    rma.status = "COMPLETED"
    await db.commit()
    
    return {"message": f"RMA-{rma.rma_no} processed: {len(items)} items"}
```

**Mobile App Screen** (Warehouse Staff):
```kotlin
// File: mobile/.../RMAReceivingScreen.kt
@Composable
fun RMAReceivingScreen(rmaId: Int) {
    Column {
        Text("ğŸ“¦ RMA Receiving: RMA-2026-00001")
        Text("Article: AFTONSPARV")
        Text("Expected: 100 pcs")
        
        // Scan barcode
        Button(onClick = { startBarcodeScanner() }) {
            Text("ğŸ“· Scan Item Barcode")
        }
        
        // After scan, show QC form
        if (scannedItem != null) {
            Card {
                Text("Barcode: ${scannedItem.barcode}")
                
                // QC Result
                RadioGroup("QC Result:") {
                    RadioButton("âœ… PASS - Minor wear")
                    RadioButton("âš ï¸ MINOR - Fabric stain (cleanable)")
                    RadioButton("ğŸ”´ MAJOR - Seam tear (repairable)")
                    RadioButton("ğŸ’€ CRITICAL - Beyond repair")
                }
                
                // Decision
                when (selectedQCResult) {
                    "PASS", "MINOR" -> {
                        Button(onClick = { decision = "RESTOCK" }) {
                            Text("âœ… RESTOCK (Add to FG Stock)")
                        }
                    }
                    "MAJOR" -> {
                        Button(onClick = { decision = "REPAIR" }) {
                            Text("ğŸ”§ REPAIR (Create SPK Repair)")
                        }
                    }
                    "CRITICAL" -> {
                        Button(onClick = { decision = "SCRAP" }) {
                            Text("ğŸ’€ SCRAP (Write-off)")
                        }
                    }
                }
                
                TextField("Reason (min 20 char):", reason)
                
                Button(onClick = { submitRMAItem() }) {
                    Text("SUBMIT")
                }
            }
        }
        
        // Progress
        Text("Processed: ${processedItems.size} / 100")
    }
}
```

**Benefits**:
- âœ… Systematic RMA handling (teratur dan terkontrol)
- âœ… QC inspection forced (classify defect level)
- âœ… Inventory accurate (RESTOCK add back to FG)
- âœ… Repair tracking (SPK Repair auto-created)
- âœ… Financial accurate (SCRAP auto write-off)
- âœ… Customer satisfaction (respond cepat, professional)

**Status**: âš ï¸ **FASE 2 - MEDIUM PRIORITY** (Implementasi: April-Mei 2026)

---

### 1ï¸âƒ£5ï¸âƒ£ **Machine Downtime Log** ğŸ†• ğŸ› ï¸

**Problem Statement**:
Pada Daily Production Input, Admin input jumlah output dan reject. Tapi jika output rendah (target 480, realisasi hanya 200), alasannya seringkali bukan karena kinerja manusia, tapi **mesin rusak** atau **listrik mati**. Tanpa log downtime, laporan efisiensi tidak fair.

**Solution - Downtime Tracking**:

**Enhancement: Daily Production Input Screen**:

**OLD UI** (tanpa downtime):
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Input Hari Ini (29-Jan):       â”‚
â”‚ Jumlah Good: [____] pcs        â”‚
â”‚ Reject: [__] pcs               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**NEW UI** (dengan downtime log) ğŸ†•:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“… Input Produksi: 29 Januari 2026                  â”‚
â”‚ SPK-SEW-2026-00156 (AFTONSPARV Sewing Body)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚ ğŸ“Š Shift: Pagi (07:00 - 15:00) - 8 jam kerja       â”‚
â”‚                                                     â”‚
â”‚ âœ… Output Good: [____] pcs                          â”‚
â”‚ âŒ Reject: [__] pcs                                 â”‚
â”‚                                                     â”‚
â”‚ ğŸ› ï¸ Machine Downtime (Opsional):                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Ada gangguan mesin/listrik hari ini?        â”‚   â”‚
â”‚ â”‚ â˜ Ya (klik untuk input detail)              â”‚   â”‚
â”‚ â”‚ â˜‘ Tidak                                     â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                     â”‚
â”‚ [EXPAND] Downtime Details:                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Downtime #1:                                â”‚   â”‚
â”‚ â”‚ â”œâ”€ Waktu Mulai: [10:30]                     â”‚   â”‚
â”‚ â”‚ â”œâ”€ Waktu Selesai: [12:15]                   â”‚   â”‚
â”‚ â”‚ â”œâ”€ Durasi: 1.75 jam (auto-calculate)        â”‚   â”‚
â”‚ â”‚ â”œâ”€ Kategori: [Mesin Rusak â–¼]                â”‚   â”‚
â”‚ â”‚ â”‚   Options:                                 â”‚   â”‚
â”‚ â”‚ â”‚   - Mesin Rusak                            â”‚   â”‚
â”‚ â”‚ â”‚   - Listrik Mati                           â”‚   â”‚
â”‚ â”‚ â”‚   - Material Shortage                      â”‚   â”‚
â”‚ â”‚ â”‚   - Waiting Approval                       â”‚   â”‚
â”‚ â”‚ â”‚   - Others                                 â”‚   â”‚
â”‚ â”‚ â””â”€ Detail: [_____________________]          â”‚   â”‚
â”‚ â”‚   (Misal: "Mesin Jahit No.5 Dinamo         â”‚   â”‚
â”‚ â”‚            Terbakar, Teknisi repair")       â”‚   â”‚
â”‚ â”‚                                              â”‚   â”‚
â”‚ â”‚ [+ ADD DOWNTIME] (jika ada lebih dari 1)    â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                     â”‚
â”‚ ğŸ“Š Working Time Calculation:                       â”‚
â”‚ â”œâ”€ Total Shift: 8.0 jam                            â”‚
â”‚ â”œâ”€ Downtime: 1.75 jam                              â”‚
â”‚ â”œâ”€ Actual Working: 6.25 jam (78.1%)                â”‚
â”‚ â””â”€ Target Output (adjusted): 375 pcs (dari 480)   â”‚
â”‚                                                     â”‚
â”‚ ğŸ’¡ Performance Analysis:                           â”‚
â”‚ If Output = 200 pcs:                               â”‚
â”‚ â”œâ”€ vs Original Target (480): 41.7% âŒ (Bad)       â”‚
â”‚ â””â”€ vs Adjusted Target (375): 53.3% âš ï¸ (Fair)     â”‚
â”‚                                                     â”‚
â”‚ [SAVE] [CANCEL]                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Database Schema**:
```sql
CREATE TABLE machine_downtime_logs (
    id SERIAL PRIMARY KEY,
    spk_id INTEGER REFERENCES spk(id),
    daily_production_id INTEGER REFERENCES daily_production_input(id),
    downtime_date DATE NOT NULL,
    start_time TIME NOT NULL,
    end_time TIME NOT NULL,
    duration_hours DECIMAL(4,2) GENERATED ALWAYS AS 
        (EXTRACT(EPOCH FROM (end_time - start_time)) / 3600) STORED,
    category VARCHAR(50) NOT NULL,
    -- Category: 'machine_breakdown', 'power_outage', 'material_shortage',
    --           'waiting_approval', 'others'
    detail_description TEXT NOT NULL,
    machine_number VARCHAR(50),  -- Misal: "Sewing Machine #5"
    reported_by INTEGER REFERENCES users(id),
    verified_by INTEGER REFERENCES users(id),  -- SPV verify
    verified_at TIMESTAMPTZ,
    created_at TIMESTAMPTZ DEFAULT NOW(),
    
    CONSTRAINT ck_duration_positive CHECK (end_time > start_time)
);

CREATE INDEX idx_downtime_spk ON machine_downtime_logs(spk_id);
CREATE INDEX idx_downtime_date ON machine_downtime_logs(downtime_date);
```

**Backend Logic**:
```python
# File: app/services/production_service.py
class ProductionService:
    async def calculate_adjusted_target(
        self,
        spk_id: int,
        date: datetime.date
    ) -> dict:
        """
        Adjust target produksi based on downtime.
        Untuk performance evaluation yang lebih fair.
        """
        spk = await get_spk(spk_id)
        shift_hours = 8.0  # Standard shift duration
        
        # Get downtime logs for this date
        downtimes = await db.query(MachineDowntimeLog).filter(
            MachineDowntimeLog.spk_id == spk_id,
            MachineDowntimeLog.downtime_date == date
        ).all()
        
        total_downtime = sum(d.duration_hours for d in downtimes)
        actual_working_hours = shift_hours - total_downtime
        working_percentage = (actual_working_hours / shift_hours) * 100
        
        # Adjust target proportionally
        daily_target = spk.target_qty / spk.estimated_days
        adjusted_target = daily_target * (actual_working_hours / shift_hours)
        
        return {
            "original_target": daily_target,
            "adjusted_target": round(adjusted_target),
            "shift_hours": shift_hours,
            "downtime_hours": total_downtime,
            "actual_working_hours": actual_working_hours,
            "working_percentage": round(working_percentage, 1),
            "downtime_logs": downtimes
        }
```

**Report Enhancement** - KPI Dashboard:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š PRODUCTION EFFICIENCY REPORT - JANUARI 2026          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚ Departemen: Sewing                                       â”‚
â”‚ SPK: SPK-SEW-2026-00156 (AFTONSPARV)                    â”‚
â”‚                                                          â”‚
â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                          â”‚
â”‚ ğŸ“ˆ Output Performance:                                   â”‚
â”‚ â”œâ”€ Target: 480 pcs                                      â”‚
â”‚ â”œâ”€ Actual: 465 pcs                                      â”‚
â”‚ â”œâ”€ Achievement (RAW): 96.9% âœ…                          â”‚
â”‚ â””â”€ Achievement (ADJUSTED): 102.7% âœ…âœ… (after downtime) â”‚
â”‚                                                          â”‚
â”‚ ğŸ› ï¸ Downtime Analysis:                                    â”‚
â”‚ â”œâ”€ Total Working Days: 8 hari                           â”‚
â”‚ â”œâ”€ Total Shift Hours: 64 jam (8 hari Ã— 8 jam)          â”‚
â”‚ â”œâ”€ Total Downtime: 5.5 jam (8.6%)                       â”‚
â”‚ â”‚   Breakdown:                                           â”‚
â”‚ â”‚   â”œâ”€ Machine Breakdown: 3.5 jam (63.6%)               â”‚
â”‚ â”‚   â”‚   - Mesin Jahit #5 Dinamo: 1.75 jam (Day 3)       â”‚
â”‚ â”‚   â”‚   - Mesin Jahit #3 Needle Break: 1.0 jam (Day 6)  â”‚
â”‚ â”‚   â”‚   - Mesin Jahit #7 Thread Jam: 0.75 jam (Day 7)   â”‚
â”‚ â”‚   â”œâ”€ Power Outage: 1.5 jam (27.3%)                    â”‚
â”‚ â”‚   â”‚   - PLN Maintenance: 1.5 jam (Day 4)              â”‚
â”‚ â”‚   â””â”€ Material Shortage: 0.5 jam (9.1%)                â”‚
â”‚ â”‚       - Waiting Thread [ATR10500]: 0.5 jam (Day 5)    â”‚
â”‚ â””â”€ Actual Working Hours: 58.5 jam (91.4%)               â”‚
â”‚                                                          â”‚
â”‚ ğŸ’¡ Conclusion:                                           â”‚
â”‚ Team performance EXCELLENT (102.7% vs adjusted target).  â”‚
â”‚ Low output disebabkan downtime, bukan kinerja Admin.  â”‚
â”‚                                                          â”‚
â”‚ ğŸ”§ Action Items:                                         â”‚
â”‚ â”œâ”€ Schedule preventive maintenance Mesin #5 & #3        â”‚
â”‚ â”œâ”€ Stock safety buffer untuk Thread [ATR10500]          â”‚
â”‚ â””â”€ Coordinate dengan PLN untuk advance notice           â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Benefits**:
- âœ… Fair performance evaluation (downtime = not Admin's fault)
- âœ… Root cause analysis (machine vs human vs external)
- âœ… Preventive maintenance trigger (track machine breakdown pattern)
- âœ… Cost analysis (downtime = lost productivity = money)
- âœ… Management decision data (invest in backup generator? new machine?)

**Status**: âš ï¸ **FASE 1 - MEDIUM PRIORITY** (Implementasi: April 2026)

---

### 1ï¸âƒ£6ï¸âƒ£ **Relabeling Request (Change Label Approval)** ğŸ†• ğŸ·ï¸

**Problem Statement**:
Setelah boneka masuk Sewing, dipasang label (datestamp + destinasi). Tapi sering ada **kelebihan produksi** (MO 500 pcs, tapi actual 520 pcs). Sisa 20 pcs boneka dengan label lama (Week 5, Ã„lmhult) perlu **diganti label** untuk memenuhi PO baru (Week 6, Torsvik). Perubahan label ini harus **dengan approval Manager Produksi** untuk audit trail IKEA.

**Business Flow - Real Case Example**:
```
Situation:
1. PO-001 (Week 5, Ã„lmhult): Order 480 pcs âœ… SHIPPED
2. Warehouse Finishing: Masih ada sisa 20 pcs dengan label:
   - Current Label: "Week 5, Destination: Ã„lmhult"
3. PO-002 (Week 6, Torsvik): Order 500 pcs, butuh tambahan 20 pcs
4. Solusi: Ganti label 20 pcs sisa â†’ "Week 6, Torsvik"

Problem:
âŒ Tidak bisa ganti label sembarangan (audit trail IKEA requirement)
âŒ Perlu approval Manager Produksi
âŒ Inventory allocation harus update (PO-001 â†’ PO-002)
```

**Solution - Relabeling Request Workflow**:

**STEP 1: Admin Warehouse Finishing Request Relabel**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ·ï¸ RELABELING REQUEST FORM                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚ Artikel: [AFTONSPARV] soft toy w astronaut suit 28 bear â”‚
â”‚ Location: Warehouse Finishing (Stuffed Body area)        â”‚
â”‚                                                          â”‚
â”‚ ğŸ“¦ Quantity to Relabel: [20] pcs                         â”‚
â”‚                                                          â”‚
â”‚ ğŸ·ï¸ CURRENT LABEL (OLD):                                  â”‚
â”‚ â”œâ”€ Week: Week 5                                          â”‚
â”‚ â”œâ”€ Destination: Ã„lmhult                                  â”‚
â”‚ â””â”€ PO Reference: PO-001 (Status: SHIPPED âœ…)             â”‚
â”‚                                                          â”‚
â”‚ ğŸ·ï¸ NEW LABEL (TARGET):                                   â”‚
â”‚ â”œâ”€ Week: [Week 6 â–¼]                                      â”‚
â”‚ â”œâ”€ Destination: [Torsvik â–¼]                              â”‚
â”‚ â””â”€ PO Reference: [PO-002 â–¼] (Status: IN PROGRESS)       â”‚
â”‚                                                          â”‚
â”‚ ğŸ“ Reason (WAJIB, min 20 char):                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ PO-001 sudah selesai shipped dengan 480 pcs.       â”‚  â”‚
â”‚ â”‚ Sisa 20 pcs dialokasi ke PO-002 untuk memenuhi     â”‚  â”‚
â”‚ â”‚ kekurangan order Week 6 Torsvik.                    â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                          â”‚
â”‚ âš ï¸ Warning:                                              â”‚
â”‚ - Label fisik akan dicetak ulang (biaya Rp 500/label)   â”‚
â”‚ - Worker harus copot label lama & pasang label baru     â”‚
â”‚ - Inventory allocation akan berubah (audit log)          â”‚
â”‚                                                          â”‚
â”‚ [SUBMIT REQUEST] [CANCEL]                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**STEP 2: Manager Produksi Approve/Reject**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”” NOTIFICATION - RELABELING REQUEST                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚ ğŸ·ï¸ Request ID: REL-2026-00015                            â”‚
â”‚ ğŸ“… Requested: 5 Feb 2026, 14:30                          â”‚
â”‚ ğŸ‘¤ Requested by: admin_warehouse_01 (Budi S.)            â”‚
â”‚                                                          â”‚
â”‚ ğŸ“¦ Details:                                              â”‚
â”‚ â”œâ”€ Artikel: [40551542] AFTONSPARV                       â”‚
â”‚ â”œâ”€ Quantity: 20 pcs                                     â”‚
â”‚ â”œâ”€ Old Label: Week 5, Ã„lmhult (PO-001)                  â”‚
â”‚ â””â”€ New Label: Week 6, Torsvik (PO-002)                  â”‚
â”‚                                                          â”‚
â”‚ ğŸ“ Reason:                                               â”‚
â”‚ "PO-001 sudah selesai shipped dengan 480 pcs.           â”‚
â”‚  Sisa 20 pcs dialokasi ke PO-002 untuk memenuhi         â”‚
â”‚  kekurangan order Week 6 Torsvik."                       â”‚
â”‚                                                          â”‚
â”‚ âœ… Verification:                                         â”‚
â”‚ â”œâ”€ PO-001 Status: SHIPPED (31 Jan 2026) âœ…              â”‚
â”‚ â”œâ”€ PO-001 Qty: 480/480 pcs (100%) âœ…                    â”‚
â”‚ â”œâ”€ PO-002 Status: IN PROGRESS                           â”‚
â”‚ â”œâ”€ PO-002 Qty: 480/500 pcs (96%, need 20 pcs) âœ…        â”‚
â”‚ â””â”€ Warehouse Stock: 20 pcs available (Week 5 label) âœ…  â”‚
â”‚                                                          â”‚
â”‚ ğŸ’° Cost Impact:                                          â”‚
â”‚ â”œâ”€ Label printing: 20 Ã— Rp 500 = Rp 10,000              â”‚
â”‚ â”œâ”€ Labor (re-labeling): 20 Ã— 2 min = 40 min             â”‚
â”‚ â””â”€ Total Cost: ~Rp 15,000                                â”‚
â”‚                                                          â”‚
â”‚ ğŸ” Audit Trail:                                          â”‚
â”‚ â”œâ”€ Inventory akan update (allocation change)            â”‚
â”‚ â”œâ”€ Old label history tetap tersimpan                    â”‚
â”‚ â””â”€ Relabeling log akan tercatat (IKEA audit)            â”‚
â”‚                                                          â”‚
â”‚ Decision:                                                â”‚
â”‚ [âœ… APPROVE] [âŒ REJECT] [ğŸ’¬ REQUEST INFO]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**STEP 3: System Execute Relabeling (if approved)**
```yaml
System Actions:
1. Update Inventory Allocation:
   - 20 pcs: PO-001 (Week 5, Ã„lmhult) â†’ PO-002 (Week 6, Torsvik)
   
2. Generate Relabel Work Order:
   - Print 20 new labels (Week 6, Torsvik)
   - Assign to worker: "Copot label lama, pasang label baru"
   - Estimated time: 40 menit (2 min/pcs)
   
3. Create Audit Log:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ RELABELING LOG - REL-2026-00015                â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ Artikel: AFTONSPARV                            â”‚
   â”‚ Qty: 20 pcs                                    â”‚
   â”‚ Old Label: Week 5, Ã„lmhult (PO-001)            â”‚
   â”‚ New Label: Week 6, Torsvik (PO-002)            â”‚
   â”‚ Requested by: admin_warehouse_01 (Budi S.)     â”‚
   â”‚ Requested at: 5 Feb 2026, 14:30                â”‚
   â”‚ Approved by: manager_prod_01 (Ibu Siti)        â”‚
   â”‚ Approved at: 5 Feb 2026, 15:45                 â”‚
   â”‚ Executed at: 5 Feb 2026, 16:20                 â”‚
   â”‚ Reason: "PO-001 selesai, sisa â†’ PO-002"        â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   
4. Notification:
   - Admin Warehouse: "Relabel approved, silakan cetak label baru"
   - PPIC: "Inventory allocation updated (20 pcs â†’ PO-002)"
   - Manager: "Relabeling completed successfully"
```

**Database Schema**:
```sql
CREATE TABLE relabeling_requests (
    id SERIAL PRIMARY KEY,
    request_number VARCHAR(50) UNIQUE NOT NULL, -- REL-2026-00015
    artikel_id INTEGER REFERENCES artikel(id),
    qty_to_relabel INTEGER NOT NULL,
    
    -- Old Label Info
    old_week VARCHAR(10) NOT NULL,
    old_destination VARCHAR(100) NOT NULL,
    old_po_id INTEGER REFERENCES purchase_orders(id),
    
    -- New Label Info
    new_week VARCHAR(10) NOT NULL,
    new_destination VARCHAR(100) NOT NULL,
    new_po_id INTEGER REFERENCES purchase_orders(id),
    
    -- Workflow
    reason TEXT NOT NULL,
    status VARCHAR(20) NOT NULL DEFAULT 'PENDING',
    -- Status: PENDING, APPROVED, REJECTED, EXECUTED, CANCELLED
    
    -- Audit Trail
    requested_by INTEGER REFERENCES users(id),
    requested_at TIMESTAMPTZ DEFAULT NOW(),
    approved_by INTEGER REFERENCES users(id),
    approved_at TIMESTAMPTZ,
    rejected_reason TEXT,
    executed_at TIMESTAMPTZ,
    executed_by INTEGER REFERENCES users(id),
    
    -- Cost Tracking
    label_cost DECIMAL(10,2), -- Biaya cetak label
    labor_minutes INTEGER,    -- Estimasi waktu re-label
    
    CONSTRAINT ck_different_label CHECK (
        old_week != new_week OR old_destination != new_destination
    ),
    CONSTRAINT ck_qty_positive CHECK (qty_to_relabel > 0)
);

CREATE INDEX idx_relabel_status ON relabeling_requests(status);
CREATE INDEX idx_relabel_artikel ON relabeling_requests(artikel_id);
CREATE INDEX idx_relabel_date ON relabeling_requests(requested_at);
```

**Backend API**:
```python
# File: app/api/relabeling.py
from fastapi import APIRouter, Depends
from app.models.relabeling import RelabelingRequest
from app.services.relabeling_service import RelabelingService

router = APIRouter(prefix="/api/relabeling", tags=["relabeling"])

@router.post("/requests")
async def create_relabeling_request(
    request: RelabelingRequestCreate,
    current_user: User = Depends(get_current_user)
):
    """
    Admin Warehouse Finishing create relabeling request.
    Required permission: can_request_relabel
    """
    # Validate: old_po sudah selesai
    old_po = await get_po(request.old_po_id)
    if old_po.status != "SHIPPED":
        raise HTTPException(400, "Old PO must be SHIPPED")
    
    # Validate: new_po masih IN_PROGRESS
    new_po = await get_po(request.new_po_id)
    if new_po.status not in ["IN_PROGRESS", "DRAFT"]:
        raise HTTPException(400, "New PO must be IN_PROGRESS")
    
    # Validate: stock tersedia di warehouse
    stock = await check_warehouse_stock(
        artikel_id=request.artikel_id,
        week=request.old_week,
        destination=request.old_destination
    )
    if stock < request.qty_to_relabel:
        raise HTTPException(400, f"Stock tidak cukup: {stock} < {request.qty_to_relabel}")
    
    # Create request
    relabel_req = await RelabelingService.create_request(
        data=request,
        requested_by=current_user.id
    )
    
    # Notify Manager Produksi
    await notify_manager_produksi(
        title="Relabeling Request",
        message=f"REL-{relabel_req.request_number}: {request.qty_to_relabel} pcs {request.artikel.name}",
        link=f"/relabeling/requests/{relabel_req.id}"
    )
    
    return relabel_req

@router.post("/requests/{id}/approve")
async def approve_relabeling(
    id: int,
    current_user: User = Depends(require_role("Manager Production"))
):
    """
    Manager Produksi approve relabeling request.
    """
    relabel_req = await get_relabeling_request(id)
    
    if relabel_req.status != "PENDING":
        raise HTTPException(400, "Request sudah diproses")
    
    # Approve & execute
    await RelabelingService.approve_and_execute(
        request_id=id,
        approved_by=current_user.id
    )
    
    return {"message": "Relabeling approved & executed", "request_id": id}
```

**Mobile App Enhancement** (Android - Warehouse Finishing):
```kotlin
// File: mobile/.../RelabelingScreen.kt
@Composable
fun RelabelingRequestScreen(
    viewModel: RelabelingViewModel = hiltViewModel()
) {
    Column {
        // Scan boneka yang mau di-relabel
        Button(onClick = { viewModel.startBarcodeScanning() }) {
            Text("ğŸ“· Scan Boneka (20 pcs)")
        }
        
        // Display current label info
        if (viewModel.scannedItems.isNotEmpty()) {
            Card {
                Text("Current Label:")
                Text("Week: ${viewModel.currentWeek}")
                Text("Destination: ${viewModel.currentDestination}")
            }
            
            // Select new PO
            DropdownMenu(
                label = "New PO",
                items = viewModel.availablePOs
            )
            
            // Input reason
            TextField(
                value = viewModel.reason,
                onValueChange = { viewModel.reason = it },
                label = "Reason (min 20 char)",
                minLines = 3
            )
            
            // Submit button
            Button(
                onClick = { viewModel.submitRelabelingRequest() },
                enabled = viewModel.canSubmit()
            ) {
                Text("Submit Request")
            }
        }
    }
}
```

**Benefits**:
- âœ… **Audit Trail Lengkap**: Semua perubahan label tercatat (IKEA requirement)
- âœ… **Prevent Fraud**: Tidak bisa ganti label sembarangan tanpa approval
- âœ… **Inventory Accuracy**: Allocation boneka ke PO yang tepat
- âœ… **Cost Tracking**: Track biaya label printing & labor
- âœ… **Compliance Ready**: IKEA audit trail requirement fulfilled
- âœ… **Real-time Notification**: Manager dapat approve dari HP

**Status**: âš ï¸ **FASE 2 - HIGH PRIORITY** (Implementasi: Juni-Juli 2027)

**Reason HIGH PRIORITY**: 
Perubahan label sering terjadi (3-5 kali per bulan) karena:
- Kelebihan produksi (overproduction buffer)
- PO customer berubah mendadak
- Allocation adjustment dari PPIC

Tanpa system approval, rawan:
- âŒ Label salah kirim (Week 5 kirim ke Torsvik, harusnya Ã„lmhult)
- âŒ Kekacauan inventori (stock tidak match dengan PO)
- âŒ IKEA complaint (wrong week/destination)
- âŒ No audit trail (tidak bisa trace siapa yang ubah)

---

### 1ï¸âƒ£7ï¸âƒ£ **Training / Sandbox Mode** ğŸ†• ğŸ“

**Problem Statement**:
Karyawan baru butuh latihan langsung di aplikasi HP tanpa takut merusak data production. Staging environment ada, tapi tidak practical untuk training 50+ users (akses terbatas, harus VPN, dll).

**Solution - Training Mode in Mobile App**:

**Login Screen Enhancement**:
```kotlin
// File: mobile/.../LoginScreen.kt
@Composable
fun LoginScreen() {
    Column {
        // ... username, password fields ...
        
        // ğŸ†• Training Mode Toggle
        Row(verticalAlignment = Alignment.CenterVertically) {
            Checkbox(
                checked = isTrainingMode,
                onCheckedChange = { isTrainingMode = it }
            )
            Text(
                text = "ğŸ“ Training Mode (Data tidak masuk sistem)",
                style = MaterialTheme.typography.bodyMedium,
                color = if (isTrainingMode) Color(0xFFFF9800) else Color.Gray
            )
        }
        
        // Info tooltip
        if (isTrainingMode) {
            Card(
                backgroundColor = Color(0xFFFFF3E0),
                modifier = Modifier.padding(8.dp)
            ) {
                Text(
                    text = "âš ï¸ Training Mode Active:\n" +
                           "â€¢ All data will be saved to dummy database\n" +
                           "â€¢ Data will be auto-reset every 24 hours\n" +
                           "â€¢ Safe for practice without risk",
                    style = MaterialTheme.typography.bodySmall,
                    color = Color(0xFFE65100)
                )
            }
        }
        
        Button(onClick = { login(isTrainingMode) }) {
            Text(if (isTrainingMode) "LOGIN (TRAINING)" else "LOGIN")
        }
    }
}
```

**App Header Banner** (when Training Mode active):
```kotlin
@Composable
fun TrainingModeBanner() {
    if (AppState.isTrainingMode) {
        Box(
            modifier = Modifier
                .fillMaxWidth()
                .background(Color(0xFFFF9800))
                .padding(8.dp)
        ) {
            Row(
                modifier = Modifier.fillMaxWidth(),
                horizontalArrangement = Arrangement.Center
            ) {
                Icon(
                    imageVector = Icons.Default.School,
                    contentDescription = "Training",
                    tint = Color.White
                )
                Spacer(modifier = Modifier.width(8.dp))
                Text(
                    text = "ğŸ“ TRAINING MODE - Data Latihan (Not Real)",
                    color = Color.White,
                    fontWeight = FontWeight.Bold
                )
            }
        }
    }
}
```

**Backend Implementation**:
```python
# File: app/api/dependencies.py
def get_db_session(is_training_mode: bool = False):
    """
    Return different database session based on mode.
    Training mode uses separate schema/database.
    """
    if is_training_mode:
        # Connect to training database
        engine = create_async_engine(
            "postgresql://user:pass@localhost/erp_training"
        )
    else:
        # Connect to production database
        engine = create_async_engine(
            "postgresql://user:pass@localhost/erp_production"
        )
    
    return SessionLocal(bind=engine)

# Middleware to detect training mode
@app.middleware("http")
async def training_mode_middleware(request: Request, call_next):
    # Check if request has training mode flag
    is_training = request.headers.get("X-Training-Mode") == "true"
    
    if is_training:
        # Inject training database session
        request.state.db_session = get_db_session(is_training_mode=True)
    else:
        # Normal production session
        request.state.db_session = get_db_session(is_training_mode=False)
    
    response = await call_next(request)
    return response
```

**Database Setup**:
```sql
-- Create separate training database
CREATE DATABASE erp_training;

-- Run migrations (same schema as production)
alembic upgrade head

-- Seed with realistic dummy data
INSERT INTO users (username, password, role) VALUES
    ('trainer_01', 'hashed_password', 'Admin Produksi'),
    ('trainer_02', 'hashed_password', 'Admin Cutting'),
    ('trainer_03', 'hashed_password', 'Warehouse Staff');

INSERT INTO artikels (code, name) VALUES
    ('[TRAIN001] DUMMY BEAR', 'Training Product 1'),
    ('[TRAIN002] DUMMY DOLL', 'Training Product 2');

-- etc...
```

**Auto-Reset Script** (Cron Job):
```bash
#!/bin/bash
# File: /scripts/reset-training-db.sh
# Cron: 0 3 * * * (Run every day at 03:00 AM)

echo "[$(date)] Resetting training database..."

# Drop training database
psql -U postgres -c "DROP DATABASE IF EXISTS erp_training;"

# Recreate from template
psql -U postgres -c "CREATE DATABASE erp_training;"

# Run migrations
cd /var/www/erp-backend
alembic upgrade head

# Seed dummy data
psql -U postgres -d erp_training -f /scripts/training-seed.sql

echo "[$(date)] Training database reset complete!"
```

**Benefits**:
- âœ… Onboarding cepat (new hire bisa practice langsung)
- âœ… Zero risk (data training tidak masuk production)
- âœ… Realistic training (UI & flow persis sama dengan production)
- âœ… Self-service (trainer tidak perlu setup manual setiap kali)
- âœ… Scalable (50+ trainees bisa practice bersamaan)

**Status**: âš ï¸ **FASE 2 - LOW PRIORITY** (Implementasi: Mei-Juni 2026)

---

### 1ï¸âƒ£7ï¸âƒ£ **Business Continuity Plan (Paper Fallback SOP)** ğŸ†• ğŸ“‹

**Problem Statement**:
Apa yang terjadi jika:
- Server mati total (hardware failure)
- WiFi pabrik putus (ISP down)
- HP Admin rusak (battery meledak, screen crack)
- Ransomware attack (data encrypted)

**Produksi tidak boleh berhenti!** Tapi tanpa sistem, bagaimana cara record progress?

**Solution - Hybrid System (Digital + Paper Fallback)**:

#### **Prosedur Darurat (Emergency SOP)**:

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“‹ STANDARD OPERATING PROCEDURE (SOP)
TITLE: EMERGENCY PRODUCTION RECORDING (PAPER FALLBACK)
REVISION: 1.0
EFFECTIVE DATE: 1 Februari 2026
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. WHEN TO USE THIS SOP
   Aktifkan Paper Fallback jika:
   â”œâ”€ ERP System down >30 menit
   â”œâ”€ Internet/WiFi down >1 jam
   â”œâ”€ HP Admin rusak (tidak ada backup device)
   â””â”€ Emergency situation (fire drill, power outage total)

2. PAPER FORMS LOCATION
   â”œâ”€ Setiap departemen punya LOGBOOK CADANGAN
   â”œâ”€ Lokasi: Lemari SPV (terkunci)
   â”œâ”€ Format: Printed forms (persis sama dengan tampilan Android)
   â””â”€ Stock: 1 bulan supply (refresh tiap bulan)

3. AKTIVASI PROSEDUR
   Step 1: SPV declare "PAPER MODE ACTIVE"
   Step 2: Admin ambil logbook dari lemari
   Step 3: Catat manual (ballpoint, tulis jelas)
   Step 4: SPV sign-off tiap halaman (setiap 2 jam)

4. PAPER FORM TEMPLATES

   A. DAILY PRODUCTION INPUT FORM
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ PT QUTY KARUNIA - DAILY PRODUCTION LOG         â”‚
   â”‚ (EMERGENCY PAPER FALLBACK)                     â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ Date: ________________  Shift: â˜ Pagi â˜ Sore  â”‚
   â”‚ Department: ______________  Admin: ___________  â”‚
   â”‚ SPK No: ________________  Article: ___________  â”‚
   â”‚                                                â”‚
   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
   â”‚ â”‚ OUTPUT:                                  â”‚   â”‚
   â”‚ â”‚ Good Quantity: [_______] pcs             â”‚   â”‚
   â”‚ â”‚ Reject Quantity: [____] pcs              â”‚   â”‚
   â”‚ â”‚ Reject Reason:                           â”‚   â”‚
   â”‚ â”‚ â˜ Jahitan tidak rapi                      â”‚   â”‚
   â”‚ â”‚ â˜ Fabric defect                           â”‚   â”‚
   â”‚ â”‚ â˜ Material shortage                       â”‚   â”‚
   â”‚ â”‚ â˜ Others: ___________________            â”‚   â”‚
   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
   â”‚                                                â”‚
   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
   â”‚ â”‚ MATERIAL USED (Major Items Only):        â”‚   â”‚
   â”‚ â”‚ [Material Code] [Qty] [UOM]             â”‚   â”‚
   â”‚ â”‚ ______________ [____] [____]             â”‚   â”‚
   â”‚ â”‚ ______________ [____] [____]             â”‚   â”‚
   â”‚ â”‚ ______________ [____] [____]             â”‚   â”‚
   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
   â”‚                                                â”‚
   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
   â”‚ â”‚ DOWNTIME (If Any):                       â”‚   â”‚
   â”‚ â”‚ Start: [____] End: [____] Durasi: [___h] â”‚   â”‚
   â”‚ â”‚ Reason: ____________________________     â”‚   â”‚
   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
   â”‚                                                â”‚
   â”‚ Notes: ______________________________________  â”‚
   â”‚ ______________________________________________ â”‚
   â”‚                                                â”‚
   â”‚ Reported by: ______________  Time: _________   â”‚
   â”‚ (Admin Signature)                              â”‚
   â”‚                                                â”‚
   â”‚ Verified by: _______________  Time: ________   â”‚
   â”‚ (SPV Signature)                                â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   B. BARCODE SCAN FALLBACK FORM
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ FINISHGOOD RECEIVING LOG (MANUAL)              â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ Date: ____________  Warehouse Staff: _________  â”‚
   â”‚ MO No: ___________  Article: _________________  â”‚
   â”‚                                                â”‚
   â”‚ CARTON LIST:                                   â”‚
   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
   â”‚ â”‚ Carton # â”‚ Barcode  â”‚ Qty/CTN  â”‚ Conditionâ”‚  â”‚
   â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
   â”‚ â”‚ 1        â”‚ FG-xxx   â”‚ 60 pcs   â”‚ â˜‘ OK    â”‚  â”‚
   â”‚ â”‚ 2        â”‚ FG-xxx   â”‚ 60 pcs   â”‚ â˜‘ OK    â”‚  â”‚
   â”‚ â”‚ 3        â”‚ FG-xxx   â”‚ 60 pcs   â”‚ â˜‘ OK    â”‚  â”‚
   â”‚ â”‚ 4        â”‚ FG-xxx   â”‚ 60 pcs   â”‚ â˜‘ OK    â”‚  â”‚
   â”‚ â”‚ 5        â”‚ FG-xxx   â”‚ 60 pcs   â”‚ â˜‘ OK    â”‚  â”‚
   â”‚ â”‚ 6        â”‚ FG-xxx   â”‚ 60 pcs   â”‚ â˜‘ OK    â”‚  â”‚
   â”‚ â”‚ 7        â”‚ FG-xxx   â”‚ 60 pcs   â”‚ â˜‘ OK    â”‚  â”‚
   â”‚ â”‚ 8        â”‚ FG-xxx   â”‚ 45 pcs   â”‚ â˜‘ OK    â”‚  â”‚
   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
   â”‚                                                â”‚
   â”‚ Total: 8 CTN = 465 pcs                         â”‚
   â”‚                                                â”‚
   â”‚ Received by: ___________  Time: ____________   â”‚
   â”‚ Checked by (QC): ________  Time: ___________   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

5. DATA ENTRY SUSULAN (BACKDATE INPUT)
   Saat sistem online kembali:
   
   Step 1: SPV scan paper forms (photo dengan HP)
   Step 2: SPV buka ERP â†’ pilih "Backdate Input Mode"
   Step 3: Input data dari paper ke sistem (1 by 1)
   Step 4: System flag: "Backdate Entry (from paper log)"
   Step 5: SPV approve (dengan upload photo bukti paper)
   Step 6: Manager verify & final approve
   Step 7: Paper disimpan di arsip (min 1 tahun)

6. APPROVAL WORKFLOW (BACKDATE)
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ âš ï¸ BACKDATE INPUT REQUEST                  â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ SPK: SPK-SEW-2026-00156                     â”‚
   â”‚ Date: 30-Jan-2026 (Yesterday)              â”‚
   â”‚ Reason: System down (server maintenance)   â”‚
   â”‚ Duration: 30-Jan 08:00 - 30-Jan 16:00      â”‚
   â”‚                                             â”‚
   â”‚ Data Input:                                 â”‚
   â”‚ â”œâ”€ Good: 155 pcs                           â”‚
   â”‚ â”œâ”€ Reject: 5 pcs                           â”‚
   â”‚ â””â”€ Material: [ATR10500] 38,640 CM          â”‚
   â”‚                                             â”‚
   â”‚ Attachment: paper_log_scan.jpg             â”‚
   â”‚ [VIEW ATTACHMENT]                           â”‚
   â”‚                                             â”‚
   â”‚ Input by: admin_sewing_12 (SPV)            â”‚
   â”‚ Time: 31-Jan-2026 08:15                     â”‚
   â”‚                                             â”‚
   â”‚ Manager Decision:                           â”‚
   â”‚ â˜ APPROVE (data valid, match paper log)    â”‚
   â”‚ â˜ REJECT (suspicious, need investigation)  â”‚
   â”‚                                             â”‚
   â”‚ Comments: ______________________________    â”‚
   â”‚ [APPROVE] [REJECT]                          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

7. TRAINING REQUIREMENT
   â”œâ”€ Semua Admin wajib training "Paper Fallback" (1 jam)
   â”œâ”€ Drill test tiap 3 bulan (simulate system down)
   â””â”€ Paper forms diupdate setiap ada perubahan UI sistem

8. RESPONSIBLE PARTIES
   â”œâ”€ IT Admin: Maintain logbook stock, update forms
   â”œâ”€ SPV: Activate paper mode, verify data entry
   â”œâ”€ Manager: Approve backdate input
   â””â”€ Director: Receive incident report

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
DOCUMENT CONTROL
Prepared by: IT Admin
Approved by: Director
Next Review Date: 1 Agustus 2026
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

**Implementation Checklist**:
```
â˜ 1. Design paper forms (mirror Android UI)
â˜ 2. Print 500 copies (100 per dept Ã— 5 dept)
â˜ 3. Laminate master copy (reference di dinding)
â˜ 4. Prepare lockable cabinet di setiap dept
â˜ 5. Training session untuk semua Admin (2 jam)
â˜ 6. Drill test #1 (simulate 4 jam system down)
â˜ 7. Backdate input feature development
â˜ 8. SOP distribution (print + PDF)
â˜ 9. Quarterly review schedule
â˜ 10. Emergency contact list (IT support 24/7)
```

**Benefits**:
- âœ… Business continuity guaranteed (produksi tidak stop)
- âœ… Zero data loss (paper backup â†’ input susulan)
- âœ… Audit trail intact (backdate entry flagged & approved)
- âœ… Peace of mind (management tahu ada plan B)
- âœ… Compliance ready (auditor happy dengan SOP tertulis)

**Status**: âš ï¸ **FASE 1 - HIGH PRIORITY** (Implementasi: Februari-Maret 2026 - Before Go-Live)

---

## <a name="comparison-odoo"></a>âš–ï¸ 10. PERBANDINGAN DENGAN ODOO

### A. **Apa itu Odoo?**

**Odoo** adalah ERP populer yang dipakai di seluruh dunia (open source).  
Fitur lengkap: Manufacturing, Inventory, Sales, Accounting, HR, dll.

---

### B. **Perbandingan Fitur**

| **Fitur** | **ERP Quty Karunia** | **Odoo Manufacturing** |
|-----------|----------------------|------------------------|
| **ğŸ†• PO Label/Kain Flexible Production** | âœ… Ya (Dual mode: PARTIAL dengan PO Kain untuk Cutting early start [-3 to -5 days], RELEASED dengan PO Label untuk full production, auto-upgrade system, department blocking enforcement) | âŒ Tidak ada (MO bisa dibuat tanpa trigger validation, no department blocking logic) |
| **ğŸ†• Warehouse Finishing Internal Conversion** | âœ… Ya (2-stage dengan dual inventory tracking) | âŒ Tidak ada konsep gudang bayangan internal |
| **ğŸ†• UOM Conversion Critical Points** | âœ… Auto-calculate dengan validation (Cutting: Yardâ†’Pcs, FG: Boxâ†’Pcs) | âš ï¸ Ada UOM, tapi tidak ada auto-validation per stage |
| **BOM Management** | âœ… 2 jenis (Manufacturing + Purchasing) + Cascade BOM 2-stage | âœ… 1 jenis (BOM standard) |
| **SPK per Departemen** | âœ… Ya (Cutting, Embroidery, Sewing, Finishing 2-stage, Packing) | âš ï¸ Work Order (generic, tidak per dept) |
| **Daily Production Input** | âœ… Calendar grid + progres tracking real-time | âŒ Tidak ada (hanya input akhir) |
| **Editable SPK** | âœ… Ya (dengan approval multi-level) | âš ï¸ Bisa edit, tapi approval tidak sekompleks |
| **Negative Inventory** | âœ… Ya (Material Debt dengan approval + tracking payback) | âœ… Ya (negative stock allowed, tapi tidak ada debt concept) |
| **Android App** | âœ… Native Kotlin + Offline mode + ML Kit barcode | âš ï¸ Odoo Mobile (web-based, butuh internet) |
| **Barcode Scanning** | âœ… ML Kit Vision (akurat + cepat, offline-capable) | âœ… Ada (tapi perlu addon berbayar + online only) |
| **Approval Workflow** | âœ… Multi-level (SPV â†’ Manager â†’ Director) dengan email notification | âš ï¸ Ada (tapi setup kompleks) |
| **PPIC Dashboard** | âœ… Real-time + alert keterlambatan + Week Production view | âœ… Ada (tapi perlu config) |
| **QT-09 Handshake** | âœ… Otomatis antar departemen dengan surat jalan digital | âŒ Tidak ada (custom manual) |
| **Bahasa Indonesia** | âœ… Native (UI + dokumentasi + field names) | âš ï¸ Perlu translate manual |
| **Customization** | âœ… Sangat mudah (kode sendiri, FastAPI + React) | âš ï¸ Butuh developer Odoo (mahal, $100+/jam) |
| **Harga Lisensi** | âœ… **GRATIS** (self-hosted) | ğŸ’° $30/user/bulan (Odoo Cloud) atau $2,000-5,000 setup fee (self-hosted) |
| **ğŸ†• Material Debt Tracking** | âœ… Advanced: payback tracking, approval workflow, aging analysis | âš ï¸ Basic negative stock (no payback concept) |
| **ğŸ†• Dual Inventory (Internal Conversion)** | âœ… Ya (Skin & Stuffed Body di Warehouse Finishing) | âŒ Tidak support (hanya 1 location per warehouse) |
| **ğŸ†• Cascade Validation (UOM)** | âœ… Real-time variance check per stage (auto-alert >10%) | âŒ Tidak ada cross-stage validation |

---

### C. **Keunggulan ERP Quty Karunia**

| **No** | **Keunggulan** | **Penjelasan** |
|--------|----------------|----------------|
| 1 | **ğŸ†• Flexible MO Trigger (Dual Mode)** | MO dapat dibuat mode PARTIAL (PO Kain only) untuk Cutting early start (-3 hari lead time), auto-upgrade ke RELEASED saat PO Label ready. Week & Destination auto-inherit dari PO Label (zero manual error). Smart department blocking: Sewing onwards tetap blocked sampai PO Label ready. |
| 2 | **ğŸ†• Warehouse Finishing Internal Conversion** | Dual inventory (Skin & Stuffed Body) dengan 2-stage BOM terpisah - fitur unik yang tidak ada di ERP manapun! |
| 3 | **ğŸ†• UOM Conversion Auto-Validation** | Validasi dan alert langsung (Cutting: Yardâ†’Pcs, FG: Boxâ†’Pcs) - mencegah kekacauan inventori sebelum terjadi |
| 4 | **Custom untuk Soft Toys** | Workflow 7 stages sesuai real process Quty + Embroidery optional (bukan generic) |
| 5 | **Bahasa Indonesia Native** | Semua UI + dokumentasi + error messages dalam bahasa Indonesia (Admin tidak bingung) |
| 6 | **Approval Workflow Lengkap** | Multi-level approval dengan audit trail detail (siapa approve, kapan, alasan) |
| 7 | **Android App Offline** | Admin bisa scan barcode meskipun tidak ada internet (sync otomatis saat online) |
| 8 | **Daily Production Tracking** | Calendar grid untuk track progres harian (tidak ada di Odoo default) |
| 9 | **BOM Manufacturing vs Purchasing** | Bisa bandingkan efisiensi material + Cascade BOM 2-stage untuk Warehouse Finishing |
| 10 | **QT-09 Handshake** | Handover antar departemen otomatis dengan surat jalan digital (paperless) |
| 11 | **Mudah Customisasi** | Punya akses full source code â†’ bisa ubah sesuka hati (tidak perlu bayar vendor) |
| 12 | **Support Lokal** | Developer bisa dihubungi langsung via WA/Email (tidak perlu ke luar negeri) |
| 13 | **Biaya Rendah** | Tidak ada biaya lisensi, hanya server + maintenance (~$50/bulan) |
| 14 | **ğŸ†• Material Debt Advanced** | Tracking payback, approval workflow, aging analysis (lebih canggih dari negative stock biasa) |

---

### D. **Kelemahan ERP Quty Karunia vs Odoo**

| **No** | **Kelemahan** | **Mitigasi** |
|--------|---------------|--------------|
| 1 | **Belum Ada Modul Accounting** | âš ï¸ Bisa integrasi dengan software accounting terpisah (Accurate, Zahir) |
| 2 | **Belum Ada Modul HR/Payroll** | âš ï¸ Fokus ke manufacturing dulu, HR bisa fase 2 |
| 3 | **Belum Ada Marketplace/App Store** | âœ… Tidak butuh marketplace (kode sendiri, bisa custom sesuka hati) |
| 4 | **Komunitas Kecil** | âœ… Support langsung dari developer (lebih cepat) |
| 5 | **Belum Teruji Jutaan User** | âœ… Quty hanya butuh 50-100 users (sudah cukup) |

---

### E. **Rekomendasi: Kapan Pakai Odoo vs ERP Quty?**

**Pakai Odoo jika**:
- Butuh modul lengkap (Accounting, HR, CRM, dll) dalam 1 sistem
- Perusahaan besar (1,000+ users)
- Budget besar ($50,000+)
- Sudah punya tim IT yang paham Odoo
- Produksi generic (tidak butuh workflow spesifik)

**Pakai ERP Quty Karunia jika**:
- Fokus ke **manufacturing** soft toys (tidak butuh accounting/HR dulu)
- Workflow spesifik dengan **PO Label trigger**, **Warehouse Finishing 2-stage**, **UOM Conversion critical**
- Budget terbatas (<$10,000 untuk setup)
- Butuh customisasi cepat (tidak tunggu vendor lama)
- Admin pakai Android (butuh offline mode untuk production floor)
- **ğŸ†• Butuh internal conversion tracking** (Skin â†’ Stuffed Body â†’ Finished Doll)
- **ğŸ†• Butuh validasi UOM langsung** untuk mencegah kekacauan inventori
- **ğŸ†• Produksi dapat dimulai dengan PO Kain (PARTIAL) atau PO Label (RELEASED)** (flexibility & traceability)

**Kesimpulan**: Untuk Quty, **ERP Quty Karunia lebih cocok** karena:
- Custom sesuai workflow real (7 stages + Warehouse Finishing internal)
- Biaya lebih murah (zero license fee)
- Lebih mudah dikustomisasi (full source code access)
- Support lokal (response <24 jam)
- **Fitur unik yang tidak ada di Odoo**: Warehouse Finishing dual inventory, Flexible MO trigger (dual mode PARTIAL/RELEASED), UOM auto-validation dengan tolerance checking

---

## <a name="manfaat"></a>ğŸ 11. MANFAAT UNTUK QUTY

### A. **Manfaat Operasional**

| **Sebelum ERP** | **Setelah ERP** | **Improvement** |
|-----------------|-----------------|-----------------|
| Laporan manual (3-5 hari) | Laporan otomatis (5 detik) | **99% lebih cepat** |
| Hitung FinishGood manual (2 jam) | Scan barcode (15 menit) | **87% lebih cepat** |
| Material stock tidak jelas | Real-time stock visibility | **100% akurat** |
| SPK terlambat tidak ketahuan | Alert otomatis | **0 delay** |
| Approval tidak jelas | Audit trail lengkap | **100% transparan** |
| Data duplikasi banyak | Single source of truth | **0 duplikasi** |

---

### B. **Manfaat Finansial**

| **Item** | **Estimasi Penghematan/Tahun** |
|----------|--------------------------------|
| **Hemat Waktu Admin** | 3 admin Ã— 2 jam/hari Ã— 250 hari Ã— Rp 50,000/jam = **Rp 75,000,000** |
| **Reduce Material Waste** | 5% waste Ã— Rp 500,000,000 material/tahun = **Rp 25,000,000** |
| **Reduce Reject Rate** | 2% reject Ã— Rp 2,000,000,000 produksi/tahun = **Rp 40,000,000** |
| **Reduce Late Delivery Penalty** | 5 late Ã— Rp 10,000,000/penalty = **Rp 50,000,000** |
| **Total Saving per Tahun** | **Rp 190,000,000** |

---

### C. **Manfaat Strategis**

1. **Scalability** (Mudah Berkembang)
   - Tambah departemen baru â†’ tinggal config
   - Tambah user â†’ tidak ada biaya tambahan
   - Tambah pabrik â†’ deploy ulang di server baru

2. **Data-Driven Decision**
   - Management punya data akurat untuk ambil keputusan
   - Contoh: "Material mana yang paling banyak waste?"
   - Contoh: "Departemen mana yang paling efisien?"

3. **Competitive Advantage**
   - Customer senang (delivery tepat waktu)
   - Cost lebih rendah (efisiensi tinggi)
   - Quality lebih baik (QC terintegrasi)

4. **Future-Ready**
   - Bisa tambah AI/ML untuk prediksi demand
   - Bisa integrasi dengan customer (API)
   - Bisa integrasi dengan vendor (EDI)

---

## <a name="timeline"></a>ğŸ“… 12. TIMELINE & ROADMAP

### A. **Status Saat Ini (2 Februari 2026)**

```
âœ… COMPLETED (95/100):
â”œâ”€ Backend API (124 endpoints)
â”œâ”€ Frontend Web Portal (15+ pages)
â”œâ”€ Android App (4 screens, Kotlin Native)
â”œâ”€ Database Schema (27+ tabel)
â”œâ”€ Security & PBAC (23 roles) ğŸ†• +System/Bot role
â”œâ”€ Fraud Prevention System ğŸ†•
â””â”€ Dokumentasi (250+ .md files)

âš ï¸ REMAINING (24 bulan sampai completion):
â”œâ”€ Development Core Features (6 bulan)
â”œâ”€ Testing & Bug Fixing (6 bulan)
â”œâ”€ Data Migration (2 bulan)
â”œâ”€ GO-LIVE: Maret 2027 ğŸ¯
â”œâ”€ Trial/Error & Stabilization (6 bulan)
â””â”€ Optimization & Enhancement (5 bulan)

ğŸ¯ TARGET GO-LIVE: MARET 2027
âœ… PROJECT COMPLETE: FEBRUARI 2028 (2 Tahun)
```

---

### B. **Roadmap Lengkap 2 Tahun (Februari 2026 - Februari 2028)**

#### **FASE 1: FEBRUARI - JULI 2026 (Development Core Features - 6 Bulan)**

**FEBRUARI 2026**: Security & Fraud Prevention Enhancement
- âœ… System/Bot role (Role 23) implementation
- âœ… SPK Revision Request workflow
- âœ… Auto-Approve Manager logic
- âœ… Database security flags (can_see_cost, department_scope)
- âœ… Fraud detection dashboard preparation

**MARET 2026**: Async Processing & Document Generation
- Celery/ARQ worker implementation
- PDF generation (WeasyPrint): SPK, Surat Jalan, Laporan
- Label printing integration (ZPL/TSPL)
- Background task queue untuk heavy processes
- ğŸ†• **Export Journal CSV** untuk Finance (Accurate/Zahir/Jurnal.id)
- ğŸ†• **Business Continuity Plan**: Paper fallback forms design & print

**APRIL 2026**: Deployment Infrastructure & Feature Enhancement
- Off-site backup implementation (NAS + Cloud)
- APK auto-update system
- Database migration automation (Alembic)
- Monitoring stack (Prometheus + Grafana)
- ğŸ†• **Machine Downtime Log** implementation (Daily Production enhancement)
- ğŸ†• **Sales Return Receiving** (RMA Module) - Phase 1

**MEI 2026**: Reporting & Analytics Module
- BOM comparison report (Manufacturing vs Purchasing)
- Material efficiency dashboard
- Production KPI analytics
- Fraud detection automated alerts
- ğŸ†• **Sales Return Receiving** (RMA Module) - Phase 2 completion
- ğŸ†• **Training / Sandbox Mode** implementation (Android app)

---

#### **FASE 2: JUNI - AGUSTUS 2026 (Internal Testing & QA)**

**JUNI 2026**: Developer Testing
- Unit testing (pytest coverage >80%)
- Integration testing (API endpoints)
- Performance testing (load test 100 concurrent users)
- Security testing (penetration test)

**JULI 2026**: Staging Environment Setup
- Deploy ke staging server
- Import sample data (1000+ records)
- Stress testing (production-like load)
- Bug fixing & optimization

**AGUSTUS 2026**: User Acceptance Testing (UAT) - Pilot Phase
- Select 10-15 pilot users:
  - 3 Admin Produksi (Cutting, Sewing, Finishing)
  - 2 SPV (Cutting, Sewing)
  - 2 PPIC Staff
  - 2 Warehouse Staff
  - 1 Purchasing Staff
  - 1 QC Staff
- Training pilot users (1 minggu)
- UAT execution (3 minggu):
  - Test dengan data real (production scenarios)
  - Collect feedback & issues
  - Iterative improvement

---

#### **FASE 3: SEPTEMBER - OKTOBER 2026 (Data Migration & Training)**

**SEPTEMBER 2026**: Data Migration Preparation
- **Week 1-2**: Data Cleaning
  - Audit existing data (Excel/paper records)
  - Standardize material codes, artikel names
  - Verify vendor & customer data
  - Remove duplicates & inconsistencies

- **Week 3-4**: Migration Script Development
  - Python scripts untuk import master data
  - Validation rules (data integrity check)
  - Rollback mechanism (jika error)
  - Test migration di staging (dry run)

**OKTOBER 2026**: Full Data Migration
- **Week 1**: Import Master Data
  - 50-100 users (dengan role assignment)
  - 200+ material items (dengan BOM)
  - 100+ artikel/SKUs
  - 20+ vendors
  - 10+ customers
  - Historical data (optional: 3-6 bulan terakhir)

- **Week 2-4**: Data Validation
  - Cross-check dengan sistem lama
  - Verify BOM accuracy
  - Test transactions (sample MO/SPK/PO)
  - Fix migration errors

---

#### **FASE 4: NOVEMBER - DESEMBER 2026 (Mass Training & Preparation)**

**NOVEMBER 2026**: Training All Users (Batch-wise)
- **Week 1**: PPIC & Purchasing (10-15 users)
  - Modul: MO, BOM, SPK, PO
  - Duration: 3 hari (8 jam/hari)
  - Lab session: Create MO â†’ Generate SPK

- **Week 2**: Production Team (20-30 users)
  - Admin Cutting, Sewing, Finishing, Packing
  - Modul: Daily production input, Material request
  - Duration: 3 hari
  - Lab session: Input produksi harian, Handover dept

- **Week 3**: Warehouse & QC (10-15 users)
  - Modul: Material issue/receive, Stock opname, QC inspection
  - Duration: 2 hari
  - Lab session: Barcode scanning, Surat jalan

- **Week 4**: Manager & SPV (10-15 users)
  - Modul: Approval workflow, Dashboard, Reports
  - Duration: 2 hari
  - Lab session: Approve SPK, Review dashboard

**DESEMBER 2026**: Soft Launch (Parallel Run)
- **Week 1-4**: ERP Parallel dengan Sistem Lama
  - Input data di kedua sistem (double entry)
  - Compare hasil (accuracy check)
  - Identify discrepancies
  - Fine-tuning & bug fixing

- **Special Focus**:
  - Monitor performance (response time, server load)
  - Collect user feedback (pain points, UX issues)
  - On-site support team standby
  - Weekly progress meeting dengan management

---

#### **FASE 5: JANUARI 2027 (GO-LIVE!)** ğŸ¯

**Week 1 (1-7 Januari 2027)**: Hard Launch
- **Day 1 (Senin, 3 Januari)**:
  - 06:00 AM: Switch off sistem lama
  - 07:00 AM: ERP go-live announcement (all users)
  - 08:00 AM: Production start dengan ERP 100%
  - Support team on-site (developer + IT + trainer)

- **Day 2-7**: Intensive Support
  - Monitor sistem 24/7
  - Quick response untuk issue urgent (<1 jam)
  - On-site support di setiap departemen
  - Daily standup meeting (progress & blocker)

**Week 2-4 (8-31 Januari 2027)**: Stabilization & Optimization
- System monitoring & performance tuning
- Bug fixing (priority: critical > high > medium)
- User re-training (jika perlu)
- Collect feedback untuk improvement
- Celebrate success! ğŸ‰

---

### C. **Roadmap Phase 2 (Post Go-Live: Februari 2027+)**

#### **FEBRUARI - MARET 2027: Integration & Advanced Features**

- Integrasi dengan accounting software (Accurate/Zahir)
- API untuk customer portal (jika diperlukan)
- API untuk vendor EDI (Electronic Data Interchange)
- Advanced reporting (AI/ML basic predictions)

#### **APRIL - MEI 2027: Optimization & Scale**

- Performance optimization (query tuning, caching)
- Mobile App enhancement (iOS version jika perlu)
- Fraud detection AI model training
- Predictive maintenance (machine downtime prediction)

#### **JUNI 2027+: Future Features**

- Modul HR/Payroll (jika diperlukan)
- IoT integration (sensor mesin, RFID material)
- Blockchain untuk supply chain transparency (future R&D)
- Multi-factory support (jika ekspansi)

---

## ğŸ“Š SUMMARY: KENAPA PILIH ERP QUTY KARUNIA?

### âœ… **5 ALASAN UTAMA**

1. **Custom untuk Soft Toys Manufacturing**
   - Workflow 6 stages sesuai real process Quty
   - **ğŸ”¥ Dual Trigger Production** (PO Kain early start -3 to -5 days, PO Label full release)
     - MODE PARTIAL: Cutting/Embroidery dapat start tanpa tunggu PO Label
     - MODE RELEASED: Auto-upgrade saat PO Label ready
     - Smart Blocking: Sewing onwards hanya jalan saat MO = RELEASED
   - **ğŸ”¥ Warehouse Finishing 2-Stage** (Stuffing â†’ Closing dengan dual inventory tracking)
     - Internal conversion tanpa surat jalan
     - Real-time stok validation (Skin vs Stuffed Body)
     - Material consumption tracking per stage
   - **ğŸ”¥ UOM Conversion Auto-Validation** (Cutting: Yardâ†’Pcs, FG: CTNâ†’Pcs)
     - Auto-calculate dengan tolerance checking
     - Prevent inventory disaster dari konversi salah
     - Real-time variance alert >10%
   - BOM Manufacturing vs Purchasing (unique feature)
   - QT-09 Handshake antar departemen

2. **Mudah Digunakan**
   - Bahasa Indonesia native
   - UI sederhana & intuitif
   - Big Button Mode untuk Admin
   - Android app untuk barcode scanning

3. **Biaya Rendah**
   - Tidak ada biaya lisensi per user
   - Hanya bayar server + maintenance
   - ROI (Return on Investment) ~1 tahun

4. **Fleksibel & Scalable**
   - Punya akses full source code
   - Bisa custom sesuka hati
   - Mudah tambah fitur baru

5. **Support Lokal**
   - Developer bisa dihubungi langsung
   - Training & support dalam bahasa Indonesia
   - Fast response untuk issue

---

## ğŸ¯ NEXT STEPS

### Untuk Management:

1. **Review Presentasi Ini**
   - Diskusi dengan tim management
   - Tanyakan hal yang belum jelas
   - Schedule meeting untuk Q&A session

2. **Approve Budget**

### E. **Budget Breakdown (Realistic Estimate)**

#### **ONE-TIME COST (Year 1-2 - Development Phase)**

**1. Development Team (24 months)** âœ… SELECTED:
   - **Scenario 1 (Solo Developer)**: Rp 240 juta
     - Daniel Rizaldy @ Rp 10 juta/bulan Ã— 24 bulan = Rp 240 juta
   - Scenario 2 (Small Team - 18 months): Rp 450-620 juta (not selected)
   - Scenario 3 (Junior Trainee - 20 months): Rp 320-440 juta (not selected)

**2. Infrastructure Setup**:
   - Server VPS/Cloud (AWS/GCP/Azure): Rp 5-10 juta
     - Spec: 4 vCPU, 8 GB RAM, 200 GB SSD
     - Region: Singapore (low latency ke Indonesia)
   - Domain & SSL Certificate (2 years): Rp 1.4 juta
     - Domain: erp-quty.com @ Rp 200k/year Ã— 2 = Rp 400k
     - SSL: Let's Encrypt (free) atau Comodo/DigiCert @ Rp 500k/year Ã— 2 = Rp 1 juta
   - Development Tools & Licenses (2 years): Rp 6 juta
     - GitHub Pro (team collaboration): Rp 1 juta/tahun Ã— 2 = Rp 2 juta
     - Figma/Design tools: Rp 1 juta/tahun Ã— 2 = Rp 2 juta
     - Testing tools (Postman Pro, etc): Rp 1 juta/tahun Ã— 2 = Rp 2 juta

**3. Training & Migration**:
   - Training materials (printed manual, video): Rp 2 juta
   - Data migration specialist (optional): Rp 5 juta
   - On-site training logistics:
     - Venue rental (if off-site): Rp 3 juta
     - Meals for trainees (50 users Ã— 3 hari): Rp 5 juta
     - Travel & accommodation (if multi-location): Rp 5 juta
   - **Subtotal Training**: Rp 15 juta

**4. Contingency Fund (20%)**:
   - Buffer untuk unexpected cost: Rp 53 juta
   - Typical usage:
     - Bug fixing critical yang memerlukan extra hours
     - Hardware upgrade mid-project
     - External consultant untuk specific issue
     - Delay penalty mitigation
     - Daniel emergency backup (if sakit >1 minggu)

**ğŸ“Š TOTAL ONE-TIME COST** (Solo Developer - 24 months):
```
Development (24 months):     Rp 240 juta
Infrastructure Setup:        Rp 12.4 juta
Training & Migration:        Rp 15 juta
Contingency Fund (20%):      Rp 53 juta
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ¯ TOTAL: Rp 320.4 juta (~Rp 324 juta)
```

---

#### **RECURRING COST (Per Year - Post Go-Live)**

**1. Server & Hosting** (Annual):
   - AWS/GCP/Azure VPS: Rp 8-12 juta/tahun
     - Scale based on usage (dapat turun jika production stable)
   - Backup storage (S3/GCS): Rp 0.5-1 juta/tahun
     - 3-tier backup: Local + NAS + Cloud
   - Domain renewal: Rp 200k/tahun
   - SSL renewal: Rp 500k/tahun (if not using Let's Encrypt)
   - **Subtotal Hosting**: Rp 9-14 juta/tahun

**2. Maintenance & Support**:
   - Bug fixing & minor updates: Rp 5-10 juta/tahun
     - Estimated 50-100 hours/year @ Rp 100-150k/hour
   - Developer on-call (part-time): Rp 10-15 juta/tahun
     - Availability: 8 hours/week (response <4 hours for critical)
   - Security patches & dependency updates: Included in maintenance
   - **Subtotal Support**: Rp 15-25 juta/tahun

**3. Continuous Improvement** (Optional):
   - Feature enhancements (nice-to-have): Rp 20-30 juta/tahun
   - Performance optimization (after 6-12 months): Rp 10-15 juta
   - **Subtotal Improvement**: Rp 30-45 juta/tahun (optional)

**ğŸ“Š TOTAL RECURRING COST**:
```
Minimum (no improvement):     Rp 24-39 juta/tahun
Recommended (with improvement): Rp 54-84 juta/tahun
```

---

#### **ROI (Return on Investment) Calculation**

**Current Manual System Hidden Cost** (estimated):
```
â”œâ”€ Admin overtime for reports:        Rp 10 juta/tahun
â”‚   (40 jam/bulan Ã— Rp 20k/hour Ã— 12 bulan)
â”œâ”€ Material waste from error:         Rp 50 juta/tahun
â”‚   (5-10% inventory loss, data tidak akurat)
â”œâ”€ Production delay penalty:          Rp 20 juta/tahun
â”‚   (15% orders late, customer complaint)
â”œâ”€ Fraud & audit issue:               Rp 15 juta/tahun
â”‚   (no audit trail, potential leak)
â”œâ”€ Rework & quality issue:            Rp 12 juta/tahun
â”‚   (manual error, miscommunication)
â””â”€ Total Hidden Cost:                 Rp 107 juta/tahun
```

**Savings After ERP Implementation**:
```
â”œâ”€ Automated reports (zero overtime):     Rp 10 juta/tahun
â”œâ”€ Inventory accuracy 99%+:               Rp 40 juta/tahun (80% of waste)
â”œâ”€ On-time delivery improvement:          Rp 15 juta/tahun (75% reduction)
â”œâ”€ Fraud prevention (audit trail):        Rp 10 juta/tahun
â”œâ”€ Quality improvement (real-time data):  Rp 8 juta/tahun
â””â”€ Total Annual Savings:                  Rp 83 juta/tahun
```

**ğŸ¯ ROI Timeline**:
```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Scenario 1 (Solo Developer - SELECTED):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Year 0 (2026-2027): Investment         -Rp 324 juta (development 24 bulan)
Year 1 (2027-2028): Go-Live March 2027 +Rp 28 juta (10 months savings)
                    Savings - Recurring (Rp 83M Ã— 10/12 - Rp 55M)
Year 2 (2028-2029): Savings - Recurring +Rp 28 juta (Rp 83M - Rp 55M)
Year 3 (2029-2030): Savings - Recurring +Rp 28 juta
Year 4 (2030-2031): Savings - Recurring +Rp 28 juta
Year 5 (2031-2032): Savings - Recurring +Rp 28 juta

5-Year Net:     -Rp 184 juta (still in investment phase)
Payback Period: ~11-12 years (if savings fully realized)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Alternative Scenario (Conservative - 50% savings):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Annual Savings:  Rp 41.5 juta (50% of Rp 83M)
Recurring Cost:  Rp 55 juta
Net Annual:      -Rp 13.5 juta (loss per year!)

Conclusion: Tidak balik modal dari savings alone!
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

**âš ï¸ CRITICAL INSIGHT - Honest Assessment**:

ROI dari **cost savings alone** adalah **TIDAK MENARIK** (payback 13-14 tahun, bahkan bisa rugi jika savings tidak fully realized).

**TAPI** ERP value bukan hanya dari savings, tapi dari **STRATEGIC VALUE**:

1. **Scalability**: Manual system akan collapse jika production scale 2-3x
2. **Data-Driven Decision**: Real-time data â†’ faster, better decision
3. **Customer Confidence**: Professional system â†’ customer trust
4. **Audit Ready**: Full audit trail untuk ISO/customer audit requirement
5. **Competitive Advantage**: Competitors masih pakai Excel â†’ Quty lebih maju

**ğŸ“Œ RECOMMENDATION**:

**âœ… INVEST in ERP jika**:
- Quty plan **scale up production 2-3x** dalam 5 tahun
- Customer demand **real-time tracking & transparency**
- Management value **data accuracy** lebih dari cost savings
- Ada budget Rp 400 juta available (atau cicil 2 tahun)

**âŒ JANGAN INVEST jika**:
- Quty production size **stay stable** (tidak plan grow)
- Current manual system "cukup work" untuk size sekarang
- Budget sangat terbatas (<Rp 200 juta)
- Management prioritas **short-term ROI** (1-3 tahun payback)

**ğŸ’¡ ALTERNATIVE - MVP Approach**:
Jika belum yakin 100%, bisa mulai dengan **MVP (Minimum Viable Product)**:
- Budget: Rp 120-150 juta (30-40% of full scope)
- Timeline: 3 bulan
- Scope: Core module only (MO, SPK, BOM, Inventory basic)
- Pilot: 1-2 departemen (Cutting + Sewing)
- Evaluate hasil â†’ decision lanjut full atau stop

---

### F. **Risk Management & Mitigation Plan**

Setiap project besar pasti ada risk. Yang penting adalah **identify early** dan **prepare mitigation**.

#### **Technical Risks**

| Risk | Probability | Impact | Mitigation Strategy |
|---|---|---|---|
| **Server crash during production** | ğŸŸ¡ Medium | ğŸ”´ HIGH | â€¢ 3-tier backup strategy (Local backup <15 min restore + NAS off-site <1 hour + Cloud encrypted <4 hours)<br>â€¢ Hot standby server (auto-failover jika primary down)<br>â€¢ Paper Fallback SOP (production tidak stop, manual logbook, input ulang setelah recovery) |
| **Database corruption** | ğŸŸ¢ Low | ğŸ”´ CRITICAL | â€¢ Daily automated backup (retention 30 hari)<br>â€¢ Point-in-time recovery (PITR) setiap 15 menit<br>â€¢ Backup restoration drill quarterly (test apakah backup benar-benar work)<br>â€¢ Database replication (master-slave untuk read scalability) |
| **Performance bottleneck** | ğŸ”´ High | ğŸŸ¡ MEDIUM | â€¢ Load testing before go-live (simulate 100 concurrent users)<br>â€¢ Database indexing optimization (query response <200ms)<br>â€¢ Caching layer (Redis) untuk frequently accessed data<br>â€¢ CDN untuk static assets (image, CSS, JS) |
| **Security breach / Hacker** | ğŸŸ¢ Low | ğŸ”´ CRITICAL | â€¢ HTTPS + SSL certificate (encrypt data in transit)<br>â€¢ Password hashing bcrypt (no plain text password in DB)<br>â€¢ Role-based access control (RBAC) dengan audit log<br>â€¢ Regular security audit (quarterly penetration testing)<br>â€¢ Firewall & DDoS protection (Cloudflare/AWS Shield) |
| **Mobile app compatibility issue** | ğŸŸ¡ Medium | ğŸŸ¡ MEDIUM | â€¢ Test pada 10+ device models (berbagai merk & Android version)<br>â€¢ Minimum Android version: 8.0 Oreo (cover 95% users)<br>â€¢ Progressive Web App (PWA) fallback jika native app issue |

#### **Organizational Risks**

| Risk | Probability | Impact | Mitigation Strategy |
|---|---|---|---|
| **User resistance to change** | ğŸ”´ HIGH | ğŸ”´ HIGH | â€¢ **Early involvement**: Bentuk UAT team 10-15 pilot users dari berbagai dept (Februari 2026)<br>â€¢ **Show quick wins**: Demo dashboard real-time â†’ instant benefit visible<br>â€¢ **Comprehensive training**: 2-3 hari hands-on (bukan cuma teori)<br>â€¢ **Incentive program**: Bonus/recognition untuk early adopters yang aktif pakai ERP<br>â€¢ **Change management**: Communication plan (monthly newsletter, success story sharing) |
| **Key person dependency (Daniel)** | ğŸ”´ HIGH | ğŸ”´ CRITICAL | â€¢ **Documentation everything**: Code comments, architecture wiki, video tutorial<br>â€¢ **Knowledge transfer**: Weekly demo session, code review bersama<br>â€¢ **Hire backup developer**: Scenario 2 (Small Team) untuk reduce SPOF<br>â€¢ **Code repository**: GitHub (accessible by team & management)<br>â€¢ **Escrow agreement**: Source code backup di notaris (worst case scenario) |
| **Budget overrun** | ğŸŸ¡ Medium | ğŸ”´ HIGH | â€¢ **20% contingency fund**: Rp 60-80 juta buffer<br>â€¢ **Phased development**: MVP first (core feature), nice-to-have later<br>â€¢ **Monthly budget review**: Track burn rate, forecast 3 months ahead<br>â€¢ **Scope control**: Change request formal process (prevent scope creep) |
| **Timeline delay** | ğŸ”´ HIGH | ğŸŸ¡ MEDIUM | â€¢ **Realistic timeline**: 11 months (not aggressive 6 months)<br>â€¢ **Buffer time**: Each phase punya 10-15% slack time<br>â€¢ **Weekly progress tracking**: Scrum/Agile methodology (sprint review)<br>â€¢ **Early escalation**: Blocker identified â†’ escalate dalam 24 jam (not wait!) |
| **Data migration failure** | ğŸŸ¡ Medium | ğŸ”´ HIGH | â€¢ **Dry run**: Test migration di staging environment 3x before production<br>â€¢ **Data validation**: Automated script check data integrity post-migration<br>â€¢ **Rollback plan**: Keep old system running 1 month parallel (safety net)<br>â€¢ **Data cleaning**: Start early (September 2026), tidak rush last minute |

#### **Contingency Plans**

**ğŸ“‹ Scenario 1: Go-Live Delay (>1 month)**

**Trigger**: Development tidak selesai by Dec 31, 2026

**Actions**:
1. âœ… Continue parallel run (ERP + manual system) â†’ production tidak terganggu
2. âœ… Root cause analysis (developer + management): Technical issue? Scope creep? Resource constraint?
3. âœ… Mitigation plan:
   - Technical debt: Add 1 developer temporary (2-3 bulan)
   - Scope issue: Cut nice-to-have features (defer ke Phase 2)
   - Resource: Extend timeline 1-2 bulan dengan management approval
4. âœ… Re-schedule go-live: Target baru (Feb atau Mar 2027)
5. âœ… Communication: Inform all stakeholders (transparent tentang reason & new timeline)

**ğŸ“‹ Scenario 2: Critical Bug in Production**

**Trigger**: Bug severity HIGH/CRITICAL after go-live (system down atau data corruption)

**Response Timeline**:
- **Hour 0-1**: ğŸš¨ Activate Paper Fallback SOP immediately
  - SPV declare "PAPER MODE ACTIVE"
  - Production continue manual (logbook)
  - Warehouse scan barcode offline mode (auto-sync later)
- **Hour 1-4**: ğŸ”§ Developer on-call fix bug
  - Priority: Fix ASAP (target <4 hours)
  - Test fix di staging before apply to production
  - If cannot fix in 4 hours â†’ Escalate to rollback decision
- **Hour 4+**: ğŸ”„ Rollback to last stable version
  - Restore database from last backup (< 1 hour ago)
  - Deploy previous version application
  - Resume normal operation (ERP mode)
- **Day 1**: ğŸ“‹ Post-mortem report
  - What went wrong?
  - Why tidak terdeteksi di UAT?
  - How to prevent recurrence?
  - Action items (code fix, test improvement, etc)

**ğŸ“‹ Scenario 3: Developer Unavailable (Sick/Accident/Resign)**

**Scenario 1 (Solo Developer)**:
- â¸ï¸ Project pause immediate (inform management)
- ğŸ“ Contact Daniel untuk assess severity (sakit berapa lama? resign notice period?)
- ğŸ” Hire freelancer untuk continue:
  - All code di GitHub (accessible)
  - Documentation lengkap (architecture wiki)
  - Freelancer need 2-3 minggu onboarding
- â±ï¸ Timeline delay: +1-2 bulan

**Scenario 2 (Small Team)**:
- âœ… Backup developer take over (minimal disruption)
- ğŸ“‹ Re-distribute tasks among team
- ğŸ”„ Hire replacement jika Daniel permanently unavailable
- â±ï¸ Timeline delay: +2-4 minggu (manageable)

**Scenario 3 (Junior Trainee)**:
- âš ï¸ Junior cannot lead (skill gap)
- ğŸ“ Daniel (as mentor) provide remote guidance
- ğŸ” Hire senior developer temporary (2-3 bulan) untuk supervise junior
- â±ï¸ Timeline delay: +1-2 bulan

---

3. **Set Timeline** ğŸ¯
   - **Target Go-Live: JANUARI 2027** (confirmed)
   - **Fase Development: Februari - Mei 2026** (4 bulan)
   - **Fase Testing: Juni - Agustus 2026** (3 bulan)
   - **Fase Migration & Training: September - Oktober 2026** (2 bulan)
   - **Fase Preparation: November - Desember 2026** (2 bulan)
   - **Team allocation**: See Section D below (3 scenarios available)

### D. **Team Requirement for Development**

**SELECTED SCENARIO: Solo Developer (Daniel Only)** âœ…

#### **Scenario 1 - Solo Developer (Daniel Only)** ğŸ’¼ âœ… SELECTED

**Team Composition**:
- Lead Developer: Daniel Rizaldy (Full-time 24 months)

**Pros**:
- âœ… Lower cost (Rp 220-330 juta vs Rp 450-620 juta team)
- âœ… Single vision & architecture consistency
- âœ… Fast decision making (no coordination overhead)
- âœ… No team management overhead
- âœ… Code consistency (1 developer, 1 style)

**Cons**:
- âŒ **CRITICAL RISK**: Single Point of Failure (SPOF)
  - If Daniel sakit/accident â†’ project pause
  - If Daniel resign â†’ butuh hire replacement (knowledge transfer lama)
- âŒ Longer timeline (24 months vs 18 months dengan team)
- âŒ Heavy workload (40 hours/week sustained untuk 2 tahun)
- âŒ No backup for post go-live support
- âŒ Burnout risk (marathon development)

**Timeline**: 24 months (Feb 2026 - Feb 2028)  
**Budget**: Rp 10 juta/bulan Ã— 24 + overhead = **Rp 220-330 juta**  
**Risk Level**: ğŸ”´ **HIGH**  
**Go-Live**: Maret 2027 (Month 14)  
**Stabilization**: April - September 2027 (6 bulan trial/error)

---

#### **Scenario 2 - Small Team (Recommended)** â­â­â­

**Team Composition**:
- **Lead Developer**: Daniel Rizaldy (Full-time 11 months)
  - Role: Architecture, Backend Core, Team Coordination
- **Backend Developer #2**: TBD - Hire freelancer/contract (Full-time 11 months)
  - Role: API Development, Database Design, Integration
- **Frontend Developer**: TBD - Hire part-time (3 months, Fase 1 only)
  - Role: UI/UX, React/TypeScript, Mobile App (Android)
- **QA Tester**: TBD - Hire part-time (4 months, Fase 2-4)
  - Role: Test case creation, UAT coordination, Bug tracking

**Pros**:
- âœ… **Balanced risk & quality**
- âœ… Backup coverage (tidak 100% depend pada Daniel)
- âœ… Faster development (parallel work)
- âœ… Knowledge transfer built-in (3 people understand system)
- âœ… Post go-live support lebih solid (team dapat split on-call duty)

**Cons**:
- âš ï¸ Higher cost (Rp 275-385 juta)
- âš ï¸ Coordination overhead (weekly sync meeting)
- âš ï¸ Butuh 2-3 minggu untuk hire & onboard team member

**Timeline**: 11 months (Feb 2026 - Jan 2027)  
**Budget**: Rp 25-35 juta/bulan Ã— 11 = **Rp 275-385 juta**  
**Risk Level**: ğŸŸ¡ **MEDIUM**  
**Recommendation**: â­â­â­â­ **HIGHLY RECOMMENDED**

---

#### **Scenario 3 - Junior Developer Trainee** ğŸ“

**Team Composition**:
- **Mentor/Architect**: Daniel Rizaldy (Part-time 20 hours/week, 13-15 months)
  - Role: Architecture, Code review, Mentoring
- **Junior Developer**: TBD - Fresh graduate/bootcamp alumni (Full-time 13-15 months)
  - Role: Learn & Code (supervised), Testing, Documentation

**Pros**:
- âœ… Lower cost than Scenario 2 (Rp 195-260 juta)
- âœ… Sustainable workload untuk Daniel (20 hours/week)
- âœ… Junior dapat skill upgrade (win-win)
- âœ… Long-term investment (junior bisa jadi in-house developer Quty)

**Cons**:
- âš ï¸ Slower timeline (13-15 months vs 11 months)
- âš ï¸ Training overhead (Daniel harus mentoring, code review intensive)
- âš ï¸ Quality risk (junior perlu supervision ketat)
- âš ï¸ Junior might leave after trained (poaching risk)

**Timeline**: 13-15 months (Feb 2026 - Mar/Apr 2027)  
**Budget**: Rp 15-20 juta/bulan Ã— 13 = **Rp 195-260 juta**  
**Risk Level**: ğŸŸ¡ **MEDIUM**  
**Recommendation**: â­â­â­ Good for long-term investment

---

### ğŸ“Š **Team Scenario Comparison Table**

| Criteria | Scenario 1 (Solo) âœ… | Scenario 2 (Team) | Scenario 3 (Junior) |
|---|---|---|---|
| **Budget** | Rp 220-330 juta | Rp 450-620 juta | Rp 320-440 juta |
| **Timeline** | 24 months | 18 months | 20-22 months |
| **Risk** | ğŸ”´ HIGH | ğŸŸ¡ MEDIUM | ğŸŸ¡ MEDIUM |
| **Quality** | â­â­â­â­ | â­â­â­â­â­ | â­â­â­ |
| **Post Go-Live Support** | 1 person only | 3 people backup | 2 people |
| **Knowledge Transfer** | None | Built-in | Mentor â†’ Junior |
| **Scalability** | Limited | High | Medium |
| **Go-Live Target** | Maret 2027 | Agustus 2026 | November 2026 |
| **STATUS** | **SELECTED âœ…** | Not selected | Not selected |

**Management Decision**: **Scenario 1 (Solo Developer) APPROVED** - Budget constraint, extended timeline acceptable.

---

4. **Prepare Data** (Mulai Q3 2026)
   - Kumpulkan master data (material, artikel, user, dll)
   - Audit & clean existing data (remove duplicates)
   - Standardize naming convention (material codes, artikel names)
   - Siapkan historical data (optional: 3-6 bulan terakhir)
   - Assign data migration coordinator

5. **Communication Plan**
   - Announce ERP project ke seluruh karyawan (Q2 2026)
   - Monthly progress update ke management
   - Weekly newsletter untuk user awareness (Q4 2026)
   - Change management strategy (minimize resistance)

6. **ğŸ†• Prepare for Contingency** (Business Continuity)
   - Review & approve **Paper Fallback SOP**
   - Budget untuk print logbook forms (Rp 2,000,000)
   - Coordinate dengan Finance team untuk **Export Journal** workflow
   - Identify **Training Mode** users (pilot for onboarding new hires)

---

## â“ FREQUENTLY ASKED QUESTIONS (FAQ)

### General Questions

**Q1: Apakah ERP ini sudah pernah dipakai di pabrik lain?**

**A**: Ini **custom development** khusus untuk PT Quty Karunia, belum dipakai di tempat lain. Tapi workflow & best practices diambil dari ERP mature seperti Odoo, SAP, Microsoft Dynamics. Jadi bukan "coba-coba", tapi **proven workflow** yang diadaptasi ke process Quty.

Kelebihan custom vs off-the-shelf:
- âœ… 100% fit dengan workflow Quty (tidak perlu adjust process ke software)
- âœ… No recurring license fee (one-time development cost only)
- âœ… Full source code ownership (bisa modify sesuka hati)
- âœ… Bahasa Indonesia native (tidak perlu translate)

---

**Q2: Bagaimana jika Daniel sakit/resign di tengah project?**

**A**: Ini **legitimate concern** dan kami sudah prepare mitigation:

**Scenario 1 (Solo Developer)**:
- Project pause, hire freelancer untuk continue
- Semua code di GitHub + dokumentasi lengkap
- Freelancer need 2-3 minggu onboarding
- Timeline delay: +1-2 bulan

**Scenario 2 (Small Team) - RECOMMENDED**:
- Ada backup developer yang understand codebase
- Minimal disruption (re-distribute tasks)
- Timeline delay: +2-4 minggu (manageable)

**Mitigation Actions**:
- âœ… Weekly knowledge transfer session (Daniel share architecture ke team)
- âœ… Code review process (tidak ada "black box" code)
- âœ… Documentation everything (wiki + video tutorial)
- âœ… Escrow agreement (source code backup di notaris untuk worst case)

---

**Q3: Berapa lama training untuk user?**

**A**: **2-3 hari per batch** (8 jam/hari). Format:
- **Day 1 (40% teori)**: Pengenalan system, workflow overview, role & permission
- **Day 2 (60% practice)**: Hands-on dengan data dummy (create MO, input produksi, scan barcode)
- **Day 3 (evaluation)**: Mini test + Q&A session + certification

**Training Schedule** (November 2026):
- **Week 1**: PPIC & Purchasing (10-15 users) â†’ fokus: MO, BOM, PO
- **Week 2**: Production Team (20-30 users) â†’ fokus: SPK, Daily production input
- **Week 3**: Warehouse & QC (10-15 users) â†’ fokus: Material issue, Barcode scanning
- **Week 4**: Manager & SPV (10-15 users) â†’ fokus: Approval workflow, Dashboard, Reports

**Total**: ~50-70 users trained dalam 1 bulan.

**Post-Training Support**:
- âœ… On-site support team during go-live week (Jan 2027)
- âœ… Quick reference guide (printed A4, 1 halaman per role)
- âœ… Video tutorial (YouTube private, accessible 24/7)
- âœ… WhatsApp support group (response <2 hours)

---

**Q4: Bagaimana jika server mati saat production?**

**A**: Ada **3 layer protection** (Defense in Depth):

**Layer 1 - Local Backup** (Fastest):
- Automated backup every 4 hours
- Restore time: <15 menit
- Location: Server lokal (same data center)
- Recovery Point Objective (RPO): Max data loss 4 jam

**Layer 2 - NAS Off-Site Backup** (Medium):
- Automated backup daily at 03:00 AM
- Restore time: <1 jam
- Location: NAS di room/building berbeda (prevent fire/flood)
- RPO: Max data loss 24 jam

**Layer 3 - Cloud Encrypted Backup** (Disaster Recovery):
- Automated backup weekly (full backup)
- Restore time: 2-4 jam (depend on internet speed)
- Location: AWS S3 / Google Cloud Storage (encrypted)
- RPO: Max data loss 7 hari

**Plus: Paper Fallback SOP**:
- Production tidak berhenti!
- Manual logbook (format sama dengan screen layout)
- Input data susulan (backdate) setelah system recovery
- SPV approval required untuk backdate entry

**Real Example Scenario**:
```
08:30 AM: Server crash (hardware failure)
08:31 AM: SPV activate Paper Fallback Mode
08:32 AM: Production continue manual (logbook)
08:35 AM: IT team contact Daniel (diagnose issue)
09:00 AM: Decision: Hardware cannot fix quick
09:05 AM: Restore from Layer 1 backup (last 4 hours)
09:20 AM: System online again!
09:25 AM: Admin input data susulan (08:30-09:25)
09:40 AM: Back to normal operation

Total downtime: 50 minutes (production tidak stop!)
```

---

**Q5: Apakah ada biaya lisensi per user seperti SAP/Odoo?**

**A**: **TIDAK ADA** biaya lisensi per user!

Ini **custom development**, bukan commercial software. Quty punya **full ownership**:
- âœ… No annual license fee
- âœ… No per-user license (bisa tambah 100 user, cost sama)
- âœ… No vendor lock-in (source code milik Quty)
- âœ… No forced upgrade (upgrade kalau Quty mau, bukan dipaksa vendor)

**Cost Comparison**:

| Software | License Model | Cost (50 users) |
|---|---|---|
| **SAP Business One** | Per user/year | Rp 400-600 juta/tahun |
| **Odoo Enterprise** | Per user/month | Rp 120-180 juta/tahun |
| **Microsoft Dynamics** | Per user/month | Rp 200-300 juta/tahun |
| **ERP Quty (Custom)** | One-time + maintenance | Year 1-2: Rp 324 juta<br>Year 3+: Rp 55 juta/tahun |

**5-Year Total Cost**:
- SAP: Rp 2-3 miliar ğŸ˜±
- Odoo: Rp 600-900 juta
- ERP Quty: Rp 324 juta + (Rp 55 juta Ã— 3) = **Rp 489 juta** âœ…

---

**Q6: Apakah bisa integrasi dengan software akuntansi (Accurate/Zahir)?**

**A**: **Ya**, sudah ada plan di Roadmap Phase 2 (Februari 2027+).

**Saat ini (Phase 1 - Go-Live Jan 2027)**:
- Fitur "**Export Journal CSV**" (jembatan manual)
- Flow: MO Complete â†’ PPIC klik "Export Journal" â†’ Download CSV â†’ Finance import ke Accurate/Zahir (1 klik)
- Format: Disesuaikan dengan software yang dipakai (Accurate/Zahir/Jurnal.id)
- Time: 5 menit per export (better than re-entry manual 2-3 jam!)

**Roadmap Phase 2 (Post Go-Live)**:
- **API Integration** real-time
- MO Complete â†’ auto-create journal entry di Accurate/Zahir (no export-import)
- Bi-directional sync (ERP â†” Accounting)
- Budget: Rp 30-50 juta (additional development)
- Timeline: 2-3 bulan (after go-live stable)

---

**Q7: Apakah bisa akses dari luar pabrik (remote)?**

**A**: **Ya**, bisa akses dari mana saja (HP/laptop) dengan **secure connection**.

**Security Measures**:
- âœ… HTTPS encryption (data tidak bisa disadap di public WiFi)
- âœ… Role-based access (Director bisa view, Admin tidak bisa approve)
- âœ… IP Whitelisting (optional, jika management mau restrict access dari IP tertentu)
- âœ… 2FA - Two Factor Authentication (optional, OTP via SMS/email)
- âœ… Session timeout (auto logout after 30 min inactive)

**Use Cases**:
- Director: View dashboard produksi dari rumah/mobil
- Manager: Approve SPK dari luar kota (business trip)
- PPIC: Monitor progress dari home office (WFH)
- Warehouse: Scan barcode di gudang luar (jika ada satellite warehouse)

**Device Support**:
- Desktop: Windows, Mac, Linux (browser Chrome/Firefox/Edge)
- Mobile: Android (native app), iOS (web app via Safari)
- Tablet: Android tablet, iPad (responsive design)

---

**Q8: Apakah data aman dari hacker?**

**A**: **Ya**, security level setara dengan **internet banking**.

**Security Layers** (Defense in Depth):

1. **Network Layer**:
   - Firewall (block unauthorized access)
   - DDoS protection (Cloudflare/AWS Shield)
   - VPN access (optional untuk admin-level user)

2. **Application Layer**:
   - HTTPS/TLS 1.3 (encrypt data in transit)
   - SQL Injection prevention (parameterized query)
   - XSS/CSRF protection (input sanitization)
   - Rate limiting (prevent brute force attack)

3. **Data Layer**:
   - Password hashing bcrypt (no plain text in database)
   - Sensitive data encryption at rest (AES-256)
   - Database access restriction (only app server can connect)
   - Regular backup (prevent ransomware data loss)

4. **Audit & Monitoring**:
   - Audit log all actions (who did what, when)
   - Anomaly detection (alert jika ada login from unusual location)
   - Security patch regular (update dependency every month)
   - Penetration testing quarterly (simulate hacker attack)

**Compliance**:
- âœ… GDPR-ready (jika export ke Europe)
- âœ… ISO 27001 practices (information security management)
- âœ… SOC 2 Type II principles (service organization control)

**Insurance** (Recommended):
- Cyber insurance (optional, cover cost jika kena ransomware)
- Premium: ~Rp 10-20 juta/tahun
- Coverage: Data recovery, business interruption, legal liability

---

**Q9: Bagaimana kalau butuh ubah workflow di tengah jalan?**

**A**: **Bisa**, tapi ada **formal change request process** (cegah kekacauan).

**Change Request Flow**:
1. User submit change request (form di ERP atau email ke Daniel)
2. Daniel assess:
   - Impact: Small (1-2 hari) / Medium (1-2 minggu) / Large (1-2 bulan)
   - Cost: Rp XX juta (if beyond maintenance scope)
   - Risk: Low / Medium / High (impact ke existing feature?)
3. Management approve/reject (based on priority & budget)
4. If approved: Daniel schedule development (slot di sprint planning)
5. Development â†’ Test â†’ Deploy â†’ Training
6. User acceptance (verify change sesuai request)

**Free vs Paid Changes**:
- **Free** (covered by maintenance Rp 20 juta/tahun):
  - Bug fix (critical/high priority)
  - Minor UI adjustment (<2 jam work)
  - Report tweak (add 1-2 kolom)
  - Performance optimization
- **Paid** (additional cost):
  - New module (e.g., HR/Payroll)
  - Major workflow change (e.g., ubah approval flow 3-level jadi 5-level)
  - Integration dengan 3rd party (e.g., API ke vendor EDI)
  - Custom report complex (e.g., predictive analytics)

**Best Practice**:
- Collect change requests quarterly (batch processing)
- Prioritize berdasarkan business impact (ROI analysis)
- Implement in phases (tidak sekaligus, prevent regression)

---

**Q10: Apakah bisa trial/demo dulu sebelum commit full budget?**

**A**: **Ya!** Ada **2 options**:

**Option A: Interactive Demo** (Free)
- Duration: 2 jam
- Format: On-site visit atau video call
- Content:
  - Daniel presentasi (30 min): Overview, workflow, benefit
  - Live demo (60 min): Login, create MO, input produksi, dashboard
  - Q&A session (30 min): Management tanya jawab
- Outcome: Management dapat "feel" system sebelum commit

**Option B: MVP (Minimum Viable Product)** (Paid Trial)
- Budget: Rp 120-150 juta (30-40% of full scope)
- Timeline: 3 bulan (Feb-Apr 2026)
- Scope terbatas:
  - Core module only: MO, SPK, BOM, Inventory basic
  - 1-2 departemen pilot: Cutting + Sewing
  - 10-15 pilot users
  - Basic dashboard & reports
- Pilot run: 1 bulan (Mei 2026)
- Evaluation: Management decide:
  - âœ… **Continue to Full**: Invest additional Rp 250 juta untuk complete all features
  - â¸ï¸ **Pause**: Need more time to evaluate (extend pilot 1-2 bulan)
  - âŒ **Stop**: Not fit, cut loss at Rp 150 juta (better than Rp 400 juta!)

**Recommendation**:
- If management **very confident**: Skip trial, go straight to Full (save time & cost)
- If management **uncertain**: Start with MVP (reduce risk, proof of concept)

---

## ğŸ“š GLOSSARY (Istilah Yang Digunakan)

| Istilah | Kepanjangan | Penjelasan Simple |
|---|---|---|
| **ERP** | Enterprise Resource Planning | Sistem komputer yang hubungkan semua departemen pabrik (PPIC, Production, Warehouse, Finance) dalam 1 database terpusat |
| **MO** | Manufacturing Order | Perintah produksi dari PPIC (level tertinggi). 1 MO bisa jadi 5-10 SPK untuk berbagai departemen. Contoh: MO-2026-00089 untuk 480 pcs AFTONSPARV |
| **SPK** | Surat Perintah Kerja | Task detail untuk 1 departemen (Cutting, Sewing, Finishing, dll). Contoh: SPK-CUT-2026-00120 untuk Cutting 480 pcs |
| **BOM** | Bill of Materials | Daftar material untuk membuat 1 unit produk ("resep masakan" produksi). Contoh: 1 pcs AFTONSPARV butuh 0.1466 YARD kain KOHAIR + 54 gram filling + 2496 CM benang |
| **FG** | Finished Good | Barang jadi yang sudah packing, siap kirim ke customer. Di warehouse FG area |
| **WIP** | Work in Progress | Barang setengah jadi yang masih di produksi (belum packing). Contoh: Cutting result, Sewing result (Skin), Stuffed Body |
| **PO** | Purchase Order | Pesanan pembelian dari Purchasing ke Supplier. Ada 3 jenis: PO Kain (Fabric), PO Label, PO Accessories |
| **DN** | Delivery Note | Surat jalan (bukti kirim barang antar departemen atau ke customer). Contoh: DN dari Sewing ke Warehouse Finishing |
| **UOM** | Unit of Measure | Satuan ukuran material/produk. Contoh: YARD (kain), GRAM (filling), CM (benang), PCS (produk), CTN (carton) |
| **ROI** | Return on Investment | Balik modal. Berapa lama investasi kembali dari savings. Contoh: Invest Rp 400 juta, save Rp 30 juta/tahun â†’ ROI 13 tahun |
| **UAT** | User Acceptance Testing | Test oleh user real (bukan developer) untuk verify system sesuai kebutuhan. Phase sebelum go-live |
| **PPIC** | Production Planning & Inventory Control | Departemen yang bertanggung jawab plan produksi, buat MO, monitor material, schedule delivery |
| **MVP** | Minimum Viable Product | Versi basic system dengan core feature only (bukan full feature). Untuk test/proof of concept |
| **RBAC** | Role-Based Access Control | Sistem hak akses berdasarkan role. Contoh: Admin Cutting hanya bisa akses modul Cutting, tidak bisa approve SPK |
| **PBAC** | Permission-Based Access Control | Kontrol akses lebih detail based on permission. Contoh: Admin bisa Create/Read, tapi tidak bisa Approve/Void |
| **SPOF** | Single Point of Failure | Satu orang/komponen yang kalau rusak/hilang, semua sistem berhenti. Contoh: Daniel sebagai solo developer = SPOF |
| **Cascade BOM** | - | BOM bertingkat (nested). Contoh: BOM Finished Doll include BOM Stuffed Body, yang include BOM Skin. Total 30+ material dari end-to-end |
| **Dual Trigger** | - | 2 trigger untuk MO: (1) PO Kain â†’ MODE PARTIAL (Cutting start), (2) PO Label â†’ MODE RELEASED (full production all dept) |
| **Paper Fallback** | - | Prosedur darurat saat system down. Production pakai logbook manual, input ulang ke system setelah recovery |
| **Backdate Entry** | - | Input data dengan tanggal kemarin/past (bukan hari ini). Perlu approval SPV/Manager. Dipakai saat recovery dari Paper Fallback |
| **Yield** | - | Persentase output good vs target. Contoh: Target 480 pcs, actual 465 pcs â†’ Yield 96.9% (reject 3.1%) |
| **Marker** | - | Template pola cutting untuk calculate berapa YARD kain yang diperlukan untuk 1 pcs produk |

---

## ğŸ“ KONTAK

**Lead Developer & System Architect**:
- **Name**: Daniel Rizaldy
- **Email**: danielrizaldy@gmail.com
- **Phone/WhatsApp**: +62 812 8741 2570
- **GitHub Repository**: https://github.com/santz1994/ERP
- **Working Hours**: Mon-Fri 09:00-18:00 WIB
- **Response Time**: <24 hours (email), <4 hours (urgent call)

**Availability**:
- On-site visit to PT Quty Karunia: Available (schedule 2-3 hari sebelumnya)
- Video call (Zoom/Google Meet): Available
- Presentation & Q&A session: Available (2 jam)

---

**Terima kasih atas perhatiannya!**

*Daniel Rizaldy*
*Lead Developer & System Architect*

---

*Document Version: 4.0 - Security & Timeline Update*  
*Last Updated: 2 Februari 2026*  
*Major Changes:*
- *v4.0 (02-Feb-2026): Added Fraud Prevention System, Role 23 (System/Bot), Refined PBAC, Updated Timeline (Go-Live: Jan 2027)*
- *v3.0 (30-Jan-2026): Added Dual Trigger System (PO Kain PARTIAL + PO Label RELEASED)*
- *v2.0 (28-Jan-2026): Added Warehouse Finishing 2-Stage + UOM Conversion*
- *v1.0 (15-Jan-2026): Initial Release*

*Confidential - PT Quty Karunia Manufacturing*  
*ğŸ¯ Target Go-Live: Januari 2027*
